webpackJsonp([1],{"/VQY":function(t,e){},"0rZK":function(t,e){},"1L0R":function(t,e){},"2wYH":function(t,e){},"5MF2":function(t,e){},"5l/F":function(t,e){},"6YgU":function(t,e){},"8K9r":function(t,e){},"8WD9":function(t,e){},BJ6h:function(t,e){},Cu7n:function(t,e){},IcXn:function(t,e){},IeQ6:function(t,e){},IjAt:function(t,e){},"It/2":function(t,e){},JSRl:function(t,e){},K3wH:function(t,e){},Kkqo:function(t,e){},Lvpm:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"main"}},[e("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({},s,!1,function(t){a("ls/K")},null,null).exports,n=a("Dd8w"),o=a.n(n),r=a("mvHQ"),c=a.n(r),l=function(t){if(!t||"0"!==t.code&&0!==t.code)throw t;return t};function d(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push(a+"="+t[a]);return e}axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",axios.interceptors.response.use(function(t){var e="WEC-HASLOGIN",a="WEC-REDIRECTURL";return function(t){if(t&&t.data&&t.data.datas&&!1===t.data.datas[e]&&t.data.datas[a]){t.data.code="0";var s=window.location.href;window.location.href=s.substring(0,s.lastIndexOf("#"))+"#/login"}t&&t.data&&"403"===t.data.code&&(t.data.code="0",s=window.location.href,window.location.href=s.substring(0,s.lastIndexOf("#"))+"#/login")}(t),t});var u={httpGet:function(t,e,a){var s={};return e&&!0===e.noCredentials&&(s.noCredentials=!0),axios.get(t,s).then(function(t){return a&&"function"==typeof a?a(t.data):t.data})},httpGetQuery:function(t,e,a,s){var i={};a&&!0===a.noCredentials&&(i.noCredentials=!0);var n=d(e);return n.length>0&&(t+="?"+n.join("&")),axios.get(t,i).then(function(t){return s&&"function"==typeof s?s(t.data):t.data})},httpPost:function(t,e,a){return axios.post(t,e,{withCredentials:!0}).then(function(t){return a&&"function"==typeof a?a(t.data):t.data}).catch(function(t){throw t})},httpPostQuery:function(t,e,a,s){var i=d(e);return i.length>0&&(t+="?"+i.join("&")),axios.post(t,a,{}).then(function(t){return s&&"function"==typeof s?s(t.data):t.data}).catch(function(t){throw t})},errorHandle:function(t){var e=$.extend(!0,{},t);throw e.message=t.message,sessionStorage.setItem("error",c()(e)),location.href=location.href.replace(/\/\w*$/,"/error"),t},getQueryParam:function(t){var e;return location.search.replace(/\?/g,"").split("&").forEach(function(a){if(a&&"string"==typeof a){var s=a.split("=");s.length>1&&s[0]===t&&(e=s[1])}}),e},getAllQueryParams:function(){var t={};return location.search.replace(/\?/g,"").split("&").forEach(function(e){if(e&&"string"==typeof e){var a=e.split("=");a.length>0&&(t[a[0]]=a[1])}}),t},handler:{CODE:l,ROWS:function(t){return(t=l(t))&&t.datas&&t.datas.rows?t.datas.rows:[]},DATAS:function(t){return(t=l(t))&&void 0!==t.datas?t.datas:[]},FIRST_ROW:function(t){return(t=l(t))&&t.datas&&t.datas.rows?t.datas.rows[0]:null}},log:function(t){console.log(t)}},p="/wec-cpdaily-media",m=p+"/v3/campusmedia",h=function(t){return""+t},f={convertBase64:h(m+"/uploadFileBase64"),uploadFile:h(m+"/uploadFile"),msgList:h(p+"/msg/list"),msgView:h(p+"/msg"),msgSend:h(p+"/msg/send"),msgDel:h(p+"/msg/del"),msgSaveAndSend:h(p+"/msg/saveAndSend"),msgNotify:h(p+"/msg/unread/sms/notify/"),msgNotifyWaitHour:h(p+"//msg/sms/notify/wait"),orgTree:h(m+"/user/tree/common"),customGroup:h(m+"/user/tree/mine"),orgUsers:h(m+"/user/tree/search"),groupList:h(m+"/user/group/list"),canViewOrgs:h(m+"/user/group/org/canview"),createGroup:h(p+"/group/create/fromselected"),editGroup:h(p+"/group/members/add"),editGroupName:h(p+"/group/name/update"),delMembers:h(p+"/group/members/delete"),addGroup:h(m+"/user/group/add"),delGroup:h(m+"/user/group/del"),groupAddUsers:h(m+"/user/group/action"),replySettingSave:h(m+"/auto/reply/msg/update"),getReplySetting:h(m+"/auto/reply/msg/index"),getReadList:h(p+"/msg/read/list"),getMsgView:h(m+"/gateway/msg/view/"),logout:h(p+"/logout"),login:h(p+"/login"),ADD_ACTIVITY:h(p+"/activity/activity-manage/addActivity"),QUERY_ACTIVITIES:h(p+"/activity/activity-manage/activities"),CANCEL_ACTIVITY:h(p+"/activity/activity-manage/cancelPublish"),PAUSE_ACTIVITY:h(p+"/activity/activity-manage/pauseSign"),RECOVER_SIGN:h(p+"/activity/activity-manage/recoverSign"),DEL_ACTIVITY:h(p+"/activity/activity-manage/delActivity"),allUsers:h(p+"/activity/common/all-users"),uploadFileActivity:h(p+"/activity/common/uploadFile"),convertBase64Activity:h(p+"/activity/common/uploadFileBase64"),viewActivity:h(p+"/activity/activity-manage/activity"),allCircles:h(p+"/activity/common/all-circles"),editActivity:h(p+"/activity/activity-manage/editActivity"),validActivityDoing:h(p+"/activity/activity-manage/validActivityDoing"),exportExcel:h(p+"/activity/activity-manage/exportExcel"),accountInfo:h(m+"/account/owner"),accountSchools:h(p+"/tenant/list"),mediaApply:h(m+"/account/apply/action"),updateMedia:h(m+"/setting/updateMedia"),mediaList:h(m+"/account/list"),mediaDel:h(m+"/account/remove"),materialApprove:h(m+"/account/apply/material/action"),getLoginInfo:h(m+"/login/getLoginInfo"),checkLoginStatus:h(m+"/login/checkLoginStatus"),loginOut:h(m+"/login/logout"),mediaInfo:h(m+"/setting/mediaInfo"),mediaSwitch:h(m+"/account/switch"),mediaTenant:h(m+"/setting/mediaTenant"),asdf:"",GET_JOIN_PEOPLES:h(p+"/activity/activity-manage/peoples"),QUERY_ADMINS:h(p+"/admins"),GET_FANS:h(p+"/fans"),ADD_MANAGER:h(p+"/admins/add"),DELETE_MANAGER:h(p+"/admins/del"),GET_LOGS:h(p+"/log/list")},g={data:function(){return{tipMediaDeny:!1}},computed:o()({slogan:function(){return"static/slogan.png"},logo:function(){return"static/logo.png"}},Vuex.mapState({index:function(t){return t.index}})),mounted:function(){1==this.$route.params.type?this.tipMediaDeny=!0:this.initQRCode()},methods:{initQRCode:function(){this.$route.path;var t={id:"qrcode",clientId:"10000000000000007",self_redirect:!1,redirectUri:window.location.origin+f.login,topRedirect:!0};cpdailyLogin(t)},loginSucc:function(){this.$router.push("/outer")},freshWin:function(){window.location.href=window.location.origin+f.logout}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",staticStyle:{"background-image":"url('static/bg.jpg')"}},[t._m(0),t._v(" "),a("div",{staticClass:"slogan"},[a("img",{attrs:{src:t.slogan,alt:""}})]),t._v(" "),a("div",{staticClass:"qrcode-box"},[t.tipMediaDeny?a("div",{staticClass:"media-deny",staticStyle:{"text-align":"center","font-size":"16px","font-weight":"bold","padding-top":"100px"}},[a("div",[t._v("校园号身份")]),t._v(" "),a("div",[t._v("不能登录校园号平台")]),t._v(" "),a("Button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:t.freshWin}},[t._v("重新扫码")])],1):a("div",[a("span",{staticClass:"top"},[t._v("扫码登录")]),t._v(" "),a("div",{staticClass:"qrcode",attrs:{id:"qrcode"}})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo-box"},[e("img",{staticClass:"logo",attrs:{src:"static/logo.png",alt:""}}),this._v(" "),e("span",{staticClass:"title"},[this._v("校园号平台")])])}]};var y=a("VU/8")(g,v,!1,function(t){a("2wYH")},"data-v-300f7f2a",null).exports,_={data:function(){return{isCollapsed:!1,activeName:"message",mediaInfo:{}}},computed:{rotateIcon:function(){return["menu-icon",this.isCollapsed?"rotate-icon":""]},menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]},cAvatar:function(){return"url("+this.mediaInfo.icon+")"}},methods:{getCurrentMediaInfo:function(){var t=this;u.httpGet(f.mediaInfo+"/-1",{},u.handler.DATAS).then(function(e){t.mediaInfo=e,sessionStorage.setItem("canSeeOrgStructure",t.mediaInfo.canSeeOrgStructure)}).catch(function(t){})},selectMenu:function(t){this.$router.push("/home/"+t)},collapsedSider:function(){this.$refs.leftSide.toggleCollapse()},Switch:function(){this.$router.push("/outer/medialist")},Exit:function(){window.location.href=window.location.origin+f.logout},viewMediaInfo:function(){this.$router.replace("/outer/mediainfo/"+this.mediaInfo.wid)}},mounted:function(){this.getCurrentMediaInfo()}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Layout",[a("Sider",{ref:"leftSide",staticClass:"left-sider",style:{width:t.isCollapsed?"78px":"200px"},attrs:{"hide-trigger":"",collapsible:"","collapsed-width":78},model:{value:t.isCollapsed,callback:function(e){t.isCollapsed=e},expression:"isCollapsed"}},[a("Menu",{class:t.menuitemClasses,staticStyle:{height:"100%"},attrs:{"active-name":t.activeName,theme:"dark",width:"auto"},on:{"on-select":t.selectMenu}},[a("div",{staticClass:"logo-content",staticStyle:{color:"#fff"}},[a("span",{staticClass:"logo",staticStyle:{"background-image":"url('static/logo.png')"}}),t._v(" "),a("div",{staticClass:"left",style:{display:t.isCollapsed?"none":"inline-block"}},[a("span",{staticStyle:{width:"84px","font-size":"14px","line-height":"14px",display:"inline-block"}},[t._v("今日校园")]),t._v(" "),a("span",{staticStyle:{width:"84px","font-size":"12px","line-height":"12px",display:"inline-block"}},[t._v("校园号平台")])])]),t._v(" "),a("MenuItem",{attrs:{name:"message"}},[a("Icon",{staticStyle:{"margin-left":"3px"},attrs:{type:"email"}}),t._v(" "),a("span",[t._v("消息送达")])],1),t._v(" "),a("MenuItem",{attrs:{name:"activitylist"}},[a("Icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"ios-flag",size:"28"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"3px"}},[t._v("校园活动")])],1),t._v(" "),a("MenuItem",{attrs:{name:"group"}},[a("Icon",{staticStyle:{"margin-left":"3px"},attrs:{type:"android-people",size:"24"}}),t._v(" "),a("span",[t._v("用户组管理")])],1),t._v(" "),a("MenuItem",{attrs:{name:"logs"}},[a("Icon",{staticStyle:{"margin-left":"3px"},attrs:{type:"android-list",size:"24"}}),t._v(" "),a("span",[t._v("操作日志")])],1),t._v(" "),a("MenuItem",{staticStyle:{position:"absolute",width:"100%",bottom:"80px"},attrs:{name:"replysetting"}},[a("Icon",{staticStyle:{"margin-left":"3px"},attrs:{type:"android-settings",size:"24"}}),t._v(" "),a("span",[t._v("回复管理")])],1)],1)],1),t._v(" "),a("Layout",{staticClass:"content-main",style:{left:t.isCollapsed?"78px":"200px"}},[a("Header",{staticClass:"layout-header-bar",style:{"margin-right":t.isCollapsed?"78px":"200px"}},[a("Icon",{class:t.rotateIcon,style:{margin:"20px 20px 0"},attrs:{type:"navicon-round",size:"24"},nativeOn:{click:function(e){t.collapsedSider(e)}}}),t._v(" "),a("div",{staticClass:"right-content",style:{right:t.isCollapsed?"78px":"200px"}},[t.mediaInfo.icon?a("div",{staticClass:"head-img",style:{"background-image":t.cAvatar},on:{click:t.viewMediaInfo}}):t._e(),t._v(" "),a("span",{staticStyle:{"font-size":"14px",color:"#657180","line-height":"64px",float:"left",cursor:"pointer"},on:{click:t.viewMediaInfo}},[t._v(t._s(t.mediaInfo.name))]),t._v(" "),a("a",{on:{click:function(e){e.preventDefault(),t.Switch(e)}}},[a("Icon",{staticStyle:{float:"left",color:"rgb(51, 153, 255)","font-size":"19px","margin-top":"22px","margin-left":"24px"},attrs:{type:"arrow-swap"}})],1),t._v(" "),a("a",{on:{click:function(e){e.preventDefault(),t.Exit(e)}}},[a("Icon",{staticStyle:{float:"left",color:"rgb(51, 153, 255)","font-size":"19px","margin-top":"22px","margin-left":"24px","margin-right":"24px"},attrs:{type:"power"}})],1)])],1),t._v(" "),a("Content",[a("div",{staticStyle:{"margin-top":"60px",transition:"margin-right .3s"},style:{"margin-right":t.isCollapsed?"78px":"200px"}},[a("router-view")],1)])],1)],1)],1)},staticRenderFns:[]};var C=a("VU/8")(_,b,!1,function(t){a("eptE")},"data-v-4c9b6fde",null).exports,w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Layout",{staticStyle:{height:"100vh"}},[a("Sider",{ref:"side1",attrs:{"hide-trigger":"",collapsible:"","collapsed-width":78},model:{value:t.isCollapsed,callback:function(e){t.isCollapsed=e},expression:"isCollapsed"}},[a("Menu",{class:t.menuitemClasses,attrs:{"active-name":"1-2",theme:"dark",width:"auto"}},[a("div",{staticClass:"logo-content",staticStyle:{color:"#fff"}},[a("span",{staticClass:"logo",staticStyle:{"background-image":"url('static/logo.png')"}}),t._v(" "),a("div",{staticClass:"left"},[a("div",[t._v("今日校园")]),t._v(" "),a("div",[t._v("校园号平台")])])]),t._v(" "),a("MenuItem",{attrs:{name:"1-1"}},[a("Icon",{attrs:{type:"ios-navigate"}}),t._v(" "),a("span",[t._v("Option 1")])],1),t._v(" "),a("MenuItem",{attrs:{name:"1-2"}},[a("Icon",{attrs:{type:"search"}}),t._v(" "),a("span",[t._v("Option 2")])],1),t._v(" "),a("MenuItem",{attrs:{name:"1-3"}},[a("Icon",{attrs:{type:"settings"}}),t._v(" "),a("span",[t._v("Option 3")])],1)],1)],1),t._v(" "),a("Layout",[a("Header",{staticClass:"layout-header-bar",style:{padding:0}},[a("Icon",{class:t.rotateIcon,style:{margin:"20px 20px 0"},attrs:{type:"navicon-round",size:"24"},nativeOn:{click:function(e){t.collapsedSider(e)}}})],1),t._v(" "),a("Content",{style:{margin:"20px",background:"#fff",minHeight:"260px"}},[t._v("\n                Content\n            ")])],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")({data:function(){return{isCollapsed:!1}},computed:{rotateIcon:function(){return["menu-icon",this.isCollapsed?"rotate-icon":""]},menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]}},methods:{collapsedSider:function(){this.$refs.side1.toggleCollapse()}}},w,!1,function(t){a("sbeL")},"data-v-b787c77a",null).exports,k={data:function(){return{}},methods:{},props:{items:{default:function(){return[]},type:Array}},mounted:function(){}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bc-con"},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:"/"}},[t._v("校园号平台")]),t._v(" "),t._l(t.items,function(e){return a("BreadcrumbItem",{key:e.name,attrs:{to:e.path}},[t._v(t._s(e.name))])})],2)],1)},staticRenderFns:[]};var I=a("VU/8")(k,x,!1,function(t){a("dDV2"),a("dZXr")},"data-v-3e8252b6",null).exports,T={components:{},data:function(){return{loading:!1,tableFresh:!0,selectedRows:[],source:[],queryParams:{},pager:{pageNumber:1,pageSize:10,total:0}}},mounted:function(){this.lazyLoad||this.initSource()},methods:{freshTable:function(){var t=this;this.tableFresh=!1,this.$nextTick(function(){t.tableFresh=!0})},initSource:function(){this.goFirstPage(),this.queryParams=this.options.queryParams,this.getSource()},getSource:function(){var t=this,e=this,a=$.extend(!0,{},this.queryParams,this.pager);e.data&&e.data.length>0?(e.source=e.data,e.pager.total=e.data.length):(this.loading=!0,u.httpGetQuery(e.options.url,a,{},u.handler.DATAS).then(function(a){var s=a.rows&&a.rows.length?a.rows:[];0===s.length&&t.pager.pageNumber>1&&(t.pager.pageNumber--,t.getSource()),s.length>10&&(s=s.splice(10*(t.pager.pageNumber-1),10)),t.dataOptimize&&(s=t.dataOptimize(s)),e.source=s,e.pager.total=a.totalSize,t.$emit("data-loaded",s)}).catch(function(e){t.$Message.error("异常："+e.message)}).then(function(){t.loading=!1}))},goFirstPage:function(){this.pager.pageNumber=1},pageChange:function(t){this.pager.pageNumber=t,this.reload()},pageSizeChange:function(t){this.pager.pageSize=t,this.goFirstPage(),this.reload()},selectionChange:function(t){this.selectedRows=t,this.$emit("on-selection-change",t)},getSelectedRows:function(t){return this.selectedRows},reload:function(t){t?(this.goFirstPage(),this.queryParams=t,this.getSource()):this.getSource()},refreshTableChecked:function(t){var e=this;this.source.forEach(function(a){t(a)?e.$set(a,"_checked",!0):e.$set(a,"_checked",!1)})},refreshTableCheckDisabled:function(t){var e=this;this.source.forEach(function(a){t(a)?e.$set(a,"_disabled",!0):e.$set(a,"_disabled",!1)})},selectRow:function(t,e){this.$emit("on-select",t,e)},unselectRow:function(t,e){this.$emit("on-select-cancel",t,e)}},props:{columns:{required:!0,type:Array,default:function(){return[]}},options:{required:!0,type:Object,default:function(){}},lazyLoad:{type:Boolean,default:!1},dataOptimize:{type:Function},data:{required:!1,type:Array,default:function(){return[]}}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t.tableFresh?a("Table",{attrs:{border:"",loading:t.loading,columns:t.columns,data:t.source,size:"small"},on:{"on-selection-change":t.selectionChange,"on-select-cancel":t.unselectRow}}):t._e(),t._v(" "),a("Page",{staticClass:"bh-mt-16",attrs:{"page-size":t.pager.pageSize,current:t.pager.pageNumber,total:t.pager.total,"show-total":"","page-size-opts":[5,10,20,50],placement:"top"},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)},staticRenderFns:[]};var O=a("VU/8")(T,M,!1,function(t){a("fxwG")},"data-v-05487812",null).exports,N={data:function(){return{keyword:""}},methods:{search:function(){this.$emit("search",this.keyword)},Input:function(t){var e=this.$refs.searchinput.value;this.$emit("input",e)}},props:{placeholder:{type:String,default:""},value:{type:String,default:""}},mounted:function(){this.keyword=this.value},components:{}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-input"},[a("input",{ref:"searchinput",staticClass:"search-content",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.Input,keyup:function(e){if(!("button"in e)&&13!==e.keyCode)return null;t.search(e)}}}),t._v(" "),a("Icon",{staticClass:"search-icon",attrs:{type:"ios-search-strong",size:"22"}}),t._v(" "),a("Button",{staticClass:"search-btn",staticStyle:{background:"#2D8CF0","border-radius":"0 4px 4px 0"},attrs:{slot:"append",type:"primary"},on:{click:t.search},slot:"append"},[t._v("搜索")])],1)},staticRenderFns:[]};var U=a("VU/8")(N,E,!1,function(t){a("5MF2")},"data-v-4a809d28",null).exports,A={data:function(){var t=this;return{data:[{title:"拖拉机",count:20}],options:{url:f.groupList,queryParams:{groupName:""}},columns:[{title:"用户组名称",key:"groupName",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.groupName}},e.row.groupName)}},{title:"人数",key:"userCount"},{title:"操作",key:"action",width:330,align:"center",render:function(e,a){return e("div",[e("a",{style:{marginRight:"5px"},on:{click:function(){t.addUser(a.row)}}},"添加人员"),e("a",{style:{marginRight:"5px"},on:{click:function(){t.viewGroup(a.row)}}},"查看"),e("a",{style:{marginRight:"5px"},on:{click:function(){t.delGroup(a.row)}}},"删除")])}}],loading:!0,forstagePackages:[],frontParams:{appletId:"",token:""},frontLoading:!0,modalDel:!1}},components:{UTable:O,searchInput:U},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{calcUpload:function(){return f.forestageUpload}}),methods:{search:function(){this.$refs.table.reload(this.options.queryParams)},setDataStyle:function(t){return t.forEach(function(t){t.cellClassName={appletStatus:t.appletStatus?"cell-online":"cell-offline"}}),t},resetLoading:function(){var t=this;this.loading=!1,this.$nextTick(function(){t.loading=!0})},addGroup:function(){sessionStorage.setItem("eidtGroup",""),this.$router.push("/home/newgroup")},addUser:function(t){sessionStorage.setItem("eidtGroup",c()({groupId:t.groupId,groupName:t.groupName})),this.$router.push("/home/newgroup")},viewGroup:function(t){sessionStorage.setItem("currentGroup",c()({groupId:t.groupId,groupName:t.groupName})),this.$router.push("/home/viewgroup")},delGroup:function(t){this.currentGroup=t,this.modalDel=!0},delGroupOk:function(){var t=this;u.httpPost(f.delGroup+"/"+this.currentGroup.groupId,{},u.handler.CODE).then(function(e){t.$Message.success("删除成功"),t.$refs.table.reload()}).catch(function(e){t.$Message.error("异常："+e.errMsg)})},cancelDelGroup:function(){this.modalDel=!1}},mounted:function(){}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",[a("div",{staticClass:"btn-area"},[a("div",{staticClass:"input-col"},[a("search-input",{staticStyle:{width:"450px","margin-top":"26px"},attrs:{placeholder:"请输入用户组名称"},on:{search:t.search},model:{value:t.options.queryParams.groupName,callback:function(e){t.$set(t.options.queryParams,"groupName",e)},expression:"options.queryParams.groupName"}})],1),t._v(" "),a("div",{staticClass:"button-col"},[a("Button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("新增分组")])],1)]),t._v(" "),a("div",{staticClass:"bh-mv-16"},[a("UTable",{ref:"table",attrs:{columns:t.columns,options:t.options}})],1),t._v(" "),a("Modal",{attrs:{title:"警告"},on:{"on-ok":t.delGroupOk,"on-cancel":t.cancelDelGroup},model:{value:t.modalDel,callback:function(e){t.modalDel=e},expression:"modalDel"}},[a("p",[t._v("确认删除此用户组？")])])],1)},staticRenderFns:[]};var V=a("VU/8")(A,D,!1,function(t){a("It/2"),a("Cu7n")},"data-v-56bebd00",null).exports,P={data:function(){var t=this;return{groupId:"",options:{url:f.orgUsers,queryParams:{groupId:"fans",optType:0,name:""}},columns:[{type:"selection",width:60,align:"center"},{title:"学号",key:"openId"},{title:"姓名",key:"userName"},{title:"性别",key:"gender",render:function(t,e){return t("div","MALE"===e.row.gender?"男":"女")}},{title:"类别",key:"userType",render:function(t,e){return t("div","TEACHER"===e.row.userType?"教师":"学生")}},{title:"班级",key:"className"},{title:"部门",key:"departName"},{title:"操作",key:"action",align:"center",render:function(e,a){return e("div",[e("a",{style:{marginRight:"5px"},on:{click:function(){t.add2Group(a.row)}}},"添加至分组")])}}],groupList:[],modalAdd:!1,currentUser:null}},components:{UTable:O,searchInput:U},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{calcUpload:function(){return f.forestageUpload}}),methods:{search:function(){this.$refs.table.reload(this.options.queryParams)},add2Group:function(t){this.currentUser=t,this.modalAdd=!0},getGroups:function(){var t=this;u.httpGet(f.customGroup,{},u.handler.DATAS).then(function(e){e.children.splice(0,1),t.groupList=e.children})},addGroup:function(){var t=this,e={groupIds:[this.groupId],userIds:[this.currentUser.userId]};u.httpPost(f.groupAddUsers,e,u.handler.CODE).then(function(e){t.$Message.success("添加成功"),t.$refs.table.reload(),t.$emit("fans-add-group")}).catch(function(e){t.$Message.error("异常："+e.message)})},cancelAddGroup:function(){this.modalAdd=!1}},mounted:function(){this.getGroups()}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fans-con"},[a("search-input",{staticStyle:{width:"450px","margin-top":"26px"},attrs:{placeholder:"请输入姓名、学号/工号"},on:{search:t.search},model:{value:t.options.queryParams.name,callback:function(e){t.$set(t.options.queryParams,"name",e)},expression:"options.queryParams.name"}}),t._v(" "),a("div",{staticClass:"bh-mv-16"},[a("UTable",{ref:"table",attrs:{columns:t.columns,options:t.options}})],1),t._v(" "),a("Modal",{attrs:{title:"信息"},on:{"on-ok":t.addGroup,"on-cancel":t.cancelAddGroup},model:{value:t.modalAdd,callback:function(e){t.modalAdd=e},expression:"modalAdd"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},t._l(t.groupList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.title))])}))],1)],1)},staticRenderFns:[]};var R={data:function(){return{tab:"custom",bcs:[{name:"用户组管理"}]}},methods:{fansAddGroup:function(){this.$refs.custom.search()}},mounted:function(){},components:{breadcrumb:I,custom:V,fans:a("VU/8")(P,F,!1,function(t){a("IcXn")},"data-v-6ff45cf1",null).exports}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("breadcrumb",{attrs:{items:t.bcs}}),t._v(" "),a("div",{staticClass:"body-con"},[a("div",{staticClass:"group-header bh-mb-8 bh-mt-4"},[t._v("\n            用户组管理\n        ")]),t._v(" "),a("div",{staticClass:"group-body"},[a("Tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("TabPane",{attrs:{label:"自定义分组",name:"custom"}}),t._v(" "),a("TabPane",{attrs:{label:"我的粉丝",name:"fans"}})],1),t._v(" "),a("custom",{directives:[{name:"show",rawName:"v-show",value:"custom"===t.tab,expression:"tab === 'custom'"}],ref:"custom"}),t._v(" "),a("fans",{directives:[{name:"show",rawName:"v-show",value:"fans"===t.tab,expression:"tab === 'fans'"}],on:{"fans-add-group":t.fansAddGroup}})],1)])],1)},staticRenderFns:[]};var L=a("VU/8")(R,j,!1,function(t){a("IjAt")},"data-v-7fb0e1f2",null).exports,z=function t(e,a){for(var s=e.length,i=0;i<s;i++){a.filter(function(t){return t.id===e[i].id}).length>0&&(e.splice(i--,1),s--)}a.forEach(function(a){a.children&&a.children.length>0&&t(e,a.children)})},B=function t(e){e&&e.length>0&&e.forEach(function(e){e.checked=!1,t(e.children)})},G={data:function(){return{keyword:"",grade:"",orgs:[],showTree:!0,checkedOrgs:[]}},components:{},computed:o()({},Vuex.mapState({index:function(t){return t.index}})),props:{initCheckedGroups:{type:Array,default:function(){return[]}}},methods:{getOrgTree:function(){var t=this;return u.httpGet(f.orgTree,{},u.handler.DATAS).then(function(e){if(e.id){var a=e.children;t.initCheckedGroups.length>0&&(!function t(e,a){a.forEach(function(a){e.initCheckedGroups.some(function(t){return t.groupId===a.id&&t.groupName===a.title})&&(a.checked=!0,e.checkedOrgs.push(a)),a.children&&a.children.length>0&&t(e,a.children)})}(t,a),t.$emit("checked-orgs-changed",t.checkedOrgs)),t.orgs=a}})},checkChange:function(t){for(var e=t.length,a=0;a<e;a++)z(t,t[a].children),e=t.length;this.checkedOrgs=t,this.$emit("checked-orgs-changed",this.checkedOrgs)},selectNode:function(t){t.length<1||this.$emit("org-selected",t)},deleteAllCheckedOrgs:function(){var t=this;B(this.orgs),this.checkedOrgs=[],this.$emit("checked-orgs-changed",this.checkedOrgs),this.showTree=!1,this.$nextTick(function(){t.showTree=!0})},deleteCheckedOrg:function(t){var e,a=function t(e,a){var s;return e&&e.length>0&&e.forEach(function(e){e.id===a?s=e:t(e.children,a)&&(s=t(e.children,a))}),s}(this.orgs,t.id);a&&(B([a]),this.checkedOrgs.forEach(function(a,s){a.id===t.id&&(e=s)}),this.checkedOrgs.splice(e,1))}},mounted:function(){this.getOrgTree().then(function(){})}},q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"org-tree-node"},[this.showTree?e("Tree",{attrs:{data:this.orgs,"show-checkbox":""},on:{"on-check-change":this.checkChange,"on-select-change":this.selectNode}}):this._e()],1)},staticRenderFns:[]};var H=a("VU/8")(G,q,!1,function(t){a("xgWk")},"data-v-87ca29ee",null).exports,W={data:function(){return{keyword:"",groupName:"",options:{url:f.orgUsers,queryParams:{groupId:"",optType:3,name:""}},columns:[{type:"selection",width:60,align:"center"},{title:"学号",key:"openId",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.openId}},e.row.openId)}},{title:"姓名",key:"userName"},{title:"性别",key:"gender",width:65,render:function(t,e){return t("div","MALE"===e.row.gender?"男":"女")}},{title:"类别",width:65,key:"userType",render:function(t,e){return t("div","TEACHER"===e.row.userType?"教师":"学生")}},{title:"班级",key:"className",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.className}},e.row.className)}},{title:"部门",key:"departName",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.departName}},e.row.departName)}}],obj:{},allCheckedUsers:[]}},props:{parent:{type:String,default:""},initCheckedUsers:{type:Array,default:function(){return[]}}},components:{UTable:O,searchInput:U},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{calcUpload:function(){return f.forestageUpload}}),methods:{search:function(){var t=this.obj;t&&"org"===t.type?(this.options.queryParams.groupId=t.org.id,this.options.queryParams.optType=t.org.path.indexOf("老师")>-1?2:1):t&&"group"===t.type?(this.options.queryParams.groupId=t.group.id,this.options.queryParams.optType=0):(this.options.queryParams.groupId="fans",this.options.queryParams.optType=0);var e=$.extend(!0,{},this.options.queryParams);e.name=encodeURIComponent(e.name),this.$refs.table.reload(e)},selectionChange:function(t){var e=this;t.forEach(function(t){e.allCheckedUsers.some(function(e){return e.userId===t.userId})||e.allCheckedUsers.push(t)}),this.$emit("selected-users-changed",this.allCheckedUsers)},selectCancel:function(t,e){var a;this.allCheckedUsers.forEach(function(t,s){t.userId===e.userId&&(a=s)}),void 0!==a&&(this.allCheckedUsers.splice(a,1),this.$emit("selected-users-changed",this.allCheckedUsers))},freshUserTable:function(t){this.obj=t,"org"===t.type?(this.options.queryParams.groupId=t.org.id,this.options.queryParams.optType=t.org.path.indexOf("老师")>-1?2:1,this.groupName=t.org.title,this.checked=t.org.checked):(this.options.queryParams.groupId=t.group.id,this.options.queryParams.optType=0,this.groupName=t.group.title,this.checked=t.group.checked);var e=$.extend(!0,{},this.options.queryParams);e.name=encodeURIComponent(e.name),this.$refs.table.reload(e)},freshState:function(){this.obj.org&&this.obj.org.checked||this.obj.group&&this.obj.group.checked?(this.$refs.table.refreshTableChecked(function(t){return!0}),this.$refs.table.refreshTableCheckDisabled(function(t){return!0})):(this.obj.org&&!1===this.obj.org.checked||this.obj.group&&!1===this.obj.group.checked)&&(this.$refs.table.refreshTableChecked(function(t){return!1}),this.$refs.table.refreshTableCheckDisabled(function(t){return!1}))},dataOptimize:function(t){var e=this;return!0===this.checked?t.forEach(function(t){t._checked=!0,t._disabled=!0}):t.forEach(function(t){e.allCheckedUsers.some(function(e){return e.userId===t.userId})&&(t._checked=!0)}),t},deleteCheckedUser:function(t){var e=this,a=t.userId;this.allCheckedUsers.forEach(function(t,s){t.userId===a&&e.allCheckedUsers.splice(s,1)}),this.$refs.table.refreshTableChecked(function(t){return e.allCheckedUsers.some(function(e){return e.userId===t.userId})})},deleteAllCheckedUsers:function(){this.allCheckedUsers=[],this.$refs.table.refreshTableChecked(function(t){return!1}),this.$emit("selected-users-changed",this.allCheckedUsers)}},mounted:function(){"message"===this.parent&&(this.groupName="关注我的用户"),this.initCheckedUsers.length>0&&(this.allCheckedUsers=this.initCheckedUsers,this.$emit("selected-users-changed",this.allCheckedUsers))}},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-con"},[a("div",{staticClass:"list-header bh-mv-16"},[t._v("\n        "+t._s(t.groupName)+"\n    ")]),t._v(" "),a("search-input",{staticStyle:{width:"450px","margin-top":"26px"},attrs:{placeholder:"请输入姓名、学号/工号"},on:{search:t.search},model:{value:t.options.queryParams.name,callback:function(e){t.$set(t.options.queryParams,"name",e)},expression:"options.queryParams.name"}}),t._v(" "),a("div",{staticClass:"bh-mv-16"},[a("UTable",{ref:"table",attrs:{columns:t.columns,options:t.options,"data-optimize":t.dataOptimize,lazyLoad:!0},on:{"on-select-cancel":t.selectCancel,"on-selection-change":t.selectionChange}})],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(W,Q,!1,function(t){a("BJ6h")},"data-v-6a14ba0a",null).exports,J={data:function(){return{}},components:{orgTree:H,userTable:Y},computed:o()({},Vuex.mapState({index:function(t){return t.index}})),methods:{checkedOrgsChanged:function(t){this.$emit("checked-orgs-changed",t),this.$refs.usertable.freshState()},orgSelected:function(t){this.$refs.usertable.freshUserTable({type:"org",org:t[0]})},usersChanged:function(t){this.$emit("selected-users-changed",t)}},mounted:function(){}},K={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"org-con"},[e("div",{staticClass:"org-tree"},[e("org-tree",{ref:"orgtree",on:{"checked-orgs-changed":this.checkedOrgsChanged,"org-selected":this.orgSelected}})],1),this._v(" "),e("div",{staticClass:"user-list"},[e("user-table",{ref:"usertable",on:{"selected-users-changed":this.usersChanged}})],1)])},staticRenderFns:[]};var X=a("VU/8")(J,K,!1,function(t){a("lbVc")},"data-v-2054d26c",null).exports,Z={data:function(){return{keyword:"",data:[{userCode:"asd",userName:"学校",userGender:"asd",userGrade:"asd"}],options:{url:f.orgUsers,queryParams:{groupId:"fans",optType:0,name:""}},columns:[{type:"selection",width:60,align:"center"},{title:"学号",key:"openId"},{title:"姓名",key:"userName"},{title:"性别",key:"gender",render:function(t,e){return t("div","MALE"===e.row.gender?"男":"女")}},{title:"类别",key:"userType",render:function(t,e){return t("div","TEACHER"===e.row.userType?"教师":"学生")}},{title:"班级",key:"className"},{title:"部门",key:"departName"}],allCheckedFanses:[]}},components:{UTable:O,searchInput:U},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{calcUpload:function(){return f.forestageUpload}}),methods:{search:function(){this.$refs.table.reload(this.options.queryParams)},selectionChange:function(t){this.allCheckedFanses=t,this.$emit("selected-fanses-changed",this.allCheckedFanses)},deleteCheckedUser:function(t){var e=this;this.allCheckedFanses.forEach(function(a,s){a.userId===t.userId&&e.allCheckedFanses.splice(s,1)}),this.$refs.table.refreshTableChecked(function(t){return e.allCheckedFanses.some(function(e){return e.userId===t.userId})})},deleteAllCheckedUsers:function(){this.allCheckedFanses=[],this.$refs.table.refreshTableChecked(function(t){return!1}),this.$emit("selected-fanses-changed",this.allCheckedFanses)},initCheckedUsers:function(t){this.allCheckedFanses=t,this.$emit("selected-fanses-changed",this.allCheckedFanses)}},mounted:function(){}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fans-con"},[a("search-input",{staticStyle:{width:"450px","margin-top":"26px"},attrs:{placeholder:"请输入姓名、学号/工号"},on:{search:t.search},model:{value:t.options.queryParams.name,callback:function(e){t.$set(t.options.queryParams,"name",e)},expression:"options.queryParams.name"}}),t._v(" "),a("div",{staticClass:"bh-mv-16"},[a("UTable",{ref:"table",attrs:{columns:t.columns,options:t.options},on:{"on-selection-change":t.selectionChange}})],1)],1)},staticRenderFns:[]};var et=a("VU/8")(Z,tt,!1,function(t){a("nkMt")},"data-v-ac713e20",null).exports,at={data:function(){return{}},components:{},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{cUsers:function(){var t=[];return this.selectedUsers.forEach(function(e){t.push(e)}),this.selectedFanses.forEach(function(e){t.some(function(t){return t.userId===e.userId})||t.push(e)}),t},cOrgs:function(){var t=[];return this.selectedOrgs.forEach(function(e){t.push(e)}),this.selectedGroups.forEach(function(e){t.some(function(t){return t.id===e.id})||t.push(e)}),t}}),props:{selectedOrgs:{type:Array,default:function(){return[]}},selectedGroups:{type:Array,default:function(){return[]}},selectedUsers:{type:Array,default:function(){return[]}},selectedFanses:{type:Array,default:function(){return[]}}},methods:{delOrg:function(t){this.$emit("delete-org",this.cOrgs[t])},delUser:function(t){this.$emit("delete-user",this.cUsers[t])},cancelSave:function(){this.$router.push("/home/group")},Save:function(){console.log()},GetSelectedUsers:function(){return this.cUsers},GetSelectedOrgs:function(){return this.cOrgs},clear:function(){this.$emit("delete-all-users")}},mounted:function(){}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"sl-header bh-mv-16"},[t._v("\n        已选择：\n        "),a("div",{staticClass:"bh-pull-right bh-mt-4"},[a("Icon",{attrs:{type:"android-delete"}}),t._v(" "),a("a",{on:{click:function(e){e.preventDefault(),t.clear(e)}}},[t._v("清空已选")])],1)]),t._v(" "),a("div",{staticClass:"orgs-con bh-mv-16"},t._l(t.cOrgs,function(e,s){return a("div",{key:s,staticClass:"org-item"},[t._v(t._s(e.title)+"\n            "),a("span",{on:{click:function(e){t.delOrg(s)}}},[t._v("X")])])})),t._v(" "),a("div",{staticClass:"users-con bh-mv-16"},t._l(t.cUsers,function(e,s){return a("div",{key:e.userCode,staticClass:"user-item"},[t._v(t._s(e.userName+" ")+"\n            "),a("span",{on:{click:function(e){t.delUser(s)}}},[t._v("X")])])}))])},staticRenderFns:[]};var it=a("VU/8")(at,st,!1,function(t){a("WvWv")},"data-v-4a711f63",null).exports,nt={data:function(){return{groupName:"",bcs:[{path:"/home/group",name:"用户组管理"},{name:"新建用户组"}],tab:"fans",selectedOrgs:[],selectedUsers:[],selectedfanses:[],editMode:!1,groupId:"",viewOrgs:!1,loading:!1}},components:{breadcrumb:I,orgUsers:X,userFans:et,selectedPanel:it},computed:o()({},Vuex.mapState({index:function(t){return t.index}})),methods:{deleteOrg:function(t){this.$refs.orgusers&&this.$refs.orgusers.$refs.orgtree.deleteCheckedOrg(t)},deleteAllCheckedUsers:function(){this.$refs.orgusers&&(this.$refs.orgusers.$refs.usertable.deleteAllCheckedUsers(),this.$refs.orgusers.$refs.orgtree.deleteAllCheckedOrgs()),this.$refs.userfans.deleteAllCheckedUsers()},deleteUser:function(t){this.$refs.orgusers&&(this.$refs.orgusers.$refs.usertable.deleteCheckedUser(t),this.$refs.orgusers.$refs.usertable.deleteCheckedUser(t)),this.$refs.userfans.deleteCheckedUser(t)},selectedUsersChange:function(t){this.selectedUsers=t},selectedFansesChange:function(t){this.selectedfanses=t},checkedOrgsChanged:function(t){this.selectedOrgs=t},delOrg:function(t){this.selectedOrgs.splice(t,1)},delUser:function(t){this.selectedUsers.splice(t,1)},cancelSave:function(){sessionStorage.setItem("eidtGroup",""),this.$router.push("/home/group")},Save:function(){var t=this;if(this.groupName)if(this.groupName.length>50)this.$Message.error("用户组名称不能超过50个字");else if(/\s/.test(this.groupName))this.$Message.error("用户组名称不能包含空格");else{var e=this.$refs.selectedpanel.GetSelectedUsers(),a=this.$refs.selectedpanel.GetSelectedOrgs(),s={groupId:this.groupId,groupName:this.groupName,userIds:e.map(function(t){return t.userId}),groups:a.map(function(t){return{groupId:t.id,groupName:t.title,groupType:t.path.indexOf("老师")>-1?2:1}})};this.loading=!0,this.editMode?u.httpPost(f.editGroup,s).then(function(e){if("0"!==e.code)throw e;t.$Message.success("添加成功"),t.loading=!1}).catch(function(e){console.log(e),t.$Message.error("添加失败："+e.errMsg),t.loading=!1}):u.httpPost(f.createGroup,s).then(function(e){if("0"!==e.code)throw e;t.$Message.success("用户组创建成功"),t.loading=!1,t.$router.push("/home/group")}).catch(function(e){console.log(e),t.$Message.error("用户组创建失败："+e.errMsg),t.loading=!1})}else this.$Message.error("请输入用户组名称")},checkCanViewOrgs:function(){sessionStorage.getItem("canSeeOrgStructure")&&"true"===sessionStorage.getItem("canSeeOrgStructure")&&(this.viewOrgs=!0)}},mounted:function(){this.checkCanViewOrgs();var t=sessionStorage.getItem("eidtGroup");if(t){var e=JSON.parse(t);this.editMode=!0,this.groupId=e.groupId,this.groupName=e.groupName,this.bcs[1].name="添加组员"}}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("breadcrumb",{attrs:{items:t.bcs}}),t._v(" "),a("div",{staticClass:"body-con"},[a("div",{staticClass:"title-area bh-pv-32 bh-ph-16"},[t.editMode?t._e():a("Input",{staticClass:"btn-search",staticStyle:{width:"400px"},attrs:{placeholder:"请输入用户组名称"},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}}),t._v(" "),t.editMode?a("div",{staticClass:"bh-pl-8",staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(t.groupName))]):t._e()],1),t._v(" "),a("div",{staticClass:"new-group-body"},[a("div",{staticClass:"panel-users bh-pv-16"},[a("Tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("TabPane",{attrs:{label:"我的粉丝",name:"fans"}}),t._v(" "),t.viewOrgs?a("TabPane",{attrs:{label:"组织架构",name:"org"}}):t._e()],1),t._v(" "),t.viewOrgs?a("org-users",{directives:[{name:"show",rawName:"v-show",value:"org"===t.tab,expression:"tab === 'org'"}],ref:"orgusers",staticClass:"user-body",on:{"checked-orgs-changed":t.checkedOrgsChanged,"selected-users-changed":t.selectedUsersChange}}):t._e(),t._v(" "),a("user-fans",{directives:[{name:"show",rawName:"v-show",value:"fans"===t.tab,expression:"tab === 'fans'"}],ref:"userfans",staticClass:"user-body",on:{"selected-fanses-changed":t.selectedFansesChange}})],1),t._v(" "),a("div",{staticClass:"panel-selected"},[a("selected-panel",{ref:"selectedpanel",attrs:{"selected-orgs":t.selectedOrgs,"selected-users":t.selectedUsers,"selected-fanses":t.selectedfanses},on:{"delete-user":t.deleteUser,"delete-org":t.deleteOrg,"delete-all-users":t.deleteAllCheckedUsers}}),t._v(" "),a("div",{staticClass:"btn-add-con"},[t.editMode?t._e():a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.Save}},[t._v("新增")]),t._v(" "),t.editMode?a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.Save}},[t._v("保存")]):t._e(),t._v(" "),a("Button",{on:{click:t.cancelSave}},[t._v("取消")])],1)],1)])])],1)},staticRenderFns:[]};var rt=a("VU/8")(nt,ot,!1,function(t){a("iF2/"),a("Sb0c")},"data-v-522979d2",null).exports,ct={data:function(){return{data:[{userCode:"asd",userName:"学校",userGender:"asd",userGrade:"asd"}],groupName:"水电费公司的风格",keyword:"",selectedUsers:[{userCode:"001111",userName:"晨晨"}],tab:"custom",bcs:[{path:"/home/group",name:"用户组管理"},{name:"添加人员"}],options:{url:f.CUSTOM_GROUP,queryParams:{keyword:""}},columns:[{type:"selection",width:60,align:"center"},{title:"学号",key:"userCode"},{title:"姓名",key:"userName"},{title:"性别",key:"userGender"},{title:"班级",key:"userGrade"}]}},methods:{cancelSave:function(){},Save:function(){}},mounted:function(){},components:{breadcrumb:I,UTable:O}},lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("breadcrumb",{attrs:{items:t.bcs}}),t._v(" "),a("div",{staticClass:"body-con"},[a("div",{staticClass:"group-header bh-pv-16 bh-ph-16"},[t._v("\n            添加人员\n        ")]),t._v(" "),a("div",{staticClass:"group-body"},[a("div",{staticClass:"user-list"},[a("div",{staticClass:"list-header bh-mv-16"},[t._v("\n                    "+t._s(t.groupName)+"\n                ")]),t._v(" "),a("Input",{staticClass:"btn-search",attrs:{placeholder:"输入学生的姓名、学号"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("Button",{attrs:{slot:"append",type:"primary"},slot:"append"},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"bh-mv-16"},[a("UTable",{ref:"table",attrs:{columns:t.columns,options:t.options,data:t.data}})],1)],1),t._v(" "),a("div",{staticClass:"panel-selected"},[a("div",{staticClass:"sl-header bh-mv-16"},[t._v("\n                    已选择：\n                ")]),t._v(" "),a("div",{staticClass:"users-con bh-mv-16"},t._l(t.selectedUsers,function(e,s){return a("div",{key:e.userCode,staticClass:"user-item"},[t._v(t._s(e.userName+" "+e.userCode)+"\n                        "),a("span",{on:{click:function(e){t.delUser(s)}}},[t._v("X")])])})),t._v(" "),a("div",{staticClass:"btn-add-con"},[a("Button",{attrs:{type:"primary"},on:{click:t.Save}},[t._v("保存")]),t._v(" "),a("Button",{on:{click:t.cancelSave}},[t._v("取消")])],1)])])])],1)},staticRenderFns:[]};var dt=a("VU/8")(ct,lt,!1,function(t){a("i7V9")},"data-v-ef25a904",null).exports,ut={data:function(){var t=this;return{bcs:[{path:"/home/group",name:"用户组管理"},{name:"查看用户组"}],data:[{userCode:"asd",userName:"学校",userGender:"asd",userGrade:"asd"}],groupName:"水电费公司的风格",groupId:"",keyword:"",selectedUsers:[{userCode:"001111",userName:"晨晨"}],options:{url:f.orgUsers,queryParams:{groupId:"",optType:0,name:""}},columns:[{type:"selection",width:60,align:"center"},{title:"学号",key:"openId"},{title:"姓名",key:"userName"},{title:"性别",key:"gender",render:function(t,e){return t("div","MALE"===e.row.gender?"男":"女")}},{title:"类别",key:"userType",render:function(t,e){return t("div","TEACHER"===e.row.userType?"教师":"学生")}},{title:"班级",key:"className"},{title:"部门",key:"departName"},{title:"操作",key:"action",width:330,align:"center",render:function(e,a){return e("div",[e("a",{style:{marginRight:"5px"},on:{click:function(){t.delUser(a.row)}}},"移出分组")])}}],currentUser:null,modalDel:!1,delTip:"确认移除此用户吗？",userIds:[],nameEditing:!1,newGroupName:""}},methods:{search:function(){this.$refs.table.reload(this.options.queryParams)},addUser:function(){sessionStorage.setItem("eidtGroup",c()({groupId:this.groupId,groupName:this.groupName})),this.$router.push("/home/newgroup")},delUsers:function(){var t=this.$refs.table.getSelectedRows();!t||t.length<1?this.$Message.error("请选择要删除的用户"):(this.delTip="确认移除已选用户吗？",this.userIds=t.map(function(t){return t.userId}),this.modalDel=!0)},delUser:function(t){this.delTip="确认移除此用户吗？",this.userIds=[t.userId],this.modalDel=!0},delOk:function(){var t=this,e={groupId:this.groupId,userIds:this.userIds};u.httpPost(f.delMembers,e,u.handler.CODE).then(function(e){t.$Message.success("移除成功"),t.$refs.table.reload()}).catch(function(e){t.$Message.error("异常："+e.message)})},editGroupName:function(){this.newGroupName=this.groupName,this.nameEditing=!0},saveGroupName:function(){var t=this;if(this.newGroupName)if(this.newGroupName.length>50)this.$Message.error("用户组名称不能超过50个字");else if(/\s/.test(this.newGroupName))this.$Message.error("用户组名称不能包含空格");else{var e={groupId:this.groupId,groupName:this.newGroupName};u.httpPost(f.editGroupName,e,u.handler.CODE).then(function(){t.$Message.success("修改成功"),t.groupName=t.newGroupName,t.nameEditing=!1}).catch(function(e){t.$Message.error("修改成功："+e.message)})}else this.$Message.error("请输入用户组名称")},cancelDel:function(){this.modalDel=!1}},mounted:function(){var t=sessionStorage.getItem("currentGroup");if(t){var e=JSON.parse(t);this.groupName=e.groupName,this.groupId=e.groupId,this.options.queryParams.groupId=this.groupId,this.$refs.table.reload(this.options.queryParams)}},components:{breadcrumb:I,UTable:O,searchInput:U}},pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("breadcrumb",{attrs:{items:t.bcs}}),t._v(" "),a("div",{staticClass:"body-con"},[t.nameEditing?t._e():a("div",{staticClass:"group-header bh-pv-16 bh-ph-16"},[t._v("\n            "+t._s(t.groupName)+"\n            "),a("span",{on:{click:t.editGroupName}},[a("Icon",{attrs:{type:"edit"}})],1)]),t._v(" "),t.nameEditing?a("div",{staticClass:"group-header bh-pv-16 bh-ph-16"},[a("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入用户组名称"},model:{value:t.newGroupName,callback:function(e){t.newGroupName=e},expression:"newGroupName"}}),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.saveGroupName}},[t._v("保存")])],1):t._e(),t._v(" "),a("div",{staticClass:"group-body"},[a("div",{staticClass:"user-list"},[a("div",{staticClass:"search-area"},[a("search-input",{staticStyle:{width:"450px","margin-top":"26px"},attrs:{placeholder:"请输入姓名、学号/工号"},on:{search:t.search},model:{value:t.options.queryParams.name,callback:function(e){t.$set(t.options.queryParams,"name",e)},expression:"options.queryParams.name"}}),t._v(" "),a("div",{staticClass:"btn-area"},[a("Button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("添加人员")]),t._v(" "),a("Button",{on:{click:t.delUsers}},[t._v("批量移除分组")])],1)],1),t._v(" "),a("div",{staticClass:"bh-mv-16"},[a("UTable",{ref:"table",attrs:{columns:t.columns,options:t.options,lazyLoad:!0}})],1)])])]),t._v(" "),a("Modal",{attrs:{title:"警告"},on:{"on-ok":t.delOk,"on-cancel":t.cancelDel},model:{value:t.modalDel,callback:function(e){t.modalDel=e},expression:"modalDel"}},[a("p",[t._v(t._s(t.delTip))])])],1)},staticRenderFns:[]};var mt=a("VU/8")(ut,pt,!1,function(t){a("Pw6H")},"data-v-230b7192",null).exports,ht={data:function(){var t=this;return{data:[{title:"你们好",sendUserGroup:"拖拉机",cTime:"2017-10-10 10:10",state:"发送中 10/100"}],options:{url:f.msgList,queryParams:{msgStatus:"SEND_IN,SEND_ERROR,SEND_END"}},columns:[{title:"消息标题",key:"title",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.title}},e.row.title)}},{title:"推送对象",key:"sendUserGroup",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.sendUserGroup}},e.row.sendUserGroup)}},{title:"创建时间",key:"cTime"},{title:"已读 / 全部",key:"readCount",render:function(t,e){return t("div","SEND_IN"==e.row.status?"发送中":e.row.readCount+" / "+e.row.receiveCount)}},{title:"操作",key:"action",align:"center",render:function(e,a){return e("div",[e("a",{style:{marginRight:"5px"},on:{click:function(){t.copyMessage(a.row)}}},"复制"),e("a",{style:{marginRight:"5px"},on:{click:function(){t.viewMessage(a.row)}}},"查看")])}}],loading:!0,forstagePackages:[],frontParams:{appletId:"",token:""},frontLoading:!0}},components:{UTable:O},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{calcUpload:function(){return f.forestageUpload}}),methods:{setDataStyle:function(t){return t.forEach(function(t){t.cellClassName={appletStatus:t.appletStatus?"cell-online":"cell-offline"}}),t},copyMessage:function(t){this.$router.push("/home/publishmessage/copy/"+t.msgId)},viewMessage:function(t){this.$router.push("/home/publishmessage/view/"+t.msgId)},freshSendedMessage:function(){this.$refs.table.reload(this.options.queryParams)}},mounted:function(){}},ft={render:function(){var t=this.$createElement,e=this._self._c||t;return e("article",[e("div",{staticClass:"bh-mv-16"},[e("UTable",{ref:"table",attrs:{columns:this.columns,options:this.options}})],1)])},staticRenderFns:[]};var gt=a("VU/8")(ht,ft,!1,function(t){a("T1mX"),a("VbSJ")},"data-v-2ce4ad66",null).exports,vt={data:function(){var t=this;return{options:{url:f.msgList,queryParams:{msgStatus:"SEND"}},columns:[{title:"消息标题",key:"title",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.title}},e.row.title)}},{title:"推送对象",key:"sendUserGroup",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.sendUserGroup}},e.row.sendUserGroup)}},{title:"创建时间",key:"cTime"},{title:"操作",key:"action",align:"center",render:function(e,a){return e("div",[e("a",{style:{marginRight:"5px"},on:{click:function(){t.sendMessage(a.row)}}},"发送"),e("a",{style:{marginRight:"5px"},on:{click:function(){t.copyMessage(a.row)}}},"复制"),e("a",{style:{marginRight:"5px"},on:{click:function(){t.editMessage(a.row)}}},"编辑"),e("a",{style:{marginRight:"5px"},on:{click:function(){t.delMessage(a.row)}}},"删除")])}}],loading:!0,forstagePackages:[],frontParams:{appletId:"",token:""},frontLoading:!0,currentMsg:null,modalDel:!1}},components:{UTable:O},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{calcUpload:function(){return f.forestageUpload}}),methods:{setDataStyle:function(t){return t.forEach(function(t){t.cellClassName={appletStatus:t.appletStatus?"cell-online":"cell-offline"}}),t},copyMessage:function(t){this.$router.push("/home/publishmessage/copy/"+t.msgId)},editMessage:function(t){this.$router.push("/home/publishmessage/edit/"+t.msgId)},sendMessage:function(t){var e=this;u.httpPost(f.msgSend+"/"+t.msgId,{},u.handler.CODE).then(function(t){e.$Message.success("发送成功"),e.$refs.table.reload(e.options.queryParams),e.$emit("draft-message-send")}).catch(function(t){e.$Message.error("异常："+t.message)})},delMessage:function(t){this.currentMsg=t,this.modalDel=!0},cancelDelMessage:function(t){this.modalDel=!1},delMessageOk:function(){var t=this;u.httpPost(f.msgDel+"/"+this.currentMsg.msgId,{},u.handler.CODE).then(function(e){t.$Message.success("删除成功"),t.$refs.table.reload(t.options.queryParams)}).catch(function(e){t.$Message.error("删除异常："+e.message)})}},mounted:function(){}},yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",[a("div",{staticClass:"bh-mv-16"},[a("UTable",{ref:"table",attrs:{columns:t.columns,options:t.options}})],1),t._v(" "),a("Modal",{attrs:{title:"警告"},on:{"on-ok":t.delMessageOk,"on-cancel":t.cancelDelMessage},model:{value:t.modalDel,callback:function(e){t.modalDel=e},expression:"modalDel"}},[a("p",[t._v("确认删除此消息？")])])],1)},staticRenderFns:[]};var _t={data:function(){return{tab:"sended",bcs:[{name:"消息送达"}],fromDetail:!1}},methods:{publishMessage:function(){this.$router.push("/home/publishmessage/new/n")},freshSendedMessage:function(){this.$refs.sended.freshSendedMessage()},changTab:function(t){sessionStorage.setItem("msg-tab",t)}},beforeRouteEnter:function(t,e,a){a(function(t){(e.path.indexOf("/home/publishmessage/edit/")>-1||e.path.indexOf("/home/publishmessage/copy/")>-1)&&"draft"===sessionStorage.getItem("msg-tab")&&(t.tab="draft")})},mounted:function(){},components:{breadcrumb:I,sended:gt,draft:a("VU/8")(vt,yt,!1,function(t){a("Q+6O"),a("1L0R")},"data-v-0e3d1a58",null).exports}},bt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("breadcrumb",{attrs:{items:t.bcs}}),t._v(" "),a("div",{staticClass:"body-con"},[a("div",{staticClass:"message-header bh-mb-8 bh-mt-4"},[t._v("\n            消息送达\n        ")]),t._v(" "),a("div",{staticClass:"message-body"},[a("div",{staticClass:"message-header bh-pv-16"},[a("Button",{attrs:{type:"primary"},on:{click:t.publishMessage}},[t._v("发布消息")])],1),t._v(" "),a("div",[a("Tabs",{on:{"on-click":t.changTab},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("TabPane",{attrs:{label:"已发布",name:"sended"}}),t._v(" "),a("TabPane",{attrs:{label:"草稿箱",name:"draft"}})],1),t._v(" "),a("sended",{directives:[{name:"show",rawName:"v-show",value:"sended"===t.tab,expression:"tab === 'sended'"}],ref:"sended"}),t._v(" "),a("draft",{directives:[{name:"show",rawName:"v-show",value:"draft"===t.tab,expression:"tab === 'draft'"}],on:{"draft-message-send":t.freshSendedMessage}})],1)])])],1)},staticRenderFns:[]};var Ct=a("VU/8")(_t,bt,!1,function(t){a("6YgU")},"data-v-f0649b64",null).exports,wt=a("sYY+"),St=a.n(wt),kt={name:"editor",props:{value:{type:String,default:""},fileUploadUrl:{type:String,default:""}},data:function(){return{editor:null}},methods:{getContent:function(){return this.value},setContent:function(t){this.editor.txt.html(t)}},mounted:function(){var t=this,e=new St.a("#editor");this.editor=e,e.customConfig.menus=["head","bold","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","image","table","code"],e.customConfig.zIndex=100,e.customConfig.uploadImgServer=this.fileUploadUrl,e.customConfig.withCredentials=!0,e.customConfig.uploadFileName="file",e.customConfig.uploadImgMaxSize=5e6,e.customConfig.uploadImgMaxLength=1,e.customConfig.uploadImgHooks={before:function(t,e,a){Vue.prototype.$Loading.start()},success:function(t,e,a){Vue.prototype.$Loading.finish()},fail:function(t,e,a){Vue.prototype.$Loading.error()},error:function(t,e){Vue.prototype.$Loading.error()},timeout:function(t,e){Vue.prototype.$Loading.error()},customInsert:function(t,e,a){t(e.datas.fileUrl)}},e.customConfig.customAlert=function(e){t.$Message.error(e)},e.customConfig.onchange=function(e){t.$emit("change",e)},e.create(),e.txt.html(this.value)}},xt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"edit-body",attrs:{id:"editor"}})])}]};var It=a("VU/8")(kt,xt,!1,function(t){a("W09/")},null,null).exports,$t="https://feres.cpdaily.com/custom/forxyh/",Tt={jpeg:$t+"jpeg.png",jpg:$t+"jpeg.png",png:$t+"png.png",doc:$t+"doc.png",xls:$t+"xls.png",xlsx:$t+"xls.png",pdf:$t+"pdf.png",pptx:$t+"pptx.png",zip:$t+"zip.png",rar:$t+"rar.png"},Mt={props:{value:{type:Array,default:function(){return[]}},maxNum:{type:Number,default:4},readonly:{type:Boolean,default:!1}},data:function(){return{uploadFileUrl:f.uploadFile,alreadyUploadNum:this.value.length}},methods:{getFileType:function(t){var e=t.split(".");return e[e.length-1]},getFileTypeImgUrl:function(t){return Tt[this.getFileType(t)]},beforeUpload:function(t){return Vue.prototype.$Loading.start(),this.alreadyUploadNum+=1,this.alreadyUploadNum===this.maxNum+1?(this.$Message.warning("最多只能上传4个附件~"),!1):!(this.alreadyUploadNum>this.maxNum+1)&&void 0},delAttachment:function(t){this.value.splice(t,1),this.alreadyUploadNum=this.value.length},downloadAttachment:function(t){var e=this.value[t].fileUrl;window.open(e)},onSuccess:function(t){Vue.prototype.$Loading.finish();var e=this.getFileType(t.datas.name),a=Tt[e];this.value.push({fileId:t.datas.id,fileName:t.datas.name,fileUrl:t.datas.fileUrl,fileType:e,fileTypeUrl:a})},onError:function(t){Vue.prototype.$Loading.error(),this.alreadyUploadNum-=1,console.log(t)},onFormatError:function(t){Vue.prototype.$Loading.error(),this.alreadyUploadNum-=1,this.$Message.error("暂不支持该文件类型"),console.log(t)},onExceededSize:function(t){Vue.prototype.$Loading.error(),this.alreadyUploadNum-=1,this.$Message.error("附件大小不得超过10M"),console.log(t)}}},Ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-attachments"},[t._l(t.value,function(e,s){return a("div",{key:s,staticClass:"attachment-item"},[a("div",{staticClass:"file-meta"},[a("div",{staticClass:"file-type"},[a("img",{attrs:{src:t.getFileTypeImgUrl(e.fileName),alt:"文件类型图片"}})]),t._v(" "),a("div",{staticClass:"file-name"},[t._v(t._s(e.fileName))])]),t._v(" "),a("div",{staticClass:"options"},[t.readonly?t._e():a("a",{attrs:{href:"javascript: void 0;"},on:{click:function(e){t.delAttachment(s)}}},[t._v("删除")]),t._v(" "),t.readonly?a("a",{attrs:{href:"javascript: void 0;"},on:{click:function(e){t.downloadAttachment(s)}}},[t._v("下载")]):t._e()])])}),t._v(" "),a("Upload",{directives:[{name:"show",rawName:"v-show",value:t.value.length<4&&!t.readonly,expression:"value.length < 4 && !readonly"}],staticClass:"add",attrs:{"show-upload-list":!1,action:t.uploadFileUrl,multiple:"","with-credentials":"",type:"select","max-size":10240,"before-upload":t.beforeUpload,"on-success":t.onSuccess,"on-error":t.onError,"on-format-error":t.onFormatError,accept:".jpg, .jpeg, .png, .doc, .xlsx, .xls, .xlsm, .xltm, .xlsb, .xlam, .pdf, .zip, .rar, .pptx",format:["jpg","jpeg","png","doc","xlsx","xls","xlsm","xltm","xlsb","xlam","pdf","zip","rar","pptx"],"on-exceeded-size":t.onExceededSize}},[a("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline",disabled:t.alreadyUploadNum>=t.maxNum}},[t._v("添加附件("+t._s(t.value.length)+"/"+t._s(t.maxNum)+")")])],1)],2)},staticRenderFns:[]};var Nt=a("VU/8")(Mt,Ot,!1,function(t){a("ct+W")},"data-v-1014fc66",null).exports,Et=a("YZ0n"),Ut={props:{option:{type:Object}},data:function(){return{cropperOpt:JSON.parse(c()(this.option))}},methods:{getCropData:function(t){this.$refs.cropper.getCropData(function(e){t&&t(e)})},getCropBlob:function(t){this.$refs.cropper.getCropBlob(function(e){t&&t(e)})}},components:{VueCropper:a.n(Et).a}},At={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cropper-box"},[e("vue-cropper",{ref:"cropper",attrs:{img:this.cropperOpt.img,autoCrop:this.cropperOpt.autoCrop,autoCropWidth:this.cropperOpt.autoCropWidth,autoCropHeight:this.cropperOpt.autoCropHeight,fixed:this.cropperOpt.fixed,fixedNumber:this.cropperOpt.fixedNumber,outputType:"png",fixedBox:this.cropperOpt.fixedBox}})],1)},staticRenderFns:[]};var Dt=a("VU/8")(Ut,At,!1,function(t){a("/VQY")},"data-v-6f3baa73",null).exports,Vt={data:function(){return{uploadFileUrl:f.uploadFile,fileName:"",cropperOpt:{loading:!0,visible:!1,img:"",autoCrop:!0,fixedNumber:[9,5],fixed:!0,fixedBox:!1}}},components:{cropper:Dt},methods:{beforeUpload:function(t){this.fileName=t.fileName;var e=new FileReader,a=this;return e.onload=function(t){a.cropperOpt.img=t.currentTarget.result,a.cropperOpt.visible=!0},e.readAsDataURL(t),!1},onSuccess:function(){},onError:function(){},onFormatError:function(){this.$Message.error("暂不支持该格式")},onExceededSize:function(){this.$Message.error("图片大小不得超过3M")},clipOk:function(){var t=this;this.$refs.cropper.getCropData(function(e){u.httpPost(f.convertBase64,{name:t.fileName,data:e}).then(function(e){t.$emit("on-done",e.datas.fileUrl),t.cropperOpt.visible=!1})})}}},Pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-from-local"},[a("Upload",{staticClass:"option-item",attrs:{action:t.uploadFileUrl,"with-credentials":"",type:"select","max-size":3072,"before-upload":t.beforeUpload,"on-success":t.onSuccess,"on-error":t.onError,"on-format-error":t.onFormatError,"on-exceeded-size":t.onExceededSize,format:["jpg","jpeg","png"],accept:".jpg, .jpeg, .png"}},[a("Button",{staticStyle:{background:"white"},attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("本地上传")])],1),t._v(" "),a("Modal",{attrs:{title:"裁剪图片",loading:t.cropperOpt.loading},on:{"on-ok":t.clipOk},model:{value:t.cropperOpt.visible,callback:function(e){t.$set(t.cropperOpt,"visible",e)},expression:"cropperOpt.visible"}},[t.cropperOpt.visible?a("cropper",{ref:"cropper",attrs:{option:t.cropperOpt}}):t._e()],1)],1)},staticRenderFns:[]},Ft=a("VU/8")(Vt,Pt,!1,null,null,null).exports,Rt={data:function(){return{}},components:{},computed:{cPic:function(){return"url("+this.info.pic+")"},cBg:function(){return"url(static/phone.png)"}},props:{info:{type:Object,default:function(){return{}}}},methods:{},mounted:function(){}},jt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"title"},[this._v("\n        图文实时预览\n    ")]),this._v(" "),e("div",{staticClass:"body"},[e("div",{staticClass:"phone-con",style:{"background-image":this.cBg}},[e("div",{staticClass:"msg-con",style:{"background-image":this.cPic}},[e("div",{staticClass:"cnt"},[this._v("\n                    "+this._s(this.info.title)+"\n                ")])])])])])},staticRenderFns:[]};var Lt=a("VU/8")(Rt,jt,!1,function(t){a("c3lx")},"data-v-1ff0e34e",null).exports,zt=function(t){return function(e,a,s){var i=[];null!==a&&void 0!==a||i.push(new Error(t)),"string"==typeof a&&""===a.trim()&&i.push(new Error(t)),"string"==typeof a&&(/^\s/.test(a)||/\s$/.test(a))&&i.push(new Error(t)),Array.isArray(a)&&0===a.length&&i.push(new Error(t)),s(i)}},Bt={data:function(){return{message:{title:"",content:"",attachments:[],img:"static/default-cover.png"},keyword:"",ruleValidate:{title:[{required:!0,message:"标题不能为空",trigger:"blur"},{type:"string",max:50,message:"标题不能超过50个字符",trigger:"blur"},{validator:zt("标题前后不能有空格")}],content:[{required:!0,validator:function(t,e,a){var s=[],i=e.replace(/<[^img|>]+>/g,"").trim();(i=i.replace(/&nbsp;/g,"").trim())||s.push(new Error("内容不能为空")),e.length>1e4&&(console.log("超出1万字"),console.log(e),s.push(new Error("内容不能超过1万个字符"))),a(s)}}],img:[{validator:zt("请选择封面图片")}]},uploadFile:f.uploadFile}},components:{editor:It,messagePreview:Lt,attachments:Nt,uploadFromLocal:Ft},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{cInfo:function(){return{pic:this.message.img,title:this.message.title}}}),props:{messageInfo:{type:Object,default:function(){return{}}}},methods:{editorChange:function(t){this.message.content=t,this.$refs.form.validateField("content")},doneChooseImg:function(t){this.message.img=t},next:function(){var t=this;this.$refs.form.validate(function(e){e?t.$emit("next"):t.$Message.error("请检查表单")})},cancel:function(){sessionStorage.setItem("current-message",""),this.$router.push("/home/message")},getMessageContent:function(){var t=$.extend(!0,{},this.message);return t.attachments=t.attachments.map(function(t){return t.fileUrl}).join(","),t},openYiban:function(){window.open("https://q.yiban.cn")}},mounted:function(){var t=this.$route.params.type;if(t&&("copy"===t||"edit"===t)){var e=JSON.parse(c()(this.messageInfo)),a=e.attachments?e.attachments.split(","):[];e.attachments=a.map(function(t){return{fileName:t.substr(t.lastIndexOf("/")+1),fileUrl:t}}),this.message=e,this.$refs.editor.setContent(e.content)}}},Gt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"edit-con"},[a("div",{staticClass:"message-edit"},[a("div",{staticClass:"part bh-mv-16"},[t._v("发布内容编辑")]),t._v(" "),a("Form",{ref:"form",attrs:{model:t.message,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"标题",prop:"title"}},[a("Input",{attrs:{placeholder:"消息标题"},model:{value:t.message.title,callback:function(e){t.$set(t.message,"title",e)},expression:"message.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:"内容",prop:"content"}},[a("editor",{ref:"editor",attrs:{value:t.message.content,"file-upload-url":t.uploadFile},on:{change:t.editorChange}})],1),t._v(" "),a("FormItem",{attrs:{label:"上传附件"}},[a("attachments",{model:{value:t.message.attachments,callback:function(e){t.$set(t.message,"attachments",e)},expression:"message.attachments"}}),t._v(" "),a("div",{staticClass:"attachments-desc bh-mt-4"},[t._v("附件类型只支持：压缩包、png、jpg、doc、excel、PDF格式\n单个文件大小不得超过10M，不得超过4个附件")])],1)],1),t._v(" "),a("div",{staticClass:"part bh-mv-16"},[t._v("发布样式编辑")]),t._v(" "),a("Form",{attrs:{model:t.message,"label-width":80}},[a("FormItem",{attrs:{label:"封面",prop:"img"}},[a("div",{staticClass:"options"},[a("upload-from-local",{staticClass:"option-item",attrs:{"file-upload-url":t.uploadFile},on:{"on-done":t.doneChooseImg}})],1),t._v(" "),a("div",{staticClass:"hint"},[t._v("\n                        大图片建议尺寸：900像素*500像素\n                    ")]),t._v(" "),a("div",{staticClass:"preview"},[a("img",{attrs:{src:t.message.img,alt:"",height:"100%"}})])]),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.next}},[t._v("下一步")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancel}},[t._v("取消")])],1)],1)],1),t._v(" "),a("div",{staticClass:"message-view"},[a("message-preview",{attrs:{info:t.cInfo}})],1)])},staticRenderFns:[]};var qt=a("VU/8")(Bt,Gt,!1,function(t){a("juFQ"),a("gNtL")},"data-v-da816d3c",null).exports,Ht=function t(e){e&&e.length>0&&e.forEach(function(e){e.checked=!1,t(e.children)})},Wt={data:function(){return{showTree:!0,groups:[]}},components:{},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{cGroups:function(){var t=[{title:"我的分组",expand:!0}];return t.children=this.groups,t}}),props:{initCheckedGroups:{type:Array,default:function(){return[]}}},methods:{checkChange:function(t){t.length>0&&"root"===t[0].id&&t.splice(0,1),this.$emit("checked-groups-changed",t)},selectNode:function(t){t.length<1||this.$emit("group-selected",t)},getGroups:function(){var t=this;u.httpGet(f.customGroup,{},u.handler.DATAS).then(function(e){if(e.title="我的分组",e.expand=!0,t.initCheckedGroups.length>0){var a=[];e.children.forEach(function(e){t.initCheckedGroups.some(function(t){return t.groupId===e.id})&&(e.checked=!0,a.push(e))}),t.$emit("checked-groups-changed",a)}t.groups=[e]})},deleteCheckedOrg:function(t){var e=function t(e,a){var s;return e&&e.length>0&&e.forEach(function(e){e.id===a?s=e:t(e.children,a)&&(s=t(e.children,a))}),s}(this.groups,t.id);e&&Ht([e])},deleteAllCheckedOrgs:function(){var t=this;Ht(this.groups),this.$emit("checked-groups-changed",[]),this.showTree=!1,this.$nextTick(function(){t.showTree=!0})}},mounted:function(){this.getGroups()}},Qt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"group-tree"},[e("Tree",{ref:"tree",attrs:{if:this.showTree,data:this.groups,"show-checkbox":""},on:{"on-check-change":this.checkChange,"on-select-change":this.selectNode}})],1)},staticRenderFns:[]};var Yt={data:function(){return{publishLoading:!1,groupName:"",bcs:[{path:"/home/group",name:"用户组管理"}],tab:"group",selectedOrgs:[],selectedGroups:[],selectedUsers:[],viewOrgs:!1}},components:{breadcrumb:I,orgTree:H,userTable:Y,customGroup:a("VU/8")(Wt,Qt,!1,function(t){a("JSRl")},"data-v-46dee656",null).exports,selectedPanel:it},computed:o()({},Vuex.mapState({index:function(t){return t.index}})),props:{messageInfo:{type:Object,default:function(){return{}}}},methods:{checkedOrgsChanged:function(t){this.selectedOrgs=t,this.$refs.usertable.freshState()},orgSelected:function(t){this.$refs.usertable.freshUserTable({type:"org",org:t[0]})},checkedGroupsChanged:function(t){this.selectedGroups=t,this.$refs.usertable.freshState()},groupSelected:function(t){this.$refs.usertable.freshUserTable({type:"group",group:t[0]})},usersChanged:function(t){this.selectedUsers=t},Publish:function(){var t=this.getTarget();t.groups.length<1&&t.users.length<1?this.$Message.error("请选择发送对象"):(this.publishLoading=!0,this.$emit("publish"))},Save:function(){this.$emit("save")},Prev:function(){this.$emit("prev")},Cancel:function(){sessionStorage.setItem("create-msg-type",""),this.$router.replace("/home/message")},deleteUser:function(t){this.$refs.usertable.deleteCheckedUser(t)},deleteOrg:function(t){var e;this.$refs.orgtree&&this.$refs.orgtree.deleteCheckedOrg(t),this.$refs.customgroup.deleteCheckedOrg(t),this.selectedGroups.forEach(function(a,s){t.id===a.id&&(e=s)}),this.selectedGroups.splice(e,1)},deleteAllCheckedUsers:function(){this.$refs.orgtree&&this.$refs.orgtree.deleteAllCheckedOrgs(),this.$refs.usertable.deleteAllCheckedUsers(),this.$refs.customgroup.deleteAllCheckedOrgs()},getTarget:function(){return{users:this.$refs.selectedpanel.GetSelectedUsers().map(function(t){return{userId:t.userId}}),groups:this.$refs.selectedpanel.GetSelectedOrgs().map(function(t){return{groupId:t.id,groupName:t.title,groupType:t.path.indexOf("老师TEACHER")>-1?2:t.path.indexOf("学生STUDENT")>-1||t.path.indexOf("新生NEW")>-1?1:0}})}},checkCanViewOrgs:function(){sessionStorage.getItem("canSeeOrgStructure")&&"true"===sessionStorage.getItem("canSeeOrgStructure")&&(this.viewOrgs=!0)}},mounted:function(){this.checkCanViewOrgs();var t=this.$route.params.type;if(t&&"edit"===t){var e=this.messageInfo.sendUsers;this.$refs.usertable.allCheckedUsers=e}}},Jt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-group-body"},[a("div",{staticClass:"panel-group"},[a("Tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("TabPane",{attrs:{label:"自定义分组",name:"group"}}),t._v(" "),t.viewOrgs?a("TabPane",{attrs:{label:"组织架构",name:"org"}}):t._e()],1),t._v(" "),t.viewOrgs?a("org-tree",{directives:[{name:"show",rawName:"v-show",value:"org"===t.tab,expression:"tab === 'org'"}],ref:"orgtree",staticClass:"user-body",attrs:{"init-checked-groups":t.messageInfo.sendUserGroups},on:{"checked-orgs-changed":t.checkedOrgsChanged,"org-selected":t.orgSelected}}):t._e(),t._v(" "),a("custom-group",{directives:[{name:"show",rawName:"v-show",value:"group"===t.tab,expression:"tab === 'group'"}],ref:"customgroup",staticClass:"user-body",attrs:{"init-checked-groups":t.messageInfo.sendUserGroups},on:{"checked-groups-changed":t.checkedGroupsChanged,"group-selected":t.groupSelected}})],1),t._v(" "),a("div",{staticClass:"panel-users"},[a("user-table",{ref:"usertable",attrs:{parent:"message","init-checked-users":t.messageInfo.sendUsers},on:{"selected-users-changed":t.usersChanged}})],1),t._v(" "),a("div",{staticClass:"panel-selected"},[a("selected-panel",{ref:"selectedpanel",attrs:{"selected-orgs":t.selectedOrgs,"selected-groups":t.selectedGroups,"selected-users":t.selectedUsers},on:{"delete-user":t.deleteUser,"delete-org":t.deleteOrg,"delete-all-users":t.deleteAllCheckedUsers}}),t._v(" "),a("div",{staticClass:"btn-add-con"},[a("Button",{attrs:{loading:t.publishLoading,type:"primary"},on:{click:t.Publish}},[t._v("发　布")]),t._v(" "),t.publishLoading?t._e():a("Button",{on:{click:t.Save}},[t._v("保存")]),t._v(" "),t.publishLoading?a("Button",{attrs:{disabled:""}},[t._v("保存")]):t._e(),t._v(" "),a("div",{staticClass:"bh-mt-8"},[t.publishLoading?t._e():a("Button",{on:{click:t.Prev}},[t._v("上一步")]),t._v(" "),t.publishLoading?t._e():a("Button",{on:{click:t.Cancel}},[t._v("取消")]),t._v(" "),t.publishLoading?a("Button",{attrs:{disabled:""}},[t._v("上一步")]):t._e(),t._v(" "),t.publishLoading?a("Button",{attrs:{disabled:""}},[t._v("取消")]):t._e()],1)],1)],1)])},staticRenderFns:[]};var Kt=a("VU/8")(Yt,Jt,!1,function(t){a("0rZK")},"data-v-79367559",null).exports,Xt=a("PJh5"),Zt=a.n(Xt),te={data:function(){return{sendLoading:!1,dataLoaded:!1,enableSmsNotify:!1,emptyUnread:!0,waitHour:12,options:{url:f.getReadList,queryParams:{name:"",status:"unread",msgId:this.msg.msgId}},statuses:[{id:"unread",name:"未读"},{id:"read",name:"已读"}],columns:[{type:"selection",width:60,align:"center"},{title:"学工号",key:"openId"},{title:"姓名",key:"userName"},{title:"性别",key:"gender",render:function(t,e){return t("div","MALE"===e.row.gender?"男":"女")}},{title:"类别",key:"userType",render:function(t,e){return t("div","TEACHER"===e.row.userType?"教师":"学生")}},{title:"班级/部门",key:"className",render:function(t,e){return t("div","TEACHER"===e.row.userType?e.row.departName:e.row.className)}}],msgInfo:{},media:{}}},components:{searchInput:U,UTable:O},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{cNotifyDisabled:function(){var t=this.msgInfo.lastNotifyTimeFmt?this.msgInfo.lastNotifyTimeFmt:this.msgInfo.cTime,e=Zt()(t,"YYYY-MM-DD HH:mm:ss");return e.add(this.waitHour,"hour"),!e.isBefore(new Date)},cCountTip:function(){var t=this.msgInfo.lastNotifyTimeFmt?this.msgInfo.lastNotifyTimeFmt:this.msgInfo.cTime,e=Zt()(t,"YYYY-MM-DD HH:mm:ss");e.add(this.waitHour,"hour");var a=Zt()(e.diff(new Date)).utcOffset(0);return(a.hour()>0?a.hour()+"时":"")+a.minute()+"分"},cStatus:function(){var t=$.extend(!0,[],this.statuses);return t[0].name=t[0].name+"("+(this.msgInfo.receiveCount-this.msgInfo.readCount)+")",t[1].name=t[1].name+"("+this.msgInfo.readCount+")",this.emptyUnread&&t.splice(0,1),t}}),props:{msg:{type:Object,default:{}},mediaId:{type:String,default:""}},created:function(){this.msgInfo=this.msg},methods:{Confirm:function(){if(this.media.smsRemain<this.msgInfo.receiveCount-this.msgInfo.readCount)this.$Modal.error({title:"错误",content:"对不起，您的剩余短息数量不够",okText:"知道了"});else{var t=this;this.$Modal.confirm({title:"确认发送短信？",content:"未读同学将收到短信消息，为避免提醒过于频繁，"+this.waitHour+"小时内仅可使用一次",okText:"确定",cancelText:"取消",onOk:function(){t.Notify()}})}},Notify:function(){var t=this;this.sendLoading=!0,u.httpPost(f.msgNotify+"/"+this.msg.msgId,{},u.handler.CODE).then(function(e){t.$Message.success("提醒成功")}).catch(function(e){t.$Message.error({content:"提醒失败"+e.message,duration:2.5})}).then(function(){t.sendLoading=!1,t.getMediaInfo(),t.getMsgInfo()})},previewMsg:function(){},search:function(){this.options.queryParams.name.indexOf("#")>-1?this.$Message.error("搜索内容不能包含“#”号"):this.$refs.table.reload(this.options.queryParams)},tableLoaded:function(t){0==this.dataLoaded&&(t.length<1?this.hideUnreadAndReload():this.emptyUnread=!1),this.dataLoaded=!0},hideUnreadAndReload:function(){this.emptyUnread=!0,this.options.queryParams.status="read",this.search()},getMediaInfo:function(){var t=this;u.httpGet(f.mediaInfo+"/"+this.mediaId,{},u.handler.DATAS).then(function(e){t.media=e,1==t.media.enableSmsNotification&&(t.enableSmsNotify=!0)}).catch(function(e){t.$Message.error("获取校园号信息失败："+e.errMsg)})},getMsgInfo:function(){var t=this;u.httpGet(f.msgView+"/"+this.msg.msgId,{},u.handler.DATAS).then(function(e){t.msgInfo=e}).catch(function(e){t.$Message.error("刷新消息失败："+e.errMsg)})},getWaitHour:function(){var t=this;u.httpGet(f.msgNotifyWaitHour,{},u.handler.DATAS).then(function(e){t.waitHour=e}).catch(function(e){t.$Message.error("获取等待时间异常："+e.errMsg)})}},mounted:function(){this.getMediaInfo(),this.getWaitHour()}},ee={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"btns-con"},[a("search-input",{staticStyle:{width:"320px"},attrs:{placeholder:"搜索学工号、姓名"},on:{search:t.search},model:{value:t.options.queryParams.name,callback:function(e){t.$set(t.options.queryParams,"name",e)},expression:"options.queryParams.name"}}),t._v(" "),t.enableSmsNotify&&!t.emptyUnread?a("div",{staticClass:"sms-con"},[a("div",[t.cNotifyDisabled?a("Button",{attrs:{disabled:"",type:"primary",icon:"android-notifications"}},[t._v("未读短信提醒("+t._s(t.cCountTip)+")")]):a("Button",{attrs:{loading:t.sendLoading,type:"primary",icon:"android-notifications"},on:{click:t.Confirm}},[t._v("未读短信提醒")])],1),t._v(" "),a("div",{staticClass:"sms-tip"},[a("Icon",{attrs:{type:"heart"}}),t._v("小提示：未读人员将收到短信消息，\n                "),a("Poptip",{attrs:{title:"短信内容预览",content:"同学你好，"+t.media.name+"给你发送了一条重要通知，快上今日校园App查看！",placement:"top"}},[a("a",[t._v("内容预览")])]),t._v("\n                 为避免提醒过于频繁，"+t._s(t.waitHour)+"小时内仅可使用一次"),a("br"),t._v("\n                剩余免费短信："+t._s(t.media.smsRemain)+" / "+t._s(t.media.smsTotal)+"条 想增量？您可以 "),a("span",[t._v("联系我们：025-68755378")])],1)]):t._e()],1),t._v(" "),a("Row",{staticClass:"bh-mv-16"},[a("span",[t._v("阅读状态：")]),t._v(" "),a("RadioGroup",{attrs:{type:"button",size:"small"},on:{"on-change":t.search},model:{value:t.options.queryParams.status,callback:function(e){t.$set(t.options.queryParams,"status",e)},expression:"options.queryParams.status"}},t._l(t.cStatus,function(e){return a("Radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"bh-mv-16"},[a("UTable",{ref:"table",attrs:{columns:t.columns,options:t.options},on:{"data-loaded":t.tableLoaded}})],1)],1)},staticRenderFns:[]};var ae={data:function(){return{msgId:"",sendSuccess:!0,modalQRCode:!1}},components:{messagePreview:Lt,attachments:Nt,ReadUserTable:a("VU/8")(te,ee,!1,function(t){a("8WD9")},"data-v-319f3c47",null).exports},computed:o()({},Vuex.mapState({index:function(t){return t.index}}),{cInfo:function(){return{pic:this.messageInfo.img,title:this.messageInfo.title}},cState:function(){if("SEND_IN"==this.messageInfo.status)return"发送中";var t=parseInt(100*this.messageInfo.readCount/this.messageInfo.receiveCount);return this.messageInfo.readCount+"/"+this.messageInfo.receiveCount+" "+t+"%"},cAttachments:function(){return(this.messageInfo.attachments?this.messageInfo.attachments.split(","):[]).map(function(t){return{fileName:t.substr(t.lastIndexOf("/")+1),fileUrl:t}})},cSendTime:function(){if(this.messageInfo.cTime)return this.messageInfo.cTime.substr(0,this.messageInfo.cTime.length-3)}}),props:{messageInfo:{type:Object,default:function(){return{}}}},methods:{previewMsg:function(t){var e=window.location.href,a=e.indexOf("#/"),s=e.substr(0,a)+"#/msgview/"+this.messageInfo.msgId;console.log("url:"+s),this.modalQRCode=!0,this.$nextTick(function(){$(".qrcode-con").empty(),$(".qrcode-con").qrcode({render:"canvas",text:s,width:300,height:300})})},modalOk:function(){this.modalQRCode=!1},toTable:function(){this.$router.push("/home/message")}},mounted:function(){}},se={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"result-con"},[a("div",{staticClass:"result"},[a("div",{staticClass:"message-content"},[a("div",[a("div",{staticClass:"bh-mv-16 msg-title-con"},[a("span",{staticClass:"msg-title",attrs:{title:t.messageInfo.title}},[t._v(t._s(t.messageInfo.title))]),a("a",{staticClass:"msg-btn-preview",on:{click:function(e){e.preventDefault(),t.previewMsg(e)}}},[t._v("预览正文")])])]),t._v(" "),a("Row",{staticClass:"bh-mv-16"},[a("Col",{attrs:{span:"8"}},[a("span",[t._v("发起人：")]),a("span",[t._v(t._s(t.messageInfo.cUserName))])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",[t._v("阅读进度：")]),t._v(" "),a("span",[t._v(t._s(t.cState))])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",[t._v("发送时间：")]),a("span",[t._v(t._s(t.cSendTime))])])],1)],1),t._v(" "),t.messageInfo.msgId?a("read-user-table",{attrs:{msg:t.messageInfo,"media-id":t.messageInfo.mediaId}}):t._e()],1),t._v(" "),a("Modal",{attrs:{title:"",width:"450"},on:{"on-ok":t.modalOk},model:{value:t.modalQRCode,callback:function(e){t.modalQRCode=e},expression:"modalQRCode"}},[a("div",{staticClass:"qrcode-container",staticStyle:{"text-align":"center",padding:"50px","background-color":"white"}},[a("div",{staticClass:"qrcode-con",staticStyle:{width:"300px",height:"300px",display:"inline-block"}})]),t._v(" "),a("div",{staticStyle:{"text-align":"center","font-size":"16px",color:"#000"}},[t._v("请使用今日校园扫码预览")])])],1)},staticRenderFns:[]};var ie={data:function(){return{step:0,tab:"custom",bcs:[{path:"/home/message",name:"消息送达"},{name:"发布消息"}],messageInfo:{},freshMessage:!1}},methods:{copyMessage:function(){this.$router.push("/home/publishmessage/copy/"+this.messageInfo.msgId),this.init(),this.step=0},newMessage:function(){this.$router.push("/home/publishmessage/new/n"),this.init(),this.step=0},toSelectUsers:function(){this.step=1},toEditMessage:function(){this.step=0},Publish:function(t){var e=this,a=this.$refs.selectuser.getTarget();if("1"===t&&a.groups.length<1&&a.users.length<1)this.$Message.error("请选择发送对象");else{var s=this.$refs.editmessage.getMessageContent(),i="";"edit"===this.$route.params.type&&(i=this.messageInfo.msgId);var n={title:s.title,content:s.content,attachments:s.attachments,img:"static/default-cover.png"===s.img?"https://img.cpdaily.com/cpdaily-media/default-cover.png":s.img,msgId:i,notSendUserIds:"",opType:t,originalLink:"",sendUserGroups:a.groups,sendUsers:a.users,summary:s.title,tenantId:""};u.httpPost(f.msgSaveAndSend,n,u.handler.DATAS).then(function(a){"new"!==e.$route.params.type&&"copy"!==e.$route.params.type||(e.messageInfo.msgId=a),"0"===t?(e.$Message.success("保存成功"),e.$router.replace("/home/message")):("/home/publishmessage/new/n"==e.$route.path||e.$route.path.indexOf("/publishmessage/copy/")>-1)&&e.getMessageInfo(e.messageInfo.msgId).then(function(){e.$router.replace("/home/publishmessage/view/"+a)})}).catch(function(a){var s="1"===t?"发布":"保存";e.$Message.error(s+"失败："+a.errMsg)})}},getMessageInfo:function(t){var e=this,a=t||this.$route.params.messageId;return u.httpGet(f.msgView+"/"+a,{},u.handler.DATAS).then(function(t){e.messageInfo=t}).catch(function(t){e.$Message.error("获取消息信息异常："+t.errMsg)})},init:function(){var t=this,e=this.$route.params.type,a=this.$route.params.messageId;"new"!==e?this.getMessageInfo(a).then(function(){"view"===e&&(t.step=2)}).then(function(){t.freshMessage=!1,t.$nextTick(function(){t.freshMessage=!0})}):(this.messageInfo={},this.freshMessage=!0)}},mounted:function(){this.init()},watch:{$route:function(){this.init()}},components:{breadcrumb:I,selectUser:Kt,editMessage:qt,sendResult2:a("VU/8")(ae,se,!1,function(t){a("xITB")},"data-v-d7bf7e04",null).exports}},ne={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("breadcrumb",{attrs:{items:t.bcs}}),t._v(" "),a("div",{staticClass:"body-con"},[a("div",{staticClass:"message-header bh-mb-8 bh-mt-4"},[a("div",{staticClass:"message-title bh-mt-8 bh-mb-16"},[t._v("发布消息")]),t._v(" "),a("Steps",{attrs:{current:t.step}},[a("Step",{attrs:{title:"消息配置",content:"填写消息发送内容"}}),t._v(" "),a("Step",{attrs:{title:"选择送达人员",content:"哪些人员将收到消息"}}),t._v(" "),a("Step",{attrs:{title:"已发送",content:"查看消息阅读进度"}})],1)],1),t._v(" "),t.freshMessage?a("div",{staticClass:"message-body"},[a("edit-message",{directives:[{name:"show",rawName:"v-show",value:0===t.step,expression:"step === 0"}],ref:"editmessage",attrs:{messageInfo:t.messageInfo},on:{next:t.toSelectUsers}}),t._v(" "),a("select-user",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],ref:"selectuser",attrs:{messageInfo:t.messageInfo},on:{publish:function(e){t.Publish("1")},save:function(e){t.Publish("0")},prev:t.toEditMessage}}),t._v(" "),a("send-result2",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}],ref:"sendresult",attrs:{messageInfo:t.messageInfo},on:{republish:t.Publish,"new-message":t.newMessage,"copy-message":t.copyMessage}})],1):a("div",{staticClass:"message-loading-con"},[a("Spin",{attrs:{size:"large"}})],1)])],1)},staticRenderFns:[]};var oe=a("VU/8")(ie,ne,!1,function(t){a("Xngw")},"data-v-f2a744ac",null).exports,re={data:function(){var t=this;return{isShowDelete:!1,deleteId:"",isShowCancel:!1,cancelId:"",isRecoverSign:!1,recoverId:"",isConfirmPause:!1,pauseWid:"",currentJoinActivityId:"",joinPeoPageNum:1,joinPeoPageSize:10,joinTotalSize:0,isJoinPeosShow:!1,modalQRCode:!1,downloadButtonShow:!1,bcs:[{name:"校园活动"}],name:"",pageSize:10,pageNumber:1,totalSize:0,screens:[{type:"",name:"全部"},{type:1,name:"报名未开始"},{type:2,name:"报名中"},{type:4,name:"报名结束"},{type:0,name:"草稿"}],publishStatus:"",joinPeosColumns:[{title:"姓名",key:"name"},{title:"性别",key:"sex",align:"center",width:80},{title:"学院",key:"college"},{title:"专业",key:"major"},{title:"是否已签到",key:"signInStatusStr",align:"center",width:100},{title:"签到时间",key:"signInTime"},{title:"手机号",key:"telnumber"},{title:"备注",key:"remark",width:100,ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.remark}},e.row.remark)}}],joinPeosDatas:[],activityListColumns:[{title:"活动名称",key:"name",width:120,ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.name}},e.row.name)}},{title:"状态",width:90,key:"publishStatusShow"},{title:"检票方式",key:"checkWay",align:"center",width:80},{title:"检票人",key:"tellers",align:"center",width:80,ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.tellers}},e.row.tellers)}},{title:"举办时间",key:"timeForShow",width:170},{title:"报名时间",key:"signTime",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.signTime}},e.row.signTime)}},{title:"举办地点",key:"address",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.address}},e.row.address)}},{title:"报名人数",key:"peopleNumber",align:"center",width:90,render:function(e,a){return e("div",{style:{"line-height":"20px"}},[e("span",{props:{},style:{"vertical-align":"middle"},on:{click:function(){}}},a.row.peopleNumber+"/"+(a.row.maxPeopleNumber?a.row.maxPeopleNumber:"~")),e("Button",{props:{type:"text",size:"small"},style:{padding:"0px",color:"#2D8CF0",width:"24px",height:"20px","margin-left":"2px",display:0===a.row.peopleNumber?"none":"inline-block"},on:{click:function(){t.showPeoModal(a.row)}}},"查看")])}},{title:"操作",key:"action",align:"center",width:138,render:function(e,a){return e("div",{style:{"line-height":"20px"}},[e("Button",{props:{type:"text",size:"small"},style:{padding:"0px",color:"#2D8CF0"},on:{click:function(){t.editActivity(a.row.wid)}}},"编辑"),e("span",{style:{color:"#2D8CF0","margin-left":"2px","margin-right":"2px"}},"|"),e("Poptip",{props:{placement:"top"},style:{},on:{click:function(){}}},[e("Button",{props:{type:"text",size:"small"},style:{padding:"0px",color:"#2D8CF0"},on:{click:function(){}}},"更多"),e("Icon",{props:{size:"16",type:"ios-arrow-down"},style:{color:"#2D8CF0","vertical-align":"middle","margin-left":"2px"},on:{click:function(){}}}),e("div",{slot:"content",style:{width:"66px",height:0===a.row.publishStatus||5===a.row.publishStatus?"96px":"122px"}},[e("Button",{props:{type:"text",size:"small"},style:{padding:"0px",color:"#2D8CF0",display:"block","margin-top":"4px"},on:{click:function(){t.viewActivity(a.row)}}},"预览"),e("Button",{props:{type:"text",size:"small"},style:{padding:"0px",color:"#2D8CF0",display:"block","margin-top":"4px"},on:{click:function(){t.downloadQRCode(a.row)}}},"下载签到码"),e("Button",{props:{type:"text",size:"small"},style:{display:2===a.row.publishStatus?"block":"none",padding:"0px",color:"#2D8CF0","margin-top":"4px"},on:{click:function(){t.isConfirmPause=!0,t.pauseWid=a.row.wid}}},"暂停报名"),e("Button",{props:{type:"text",size:"small"},style:{display:3===a.row.publishStatus?"block":"none",padding:"0px",color:"#2D8CF0","margin-top":"4px"},on:{click:function(){t.recoverSign(a.row)}}},"恢复报名"),e("Button",{props:{type:"text",size:"small"},style:{padding:"0px",color:"#2D8CF0",display:"block","margin-top":"4px"},on:{click:function(){0===a.row.publishStatus?(t.isShowDelete=!0,t.deleteId=a.row.wid):(t.isShowCancel=!0,t.cancelId=a.row.wid)}}},0===a.row.publishStatus?"删除":"取消发布"),e("Button",{props:{type:"text",size:"small"},style:{padding:"0px",color:"#2D8CF0",display:"block","margin-top":"4px"},on:{click:function(){t.exportPeople(a.row.wid)}}},"导出名单")])])])}}],activityListData:[]}},methods:{showPeoModal:function(t){this.isJoinPeosShow=!0,this.currentJoinActivityId=t.wid,this.joinPeosDatas=[],this.getJoinPeoples()},modalOk:function(){this.modalQRCode=!1},clickType:function(t){this.publishStatus=t,this.pageNumber=1,this.queryActivities()},queryActivities:function(){var t,e=this,a={name:this.name,startTime:"",endTime:"",publishStatus:this.publishStatus,pageSize:this.pageSize,pageNumber:this.pageNumber};(t=a,u.httpPost(f.QUERY_ACTIVITIES,t,u.handler.ROWS)).then(function(t){for(var a=0;a<t.length;a++)t[a].timeForShow=t[a].time[0],2===t[a].publishStatus?(t[a].publishStatusShow="报名中",t[a].cellClassName={publishStatusShow:"activity-status-green"}):1===t[a].publishStatus?(t[a].publishStatusShow="报名未开始",t[a].cellClassName={publishStatusShow:"activity-status-blue"}):3===t[a].publishStatus?t[a].publishStatusShow="暂停报名":4===t[a].publishStatus?t[a].publishStatusShow="报名结束":0===t[a].publishStatus&&(t[a].publishStatusShow="草稿");return e.activityListData=t,console.log(e.activityListData),t})},onJoinPeosPageSizeChange:function(t){console.log(t),this.joinPeoPageSize=t,this.joinPeoPageNum=1,this.getJoinPeoples()},onJoinPeosChange:function(t){this.joinPeoPageNum=t,this.getJoinPeoples()},onPageSizeChange:function(t){this.pageSize=t,this.pageNumber=1,this.queryActivities()},onChange:function(t){this.pageNumber=t,this.queryActivities()},addActivity:function(){sessionStorage.setItem("mode",""),this.$router.push("/home/addnewactivity")},cancelActivity:function(){var t=this;u.httpPost(f.CANCEL_ACTIVITY+"?wid="+this.cancelId,{},u.handler.CODE).then(function(){t.isShowCancel=!1,t.$Message.success("取消成功"),t.queryActivities()}).catch(function(e){t.$Message.error("异常："+e.message)})},pauseActivity:function(){var t=this;u.httpPost(f.PAUSE_ACTIVITY+"?wid="+this.pauseWid,{},u.handler.CODE).then(function(){t.isConfirmPause=!1,t.$Message.success("暂停成功"),t.queryActivities()}).catch(function(e){t.isConfirmPause=!1,t.$Message.error("异常："+e.message)})},recoverSign:function(t){var e=this;u.httpPost(f.RECOVER_SIGN+"?wid="+t.wid,{},u.handler.CODE).then(function(){e.$Message.success("恢复成功"),e.queryActivities()}).catch(function(a){"-5"===a.code||-5===a.code?(e.recoverId=t.wid,e.isRecoverSign=!0):e.$Message.error("异常："+a.message)})},delActivity:function(){var t=this;u.httpPost(f.DEL_ACTIVITY+"?wid="+this.deleteId,{},u.handler.CODE).then(function(e){t.isShowDelete=!1,t.$Message.success("删除成功"),t.queryActivities()}).catch(function(e){t.$Message.error("异常："+e.message)})},recoverSignEdit:function(){this.recoverId&&this.editActivity(this.recoverId)},editActivity:function(t){var e=this;u.httpPost(f.validActivityDoing+"?wid="+t,{},u.handler.CODE).then(function(a){a.datas?e.$Message.error("异常：活动正在进行中"):(sessionStorage.setItem("edit-activity-id",t),sessionStorage.setItem("mode","edit"),e.$router.push("/home/addnewactivity"))}).catch(function(t){e.$Message.error("异常："+t.message)})},viewActivity:function(t){this.downloadButtonShow=!1,this.modalQRCode=!0,this.$nextTick(function(){$(".qrcode-con").empty(),$(".qrcode-con").qrcode({render:"canvas",text:t.qrCodeUrl,width:300,height:300})})},downloadQRCode:function(t){this.downloadButtonShow=!0,this.modalQRCode=!0,this.$nextTick(function(){$(".qrcode-con").empty(),$(".qrcode-con").qrcode({render:"canvas",text:t.signInUrl,width:300,height:300})})},downloadQRCodeImage:function(){domtoimage.toJpeg($(".qrcode-container").get(0),{quality:1}).then(function(t){var e=document.createElement("a");e.download="签到码.jpeg",e.href=t,e.click()})},exportPeople:function(t){window.open(f.exportExcel+"?wid="+t)},getJoinPeoples:function(){var t=this;u.httpPost(f.GET_JOIN_PEOPLES,{activityId:this.currentJoinActivityId,pageSize:this.joinPeoPageSize,pageNumber:this.joinPeoPageNum},u.handler.DATAS).then(function(e){t.joinTotalSize=e.totalSize;for(var a=e.rows,s=0;s<a.length;s++)a[s].signInStatusStr=a[s].signInStatus?"是":"否",a[s].signInTime||(a[s].signInTime="/"),a[s].major||(a[s].major="/");t.joinPeosDatas=a}).catch(function(e){t.$Message.error("异常："+e.message)})}},mounted:function(){this.queryActivities()},components:{breadcrumb:I}},ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-list"},[a("breadcrumb",{attrs:{items:t.bcs}}),t._v(" "),a("div",{staticClass:"content"},[a("p",{staticClass:"title"},[t._v("校园活动")]),t._v(" "),a("div",{staticClass:"search-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"search-content",attrs:{type:"text",placeholder:"请输入活动名称"},domProps:{value:t.name},on:{keyup:function(e){if(!("button"in e)&&13!==e.keyCode)return null;t.queryActivities(e)},input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),a("Icon",{staticClass:"search-icon",attrs:{type:"ios-search-strong",size:"22"}}),t._v(" "),a("Button",{staticClass:"search-btn",staticStyle:{background:"#2D8CF0","border-radius":"0 4px 4px 0"},attrs:{slot:"append",type:"primary"},on:{click:t.queryActivities},slot:"append"},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"screen"},[a("ul",[t._m(0),t._v(" "),t._l(t.screens,function(e,s){return a("li",{key:s,class:e.type===t.publishStatus?"screen-selected":"",on:{click:function(a){t.clickType(e.type)}}},[a("span",[t._v(t._s(e.name))])])})],2)]),t._v(" "),a("div",[a("Button",{staticClass:"add-new-btn",attrs:{type:"primary"},on:{click:t.addActivity}},[t._v("新建活动")])],1),t._v(" "),a("div",{staticClass:"activity-data-list"},[a("Table",{attrs:{border:"",columns:t.activityListColumns,data:t.activityListData}})],1),t._v(" "),a("div",{staticClass:"bottom-page"},[a("Page",{attrs:{total:t.totalSize,current:t.pageNumber,"show-elevator":"","show-sizer":"",placement:"top"},on:{"on-page-size-change":t.onPageSizeChange,"on-change":t.onChange}})],1)]),t._v(" "),a("Modal",{attrs:{title:"",width:"450"},on:{"on-ok":t.modalOk},model:{value:t.modalQRCode,callback:function(e){t.modalQRCode=e},expression:"modalQRCode"}},[a("div",{staticClass:"qrcode-container",staticStyle:{"text-align":"center",padding:"50px","background-color":"white"}},[a("div",{staticClass:"qrcode-con",staticStyle:{width:"300px",height:"300px",display:"inline-block"}})]),t._v(" "),t.downloadButtonShow?a("div",{staticStyle:{"text-align":"center"}},[a("a",{on:{click:function(e){e.preventDefault(),t.downloadQRCodeImage(e)}}},[t._v("下载签到码")])]):t._e()]),t._v(" "),a("Modal",{attrs:{width:"900"},model:{value:t.isJoinPeosShow,callback:function(e){t.isJoinPeosShow=e},expression:"isJoinPeosShow"}},[a("p",{staticStyle:{color:"#000","text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("查看报名者信息")])]),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.exportPeople(t.currentJoinActivityId)}}},[t._v("导出名单")])],1),t._v(" "),a("div",{staticClass:"people-data-list"},[a("Table",{attrs:{border:"",columns:t.joinPeosColumns,data:t.joinPeosDatas}})],1),t._v(" "),a("div",{staticClass:"people-bottom-page"},[a("Page",{attrs:{total:t.joinTotalSize,current:t.joinPeoPageNum,"show-elevator":"","show-sizer":"",placement:"top"},on:{"on-page-size-change":t.onJoinPeosPageSizeChange,"on-change":t.onJoinPeosChange}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})]),t._v(" "),a("Modal",{attrs:{width:"347",styles:{top:"258px"}},model:{value:t.isConfirmPause,callback:function(e){t.isConfirmPause=e},expression:"isConfirmPause"}},[a("p",{staticStyle:{color:"#1C2438","text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-weight":"500"}},[t._v("确认暂停")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center",color:"#495060","font-size":"12px","line-height":"16px","vertical-align":"middle"}},[a("Icon",{staticStyle:{"line-height":"30px","font-size":"30px","margin-right":"10px",color:"#FF9901","vertical-align":"top"},attrs:{type:"information-circled"}}),t._v(" "),a("p",{staticStyle:{display:"inline-block",width:"260px","text-align":"left","line-height":"30px"}},[t._v("暂停后活动将停止报名，确定暂停吗？")])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.isConfirmPause=!1}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.pauseActivity}},[t._v("确定")])],1)]),t._v(" "),a("Modal",{attrs:{width:"347",styles:{top:"258px"}},model:{value:t.isRecoverSign,callback:function(e){t.isRecoverSign=e},expression:"isRecoverSign"}},[a("p",{staticStyle:{color:"#1C2438","text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-weight":"500"}},[t._v("确认编辑")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center",color:"#495060","font-size":"12px","line-height":"16px","vertical-align":"middle"}},[a("Icon",{staticStyle:{"line-height":"30px","font-size":"30px","margin-right":"10px",color:"#FF9901","vertical-align":"top"},attrs:{type:"information-circled"}}),t._v(" "),a("p",{staticStyle:{display:"inline-block",width:"260px","text-align":"left","line-height":"30px"}},[t._v("报名已结束，请重新编辑活动")])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.isRecoverSign=!1}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.recoverSignEdit}},[t._v("去编辑")])],1)]),t._v(" "),a("Modal",{attrs:{width:"347",styles:{top:"258px"}},model:{value:t.isShowCancel,callback:function(e){t.isShowCancel=e},expression:"isShowCancel"}},[a("p",{staticStyle:{color:"#1C2438","text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-weight":"500"}},[t._v("确认取消")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center",color:"#495060","font-size":"12px","line-height":"16px","vertical-align":"middle"}},[a("Icon",{staticStyle:{"line-height":"30px","font-size":"30px","margin-right":"10px",color:"#FF9901","vertical-align":"top"},attrs:{type:"information-circled"}}),t._v(" "),a("p",{staticStyle:{display:"inline-block",width:"260px","text-align":"left","line-height":"17px"}},[t._v("取消活动后将自动为成功报名的用户取消报名，并通知活动已取消，确定要取消吗？")])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.isShowCancel=!1}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.cancelActivity}},[t._v("确定")])],1)]),t._v(" "),a("Modal",{attrs:{width:"347",styles:{top:"258px"}},model:{value:t.isShowDelete,callback:function(e){t.isShowDelete=e},expression:"isShowDelete"}},[a("p",{staticStyle:{color:"#1C2438","text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-weight":"500"}},[t._v("确认删除")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center",color:"#495060","font-size":"12px","line-height":"16px","vertical-align":"middle"}},[a("Icon",{staticStyle:{"line-height":"30px","font-size":"30px","margin-right":"10px",color:"#FF9901","vertical-align":"top"},attrs:{type:"information-circled"}}),t._v(" "),a("p",{staticStyle:{display:"inline-block",width:"260px","text-align":"left","line-height":"30px"}},[t._v("确认删除活？确认之后活动将被删除")])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.isShowDelete=!1}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.delActivity}},[t._v("确定")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticStyle:{padding:"0px",cursor:"default"}},[e("span",{staticStyle:{"font-size":"12px",color:"#747986","letter-spacing":"0"}},[this._v("筛选:")])])}]};var le=a("VU/8")(re,ce,!1,function(t){a("W0Sh"),a("jvAv")},"data-v-4f2c7388",null).exports,de=a("woOf"),ue=a.n(de),pe={totalRoot:"datas>totalSize",pageSizeRoot:"datas>pageSize",pageNumberRoot:"datas>pageNumber",root:"datas>rows"};function me(t,e){var a=t;return e.split(">").forEach(function(t){if(!a[t])return!1;a=a[t]}),a}function he(t){var e=t.split(">");return 0==t.length?t:e[e.length-1]}var fe=function(t){var e=he((t=ue()({},pe,t)).pageSizeRoot),a=he(t.pageNumberRoot);this.load=function(s,i,n){var o={};return o[e]=s,o[a]=i,u.httpPost(t.url,ue()(o,n)).then(function(e){return{total:me(e,t.totalRoot),list:me(e,t.root),pageSize:me(e,t.pageSizeRoot),pageNumber:me(e,t.pageNumberRoot),original:e}}).catch(function(t){return console.error("请求返回异常："),console.error(t),{}})}},ge={mock:{},props:{manualLoadData:{type:Boolean,default:!1},url:String,params:{type:Object,default:function(){return{}}},listData:{type:Array,default:function(){return[]}},pageable:{type:Boolean,default:!0},showSizer:{type:Boolean,default:!0},pageSizeOpts:{type:Boolean},showElevator:{type:Boolean,default:!0},simple:{type:Boolean,default:!0},showTotal:{type:Boolean,default:!0},listHeight:{type:String,default:"auto"},isEmpty:{twoWay:!0,type:Boolean,default:!1},pageableSetting:{type:Object,default:function(){return{}}}},computed:{listStyles:function(){return 0!=this.listData.length||this.isLoading||1!==this.pageNumber?{height:this.listHeight}:void 0}},created:function(){this.dataAdapter=new fe({url:this.url,totalRoot:this.pageableSetting.totalRoot||"datas>totalSize",pageSizeRoot:this.pageableSetting.pageSizeRoot||"datas>pageSize",pageNumberRoot:this.pageableSetting.pageNumberRoot||"datas>pageNumber",root:this.pageableSetting.root||"datas>rows"})},data:function(){return{total:0,pageSize:10,pageNumber:1,isLoading:!0}},ready:function(){this.$emit("on-ready"),this.url&&!0!==this.manualLoadData&&this._reload()},methods:{_reload:function(){var t=this;this.isLoading=!0,this.dataAdapter.load(this.pageSize,this.pageNumber,this.params).then(function(e){t.isLoading=!1,t.total=e.total,t.$emit("on-after-ajax",e.list)})},reload:function(){this._reload()},reloadFirstPage:function(){this.pageNumber=1,this.reload()},onChange:function(t){this.pageNumber=t,this.$emit("on-page-change"),this.url&&this._reload()},onPageSizeChange:function(t){this.$emit("on-page-size-change"),this.pageSize=t,this.url&&this._reload()},resetIsEmpty:function(){0!=this.listData.length||this.isLoading||1!==this.pageNumber?this.isEmpty=!1:this.isEmpty=!0}}};var ve={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{style:t.listStyles},[t._t("default")],2),t._v(" "),0!=t.listData.length||t.isLoading||1!==t.pageNumber?a("div",[!1!==t.pageable?a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.total,current:t.pageNumber,"show-sizer":!1!==t.showSizer,"page-size":t.pageSize,"page-size-opts":t.pageSizeOpts||[10,20,30,40],"show-elevator":!1!==t.showElevator,"show-total":!1!==t.showTotal,simple:t.simple},on:{"on-change":t.onChange,"on-page-size-change":t.onPageSizeChange}})],1)]):t._e()]):t._t("empty")],2)},staticRenderFns:[]},ye=a("VU/8")(ge,ve,!1,null,null,null).exports,_e={props:{url:String,selectedList:{type:Array,default:function(){return[]}},keys:{type:String,default:"id"},placeholder:{type:String,default:"请输入关键字"},searchKey:{type:String,default:"content"},params:{type:Object,default:function(){return{}}},renderRight:{type:Function},renderLeft:{type:Function},pageableSetting:{type:Object,default:function(){return{}}},maxSelectNum:{type:Number,default:0}},data:function(){return{listData:[],keyword:"",listEmpty:!1}},computed:{selectAllStatus:function(){var t=!0;return this.listData.forEach(function(e){e._selected||(t=!1)}),t},requestParams:function(){var t={};return t[this.searchKey]=this.keyword,t=ue()({},this.params,t)}},methods:{afterAjax:function(t){var e=this;t&&(t.forEach(function(t){t._selected=!1,e._findRightRowById(t[e.keys])&&(t._selected=!0)}),this.listData=t)},realRenderRight:function(t){return this.renderRight(t)},realRenderLeft:function(t){return this.renderLeft(t)},search:function(){this.$refs.pageableList.reloadFirstPage()},del:function(t){this._deleteRightRowById(t);var e=this._findLeftRowById(t);e&&(e._selected=!1)},change:function(t){t._selected?this.selectedList.push(t):this._deleteRightRowById(t[this.keys])},getSelected:function(){return this.selectedList},selectAll:function(t){var e=this;this.listData.forEach(function(a){var s;a._selected=t,e.selectedList.forEach(function(t,i){a[e.keys]==t[e.keys]&&(s=i)}),t&&-1==s&&e.selectedList.push(a),!t&&s>=0&&e.selectedList.splice(s,1)})},_findLeftRowById:function(t){var e=this;return this.listData.filter(function(a){return a[e.keys]==t})[0]},_findRightRowById:function(t){var e=this;return this.selectedList.find(function(a){return a[e.keys]==t})},_deleteRightRowById:function(t){var e,a=this;this.selectedList.forEach(function(s,i){s[a.keys]==t&&(e=i)}),this.selectedList.splice(e,1)}},components:{pageableList:ye},mounted:function(){this.search()}},be={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"left-container"},[a("div",{staticClass:"search-wrap"},[a("i-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder},on:{"on-enter":t.search},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("pageable-list",{ref:"pageableList",attrs:{url:t.url,"list-data":t.listData,params:t.requestParams,"list-height":"220px","pageable-setting":t.pageableSetting,"is-empty":t.listEmpty},on:{"update:isEmpty":function(e){t.listEmpty=e},"on-after-ajax":t.afterAjax}},[t._l(t.listData,function(e){return a("div",{staticClass:"left-item"},[a("Checkbox",{attrs:{disabled:0!==t.maxSelectNum&&t.selectedList.length>=t.maxSelectNum},on:{"on-change":function(a){t.change(e)}},model:{value:e._selected,callback:function(a){t.$set(e,"_selected",a)},expression:"item._selected"}}),t._v(" "),a("div",{staticClass:"item-label",domProps:{innerHTML:t._s(t.realRenderLeft(e))}})],1)}),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"32px"},attrs:{slot:"empty"},slot:"empty"},[t._v("\n        暂无数据\n      ")])],2)],1),t._v(" "),a("div",{staticClass:"right-container"},[a("div",{staticClass:"selected-tip"},[t._v("已选中"+t._s(t.selectedList.length))]),t._v(" "),a("div",{staticClass:"right-selected-wrap"},t._l(t.selectedList,function(e){return a("div",{staticClass:"selected-item"},[a("span",{domProps:{innerHTML:t._s(t.realRenderRight(e))}}),t._v(" "),a("span",{staticClass:"delete",on:{click:function(a){t.del(e[t.keys])}}},[t._v("删除")])])}))])])},staticRenderFns:[]};var Ce=a("VU/8")(_e,be,!1,function(t){a("iITt"),a("YsRh")},"data-v-40bde181",null).exports,we={data:function(){return{uploadFileUrl:f.convertBase64Activity,fileName:"",cropperOpt:{loading:!0,visible:!1,img:"",autoCrop:!0,autoCropWidth:670,autoCropHeight:330,fixedNumber:[67,33],fixed:!0,fixedBox:!1}}},components:{cropper:Dt},props:{uploadFileBase64Url:{type:String,default:""}},methods:{beforeUpload:function(t){this.fileName=t.fileName;var e=new FileReader,a=this;return e.onload=function(t){a.cropperOpt.img=t.currentTarget.result,a.cropperOpt.visible=!0},e.readAsDataURL(t),!1},onSuccess:function(){},onError:function(){},onFormatError:function(){this.$Message.error("暂不支持该格式")},onExceededSize:function(){this.$Message.error("图片大小不得超过3M")},clipOk:function(){var t=this,e=this;this.$refs.cropper.getCropData(function(a){u.httpPost(t.uploadFileBase64Url||f.convertBase64Activity,{name:e.fileName,data:a}).then(function(t){e.$emit("on-done",t.datas.fileUrl),e.cropperOpt.visible=!1})})}}},Se={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Upload",{staticStyle:{width:"358px"},attrs:{action:t.uploadFileUrl,"with-credentials":"","max-size":3072,"before-upload":t.beforeUpload,"on-success":t.onSuccess,"on-error":t.onError,"on-format-error":t.onFormatError,"on-exceeded-size":t.onExceededSize,format:["jpg","jpeg","png"],accept:".jpg, .jpeg, .png"}},[a("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("本地上传")]),t._v(" "),a("p",{staticStyle:{"font-size":"12px",color:"#C1CBD7","letter-spacing":"0","line-height":"14px","margin-top":"8px"}},[t._v("请上传jpg、png、gif格式文件建议尺寸670*330px，大小不超过10M")])],1),t._v(" "),a("Modal",{attrs:{title:"裁剪图片",loading:t.cropperOpt.loading,width:705},on:{"on-ok":t.clipOk},model:{value:t.cropperOpt.visible,callback:function(e){t.$set(t.cropperOpt,"visible",e)},expression:"cropperOpt.visible"}},[t.cropperOpt.visible?a("cropper",{ref:"cropper",attrs:{option:t.cropperOpt}}):t._e()],1)],1)},staticRenderFns:[]},ke=a("VU/8")(we,Se,!1,null,null,null).exports,xe={data:function(){var t,e=this;return{ifChoose:!0,userOpt:{url:f.allUsers,params:{},pageableSetting:{totalRoot:"datas>totalSize",pageSizeRoot:"datas>pageSize",pageNumberRoot:"datas>pageNumber",root:"datas>rows"}},bcs:[{path:"/home/activitylist",name:"校园活动"},{name:"新建活动"}],uploadFile:f.uploadFileActivity,circles:[],tempTellers:[],formValidate:{name:"",address:"",host:"",peopleNumber:"",signStartTime:"",signEndTime:"",introduction:"",checkWay:0,is_send:0,circleId:"",posterType:1,poster:"",labels:"",activityStartTime:"",activityEndTime:"",tellers:[],hasTelnumber:!1,hasRemark:!1,remark:""},ruleValidate:{name:[{required:!0,validator:function(t,a,s){e.formValidate.name&&""!==$.trim(e.formValidate.name)?e.formValidate.name.length>100?s([new Error("活动主题超过100字")]):s([]):s([new Error("活动主题不能为空")])},trigger:"blur"}],time:[{required:!0,validator:function(t,a,s){if(e.formValidate.activityStartTime&&e.formValidate.activityEndTime){var i=e.formValidate.activityStartTime+":00",n=e.formValidate.activityEndTime+":00",o=new Date(i),r=new Date(n);if(new Date>o)return void s([new Error("活动举办时间要晚于当前时间")]);if(o>r)return void s([new Error("活动举办开始时间早于举办结束时间")]);s([])}else s([new Error("请设置举办时间")])},trigger:"blur"}],address:[{required:!0,validator:function(t,a,s){e.formValidate.address&&""!==$.trim(e.formValidate.address)?e.formValidate.address.length>100?s([new Error("举办地点超过100字")]):s([]):s([new Error("举办地点不能为空")])},trigger:"blur"}],remark:[{validator:function(t,a,s){e.formValidate.remark&&""!==$.trim(e.formValidate.remark)&&e.formValidate.remark.length>100?s([new Error("备注说明超过100字")]):s([])},trigger:"blur"}],host:[{required:!0,validator:function(t,a,s){e.formValidate.host&&""!==$.trim(e.formValidate.host)?s([]):s([new Error("举办方不能为空")])},trigger:"blur"}],signTime:[{required:!0,validator:function(t,a,s){if(e.formValidate.signStartTime&&e.formValidate.signEndTime){if(!e.formValidate.activityStartTime||!e.formValidate.activityEndTime)return void s([new Error("请先设置举办时间")]);var i=new Date(e.formValidate.signStartTime),n=new Date(e.formValidate.signEndTime),o=e.formValidate.activityStartTime+":00";if(i>new Date(o))return void s([new Error("报名开始时间要早于活动举办开始时间")]);if(i>n)return void s([new Error("报名开始时间要早于报名结束时间")]);s([])}else s([new Error("请设置报名时间")])},trigger:"blur"}],introduction:[{required:!0,validator:(t="介绍不能为空",function(e,a,s){var i=[];a.replace(/<[^img|>]+>/g,"").trim()||i.push(new Error(t)),s(i)})}],peopleNumber:[{validator:function(t,a,s){e.formValidate.peopleNumber<0||e.formValidate.peopleNumber>9999999?s([new Error("请输入正确的人数限制")]):s([])},trigger:"blur"}],checkWay:[{validator:function(t,a,s){2===e.formValidate.checkWay&&0===e.formValidate.tellers.length?s([new Error("请添加检票人")]):s([])},trigger:"blur"}],is_send:[{required:!0,validator:function(t,a,s){1!==e.formValidate.is_send||e.formValidate.circleId?s([]):s([new Error("请选择同学圈")])},trigger:"blur"}],banner:[{required:!0,validator:function(t,a,s){e.formValidate.poster?s([]):s([new Error("请上传海报")])},trigger:"blur"}]},modalCheckMan:!1,wid:""}},methods:{posterUploaded:function(t){this.formValidate.poster=t},editorChange:function(t){this.formValidate.introduction=t,this.$refs.formValidate.validateField("introduction")},handleSubmit:function(){this.Publish("1")},handleCancel:function(){sessionStorage.setItem("activity-mode",""),this.$router.push("/home/activitylist")},Publish:function(t){var e=this;this.$refs.formValidate.validate(function(a){if(a){console.log(e.formValidate.activityStartTime),console.log(e.formValidate.activityEndTime),console.log(e.formValidate.signStartTime),console.log(e.formValidate.signEndTime);var s={wid:e.formValidate.wid,name:$.trim(e.formValidate.name),address:$.trim(e.formValidate.address),host:$.trim(e.formValidate.host),peopleNumber:e.formValidate.peopleNumber,posterType:e.formValidate.posterType,poster:e.formValidate.poster,introduction:e.formValidate.introduction,labels:e.formValidate.labels,activityStartTime:e.formValidate.activityStartTime,activityEndTime:e.formValidate.activityEndTime,signStartTime:e.formValidate.signStartTime,signEndTime:e.formValidate.signEndTime,publishType:t,checkWay:e.formValidate.checkWay,isSend:e.formValidate.is_send,tellers:e.formValidate.tellers,circleId:0===e.formValidate.is_send?"":e.formValidate.circleId,hasTelnumber:e.formValidate.hasTelnumber?1:0,hasRemark:e.formValidate.hasRemark?1:0,remark:e.formValidate.remark};console.log(s);var i="edit"===sessionStorage.getItem("mode")?"保存":"添加";"edit"===sessionStorage.getItem("mode")?(n=s,u.httpPost(f.editActivity,n,u.handler.CODE)).then(function(){e.$Message.success(i+"成功！"),e.$router.go(-1)}).catch(function(t){e.$Message.error(i+"失败："+t.message)}):function(t){return u.httpPost(f.ADD_ACTIVITY,t)}(s).then(function(){e.$Message.success(i+"成功！"),e.$router.go(-1)}).catch(function(t){e.$Message.error(i+"失败："+t.message)})}var n})},delBanner:function(){this.formValidate.poster=""},handleSave:function(){this.Publish("0")},activityStartTimeChange:function(t){this.formValidate.activityStartTime=t},activityEndTimeChange:function(t){this.formValidate.activityEndTime=t},signStartTimeChange:function(t){this.formValidate.signStartTime=t},signEndTimeChange:function(t){this.formValidate.signEndTime=t},removeCheckMan:function(t){this.formValidate.tellers.splice(t,1)},addCheckMan:function(){var t=this;this.tempTellers=[],this.tempTellers=this.tempTellers.concat(this.formValidate.tellers),this.ifChoose=!1,this.$nextTick(function(){t.modalCheckMan=!0,t.ifChoose=!0})},addCheckManOk:function(){this.formValidate.tellers=[],this.formValidate.tellers=this.formValidate.tellers.concat(this.tempTellers)},cancelCheckMan:function(){this.modalCheckMan=!1},renderLeft:function(t){return"<span>"+t.userName+"</span>"},renderRight:function(t){return"<span>"+t.userName+"</span>"},getAllCircles:function(){var t=this;u.httpGet(f.allCircles,u.handler.CODE).then(function(e){console.log(e),e&&"0"===e.code&&(t.circles=e.datas)}).catch(function(t){})},openYiban:function(){window.open("https://q.yiban.cn")}},mounted:function(){var t=this;this.getAllCircles();var e=sessionStorage.getItem("mode"),a=sessionStorage.getItem("edit-activity-id");console.log("mode=>"+e),console.log("wid=>"+a),"edit"===e&&a&&(this.bcs=[{path:"/home/activitylist",name:"校园活动"},{path:"/home/addnewactivity",name:"编辑活动"}],this.wid=a,u.httpPost(f.viewActivity+"?wid="+this.wid,{},u.handler.DATAS).then(function(e){e.tellers||(e.tellers=[]),t.formValidate.wid=e.wid,t.formValidate.name=e.name,t.formValidate.address=e.address,t.formValidate.host=e.host,t.formValidate.peopleNumber=e.peopleNumber,t.formValidate.posterType=e.posterType,t.formValidate.poster=e.poster,t.formValidate.introduction=e.introduction,t.formValidate.labels=e.labels,t.formValidate.activityStartTime=e.activityStartTime,t.formValidate.activityEndTime=e.activityEndTime,t.formValidate.signStartTime=e.signStartTime,t.formValidate.signEndTime=e.signEndTime,t.formValidate.checkWay=e.checkWay,t.formValidate.is_send=e.isSend,t.formValidate.tellers=e.tellers,t.formValidate.circleId=e.circleId,t.formValidate.hasTelnumber=1===e.hasTelnumber,t.formValidate.hasRemark=1===e.hasRemark,t.formValidate.remark=e.remark,t.formValidate.publishStatus=e.publishStatus,t.$refs.editor.setContent(e.introduction)}).catch(function(e){t.$Message.error("异常："+e.message)}))},components:{breadcrumb:I,choose:Ce,editor:It,posterUploader:ke}},Ie={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-new-activity"},[a("breadcrumb",{attrs:{items:t.bcs}}),t._v(" "),a("div",{staticClass:"content"},[a("Form",{ref:"formValidate",staticClass:"add-form",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("p",{staticClass:"title"},[t._v("新建活动")]),t._v(" "),a("FormItem",{attrs:{label:"活动主题",prop:"name","label-for":"name"}},[a("i-input",{attrs:{placeholder:"不超过100字","element-id":"name",maxlength:100},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"举办时间",prop:"time"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"activityStartTime"}},[a("DatePicker",{staticStyle:{width:"231px"},attrs:{type:"datetime",placeholder:"选择开始时间",format:"yyyy-MM-dd HH:mm",value:t.formValidate.activityStartTime},on:{"on-change":t.activityStartTimeChange}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[t._v("-")]),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"activityEndTime"}},[a("DatePicker",{staticStyle:{width:"231px"},attrs:{type:"datetime",placeholder:"选择结束时间",format:"yyyy-MM-dd HH:mm",value:t.formValidate.activityEndTime},on:{"on-change":t.activityEndTimeChange}})],1)],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"举办地点",prop:"address","label-for":"hold-address"}},[a("Input",{attrs:{placeholder:"不超过100字","element-id":"hold-address",maxlength:100},model:{value:t.formValidate.address,callback:function(e){t.$set(t.formValidate,"address",e)},expression:"formValidate.address"}})],1),t._v(" "),a("FormItem",{attrs:{label:"主办方",prop:"host","label-for":"host"}},[a("Input",{attrs:{placeholder:"不超过100字","element-id":"host",maxlength:100},model:{value:t.formValidate.host,callback:function(e){t.$set(t.formValidate,"host",e)},expression:"formValidate.host"}})],1),t._v(" "),a("FormItem",{attrs:{label:"报名时间",prop:"signTime"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"signStartTime"}},[a("DatePicker",{staticStyle:{width:"231px"},attrs:{type:"datetime",placeholder:"选择开始时间",format:"yyyy-MM-dd HH:mm",value:t.formValidate.signStartTime},on:{"on-change":t.signStartTimeChange}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[t._v("-")]),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"signStartTime"}},[a("DatePicker",{staticStyle:{width:"231px"},attrs:{type:"datetime",placeholder:"选择结束时间",format:"yyyy-MM-dd HH:mm",value:t.formValidate.signEndTime},on:{"on-change":t.signEndTimeChange}})],1)],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"报名人数限制",prop:"peopleNumber","label-for":"peopleNumber"}},[a("Input",{attrs:{placeholder:"请填写本次活动能够允许的最大参加人数（选填）","element-id":"peopleNumber",type:"number",min:"0"},model:{value:t.formValidate.peopleNumber,callback:function(e){t.$set(t.formValidate,"peopleNumber",e)},expression:"formValidate.peopleNumber"}})],1),t._v(" "),a("FormItem",{attrs:{label:"活动介绍",prop:"introduction"}},[a("editor",{ref:"editor",attrs:{value:t.formValidate.introduction,"file-upload-url":t.uploadFile},on:{change:t.editorChange}})],1),t._v(" "),a("FormItem",{attrs:{label:"类别"}},[a("RadioGroup",{model:{value:t.formValidate.checkWay,callback:function(e){t.$set(t.formValidate,"checkWay",e)},expression:"formValidate.checkWay"}},[a("Radio",{attrs:{label:1}},[t._v("扫码签到")]),t._v(" "),a("Radio",{attrs:{label:2}},[t._v("人员检票")]),t._v(" "),a("Radio",{attrs:{label:0}},[t._v("两者皆可")])],1)],1),t._v(" "),1!==t.formValidate.checkWay?a("FormItem",{attrs:{label:"",prop:"checkWay"}},[a("div",{staticClass:"check-people"},t._l(t.formValidate.tellers,function(e,s){return a("span",{key:s,staticClass:"check-man"},[t._v(t._s(e.userName+" "+e.userId)+" "),a("span",{staticClass:"item-remove",on:{click:function(e){t.removeCheckMan(s)}}},[t._v("x")])])})),t._v(" "),t.formValidate.tellers&&t.formValidate.tellers.length<5?a("Button",{staticStyle:{width:"100%",color:"#2D8CF0"},attrs:{type:"dashed",icon:"android-add"},on:{click:t.addCheckMan}},[t._v("添加检票人")]):t._e()],1):t._e(),t._v(" "),a("FormItem",{attrs:{label:"发布至同学圈",prop:"is_send"}},[a("RadioGroup",{model:{value:t.formValidate.is_send,callback:function(e){t.$set(t.formValidate,"is_send",e)},expression:"formValidate.is_send"}},[a("Radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),a("Radio",{attrs:{label:1}},[t._v("是")])],1),t._v(" "),1===t.formValidate.is_send?a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.formValidate.circleId,callback:function(e){t.$set(t.formValidate,"circleId",e)},expression:"formValidate.circleId"}},t._l(t.circles,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})):t._e()],1),t._v(" "),a("p",{staticClass:"title"},[t._v("报名信息收集")]),t._v(" "),a("FormItem",{attrs:{label:"收集项（多选）"}},[a("Checkbox",{model:{value:t.formValidate.hasTelnumber,callback:function(e){t.$set(t.formValidate,"hasTelnumber",e)},expression:"formValidate.hasTelnumber"}},[t._v("手机号")]),t._v(" "),a("Checkbox",{staticStyle:{"margin-left":"10px"},model:{value:t.formValidate.hasRemark,callback:function(e){t.$set(t.formValidate,"hasRemark",e)},expression:"formValidate.hasRemark"}},[t._v("备注（用于收集其他信息）")])],1),t._v(" "),a("FormItem",{attrs:{label:"备注说明",prop:"remark","label-for":"remark"}},[a("i-input",{attrs:{placeholder:"不超过100字","element-id":"remark",maxlength:100},model:{value:t.formValidate.remark,callback:function(e){t.$set(t.formValidate,"remark",e)},expression:"formValidate.remark"}})],1),t._v(" "),a("p",{staticClass:"title"},[t._v("图片上传")]),t._v(" "),a("FormItem",{attrs:{label:"上传海报",prop:"banner"}},[a("poster-uploader",{on:{"on-done":t.posterUploaded}}),t._v(" "),t.formValidate.poster?a("div",{staticClass:"poster-img"},[a("img",{attrs:{src:t.formValidate.poster}}),t._v(" "),a("div",{staticClass:"opt-panel"},[a("div",{staticClass:"viewer",on:{click:t.delBanner}},[a("Icon",{attrs:{type:"trash-a",size:"24"}}),t._v(" "),a("div",[t._v("删除")])],1)])]):t._e()],1),t._v(" "),t.wid?t._e():a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("发布")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleSave}},[t._v("保存")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")])],1),t._v(" "),t.wid?a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("发布")]),t._v(" "),0===t.formValidate.publishStatus?a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleSave}},[t._v("保存")]):t._e(),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")])],1):t._e()],1)],1),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,width:800},on:{"on-ok":t.addCheckManOk,"on-cancel":t.cancelCheckMan},model:{value:t.modalCheckMan,callback:function(e){t.modalCheckMan=e},expression:"modalCheckMan"}},[t.ifChoose?a("choose",{ref:"choose",staticClass:"bh-mt-32",attrs:{keys:"userId",searchKey:"condition",params:t.userOpt.params,url:t.userOpt.url,"render-left":t.renderLeft,"render-right":t.renderRight,pageableSetting:t.userOpt.pageableSetting,"max-select-num":5,"selected-list":t.tempTellers}}):t._e()],1)],1)},staticRenderFns:[]};var $e=a("VU/8")(xe,Ie,!1,function(t){a("gWma")},"data-v-173d65ee",null).exports,Te=new Vue,Me={data:function(){return{isInMedia:!1,userName:"",mediaInfo:{}}},methods:{getLoginUser:function(){var t=this;u.httpGet(f.accountInfo,{},u.handler.DATAS).then(function(e){t.userName=e.name}).catch(function(e){t.$Message.error("获取用户信息失败："+e.errMsg)})},getMediaInfo:function(t){var e=this;u.httpGet(f.mediaInfo+"/"+t,{},u.handler.DATAS).then(function(t){e.mediaInfo=t}).catch(function(t){e.$Message.error("获取用户信息失败："+t.errMsg)})},Switch:function(){this.isInMedia=!1,this.$router.push("/outer/medialist")},Exit:function(){window.location.href=window.location.origin+f.logout},viewMediaInfo:function(){this.isInMedia&&this.$router.replace("/outer/mediainfo/"+this.mediaInfo.wid)},init:function(){window!=window.top&&(window.top.location.href=window.location.href)}},computed:{cAvatar:function(){return"url("+this.mediaInfo.icon+")"}},created:function(){var t=this;Te.$on("switchMedia",function(e){-1===e?t.isInMedia=!1:(t.isInMedia=!0,t.getMediaInfo(e))})},mounted:function(){this.init(),this.getLoginUser()}},Oe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outer-main"},[a("Layout",[a("Header",{staticClass:"layout-header-bar"},[a("span",{staticClass:"logo"},[a("img",{staticStyle:{height:"38px",width:"38px"},attrs:{src:"static/logo.png"}})]),t._v(" "),a("div",{staticClass:"right-content"},[t.isInMedia?t._e():a("span",{staticStyle:{"font-size":"14px",color:"#657180","line-height":"64px",float:"left",cursor:"pointer"}},[t._v(t._s(t.userName))]),t._v(" "),t.isInMedia&&t.mediaInfo.icon?a("div",{staticClass:"head-img",style:{"background-image":t.cAvatar},on:{click:t.viewMediaInfo}}):t._e(),t._v(" "),t.isInMedia?a("span",{staticStyle:{"font-size":"14px",color:"#657180","line-height":"64px",float:"left",cursor:"pointer"},on:{click:t.viewMediaInfo}},[t._v(t._s(t.mediaInfo.name))]):t._e(),t._v(" "),t.isInMedia?a("a",{on:{click:function(e){e.preventDefault(),t.Switch(e)}}},[a("Icon",{staticStyle:{float:"left",color:"rgb(51, 153, 255)","font-size":"19px","margin-top":"22px","margin-left":"24px"},attrs:{type:"arrow-swap"}})],1):t._e(),t._v(" "),a("a",{on:{click:function(e){e.preventDefault(),t.Exit(e)}}},[a("Icon",{staticStyle:{float:"left",color:"rgb(51, 153, 255)","font-size":"19px","margin-top":"22px","margin-left":"24px","margin-right":"24px"},attrs:{type:"power"}})],1)])]),t._v(" "),a("Content",{staticClass:"content"},[a("router-view")],1)],1)],1)},staticRenderFns:[]};var Ne=a("VU/8")(Me,Oe,!1,function(t){a("Kkqo"),a("kP5T")},"data-v-0f5e8eaa",null).exports,Ee={data:function(){return{isShowOpin:!1,reviewOpinion:"",mediaList:[],managerData:[],currentMediaId:"",addManagerShow:!1}},methods:{viewMoreOpin:function(t){this.reviewOpinion=t,this.isShowOpin=!0},addManager:function(t){this.$router.push({path:"/outer/viewadmins",query:{mediaId:t,owner:!0}})},showManager:function(t){this.$router.push({path:"/outer/viewadmins",query:{mediaId:t,owner:!1}})},getStatusName:function(t){return"AUTHED"===t?"已审核":"AUTH_FAIL"===t?"已拒绝":"UN_AUTH"===t?"未认证":"AUTHING"===t?"待审核":"数据异常"},getTypeName:function(t){return"OFFICIAL"===t?"职能":"学生"},getStatusClass:function(t){return"AUTHED"===t?"status-success":"AUTH_FAIL"===t?"status-refuse":"UN_AUTH"===t?"status-audit":"AUTHING"===t?"status-audit":void 0},getStatusClassForPoint:function(t){return"AUTHED"===t?"status-success-point":"AUTH_FAIL"===t?"status-refuse-point":"UN_AUTH"===t?"status-audit-point":"AUTHING"===t?"status-audit-point":void 0},getTypeClass:function(t){return"OFFICIAL"===t?"type-function":"type-student"},getShowFollows:function(t){return t>1e4?(t/1e4).toFixed(2)+"W":t},getRightBtnShowTxt:function(t){return"AUTHED"===t?"进入":"UN_AUTH"===t?"认证":"AUTH_FAIL"===t?"重新申请":"AUTHING"===t?"进入":void 0},apply:function(){var t=this.mediaList.filter(function(t){return"AUTH_FAIL"!=t.authStatus&&"OWNER"===t.manageType});t&&t.length>=5?this.$Message.error("每人最多只能拥有5个校园号～"):this.$router.push("/outer/applymedia")},enter:function(t){"UN_AUTH"===t.authStatus||"AUTHING"===t.authStatus?(sessionStorage.setItem("authStatus",t.authStatus),this.$router.replace({path:"/outer/approvedesc/"+t.wid})):"AUTH_FAIL"===t.authStatus?this.$router.replace("/outer/mediainfo/"+t.wid):this.postSwitch(t).then(function(t){})},postSwitch:function(t){var e=this;return console.log(t.wid),u.httpGet(f.mediaSwitch+"/"+t.wid,{},u.handler.CODE).then(function(a){a&&"0"===a.code?(Te.$emit("switchMedia",t.wid),e.$router.replace("/home")):e.$Message.error("切换失败："+a.message)}).catch(function(t){e.$Message.error("切换失败："+t.errMsg)})},del:function(t){var e=this;e.$Modal.confirm({title:"请确认",content:"是否删除此校园号？",okText:"确定",cancelText:"取消",onOk:function(){u.httpPost(f.mediaDel+"/"+t.wid,{},u.handler.CODE).then(function(t){e.$Message.success("校园号删除成功"),e.getMediaList()}).catch(function(t){e.$Message.error("校园号删除失败："+t.errMsg)})}})},getMediaList:function(){var t=this;u.httpGet(f.mediaList,{},u.handler.DATAS).then(function(e){console.log(e),t.mediaList=e}).catch(function(e){t.$Message.error("获取校园号列表失败："+e.errMsg)})}},computed:{},mounted:function(){this.getMediaList()}},Ue={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"media-list"},[a("p",{staticClass:"first-title"},[t._v("校园号列表")]),t._v(" "),a("p",{staticClass:"second-title"},[t._v("这是您可使用的所有校园号列表")]),t._v(" "),a("ul",{staticClass:"card-list"},[t._l(t.mediaList,function(e,s){return a("li",{key:s,staticClass:"card-item"},[a("Card",{attrs:{padding:8}},[a("div",{staticClass:"content"},[a("div",{staticClass:"status",class:t.getStatusClass(e.authStatus)},[a("i",{staticClass:"point",class:t.getStatusClassForPoint(e.authStatus)}),t._v(" "),a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.getStatusName(e.authStatus)))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.fansCount>0,expression:"item.fansCount > 0"}],staticClass:"fans-count"},[t._v("被关注："+t._s(e.fansCount))])]),t._v(" "),a("div",{staticClass:"type",class:t.getTypeClass(e.mediaType)},[a("span",[t._v(t._s(t.getTypeName(e.mediaType)))])]),t._v(" "),a("p",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),"AUTH_FAIL"!=e.authStatus?a("div",{staticClass:"managers"},[a("span",{staticClass:"managers-data"},[t._v("管理员:"+t._s(e.managers&&e.managers.length>0?e.managers.join(","):"暂无"))]),t._v(" "),"OWNER"===e.manageType?a("span",{staticClass:"action-btn",on:{click:function(a){t.addManager(e.wid)}}},[t._v("添加")]):t._e(),t._v(" "),"OWNER"!=e.manageType?a("span",{staticClass:"action-btn",on:{click:function(a){t.showManager(e.wid)}}},[t._v("查看")]):t._e()]):t._e(),t._v(" "),"AUTH_FAIL"===e.authStatus?a("div",{staticClass:"managers"},[a("span",{staticClass:"managers-data"},[t._v("审核意见:"+t._s(e.reviewOpinion))]),t._v(" "),a("span",{staticClass:"action-btn",on:{click:function(a){t.viewMoreOpin(e.reviewOpinion)}}},[t._v("查看")])]):t._e(),t._v(" "),a("p",{staticClass:"desc"},[t._v(t._s(e.description))]),t._v(" "),a("div",{staticClass:"bottom"},[a("Button",{staticClass:"btn-left",class:{"btn-left-long":"OWNER"!==e.manageType},attrs:{type:"primary",shape:"circle"},on:{click:function(a){t.enter(e)}}},[t._v(t._s(t.getRightBtnShowTxt(e.authStatus)))]),t._v(" "),"OWNER"===e.manageType?a("Button",{staticClass:"btn-right",attrs:{type:"ghost",shape:"circle"},on:{click:function(a){a.stopPropagation(),t.del(e)}}},[t._v("删除")]):t._e()],1)])])],1)}),t._v(" "),a("li",{staticClass:"add-media",on:{click:t.apply}},[a("div",[a("Icon",{staticStyle:{"margin-top":"90px",color:"#3399FF"},attrs:{type:"ios-plus-outline",size:"30"}}),t._v(" "),a("p",{staticStyle:{"font-size":"12px",color:"#3399FF","letter-spacing":"0","margin-top":"4px"}},[t._v("申请校园号")])],1)])],2),t._v(" "),a("Modal",{attrs:{width:"347",styles:{top:"258px"}},model:{value:t.isShowOpin,callback:function(e){t.isShowOpin=e},expression:"isShowOpin"}},[a("p",{staticStyle:{color:"#1C2438","text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-weight":"500"}},[t._v("审核意见")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center",color:"#495060","font-size":"12px","line-height":"16px","vertical-align":"middle"}},[a("p",{staticStyle:{display:"inline-block",width:"260px","text-align":"left","line-height":"17px"}},[t._v(t._s(t.reviewOpinion?t.reviewOpinion:"审核失败原因未填写"))])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.isShowOpin=!1}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var Ae=a("VU/8")(Ee,Ue,!1,function(t){a("ykv6")},"data-v-6a681b78",null).exports,De={data:function(){return{isTableShow:!0,mediaId:"",isOwner:!1,totalSize:0,pageNum:1,pageSize:10,owner:{},KeyWord:"",addAdminShow:!1,emptyShowTxt:"请输入姓名或者学工号搜索你要添加的管理员",mediaListColumns:[{type:"selection",width:60,align:"center"},{title:"姓名",key:"name",render:function(t,e){return t("div",{style:{"line-height":"20px"}},[t("span",{},e.row.name),t("span",{style:{padding:"3px",color:"#ffffff",background:"#2D8CF0","border-radius":"4px","margin-left":"4px",display:"OWNER"===e.row.manageType?"inline-block":"none"}},"拥有者")])}},{title:"性别",key:"sex"},{title:"学工号",key:"openId"}],mediaListData:[],selectedMediaListData:[],copyMediaListData:[],searchAdminsListColumns:[{type:"selection",width:60,align:"center"},{title:"学工号",key:"openId",width:140,align:"center",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.openId}},e.row.openId)}},{title:"姓名",key:"userName",width:130,align:"center"},{title:"性别",key:"sex",width:80,align:"center"},{title:"学院",key:"departName",width:288,align:"center"}],searchAdminsListData:[]}},methods:{onPageSizeChange:function(t){this.pageSize=t,this.pageNum=1,this.searchAdminsListData=[],this.queryPerson()},onChange:function(t){this.pageNum=t,this.searchAdminsListData=[],this.queryPerson()},showAdd:function(){this.addAdminShow=!0,this.searchAdminsListData=[],this.KeyWord="",this.queryPerson(),this.getAdmins()},closeAdd:function(){this.addAdminShow=!1},getAdmins:function(){var t=this;this.copyMediaListData=[],u.httpGetQuery(f.QUERY_ADMINS,{mediaId:this.mediaId},u.handler.CODE).then(function(e){if(e&&"0"==e.code){for(var a=e.datas,s=0;s<a.length;s++)a[s].sex=t.getShowSex(a[s].gender),a[s].userName=a[s].name,"MANAGE"===a[s].manageType?t.copyMediaListData.push(a[s]):"OWNER"===a[s].manageType&&(t.owner=a[s],a[s]._disabled=!0);t.mediaListData=a}}).catch(function(t){})},getShowSex:function(t){return t&&"UNKNOWN"!==t?"MALE"===t?"男":"FEMALE"===t?"女":void 0:"未知"},queryPerson:function(){var t=this,e={mediaId:this.mediaId,name:this.KeyWord,pageNum:this.pageNum,pageSize:this.pageSize};u.httpGetQuery(f.GET_FANS,e,u.handler.CODE).then(function(e){if(e&&"0"==e.code){var a=e.datas.rows;if(t.totalSize=e.datas.totalSize,t.searchAdminsListData=[],!a)return;0===a.length&&(""===t.KeyWord?t.emptyShowTxt="请输入姓名或者学工号搜索你要添加的管理员":t.emptyShowTxt="没有查询到数据");for(var s=0;s<a.length;s++)if(a[s].sex=t.getShowSex(a[s].gender),t.owner&&t.owner.personId===a[s].personId)a[s]._disabled=!0;else for(var i=0;i<t.copyMediaListData.length;i++)a[s].personId===t.copyMediaListData[i].personId&&(t.copyMediaListData[i].isNewAdd?a[s]._checked=!0:a[s]._disabled=!0);t.searchAdminsListData=a}}).catch(function(t){})},onSelectionChange:function(t){var e=this,a=!1,s=[];this.searchAdminsListData.forEach(function(t){e.copyMediaListData.forEach(function(e,a){t.personId!==e.personId||t._disabled||s.push(a)})}),s.length>0&&(a=!0,(s=s.reverse()).forEach(function(t){e.copyMediaListData.splice(t,1)}));for(var i=0;i<t.length;i++)this.isInCopyList(t[i].personId)||(t[i].isNewAdd=!0,this.copyMediaListData.push(t[i]));a||(this.searchAdminsListData.forEach(function(t){e.isInCopyList(t.personId)?(console.log("#####"),t._checked=!0):t._checked=!1}),this.isTableShow=!1,this.$nextTick(function(){e.isTableShow=!0}))},isInCopyList:function(t){for(var e=0;e<this.copyMediaListData.length;e++)if(this.copyMediaListData[e].personId===t)return!0;return!1},onAdminSelectionChange:function(t){this.selectedMediaListData=t},clearSelected:function(){for(var t=0;t<this.searchAdminsListData.length;t++)this.searchAdminsListData[t]._checked=!1;this.copyMediaListData=this.copyMediaListData.filter(function(t){return!t.isNewAdd})},addManager:function(){var t=this;if(0===this.copyMediaListData.length)this.$Message.error("未选择任何人员！");else{for(var e=[],a=0;a<this.copyMediaListData.length;a++)this.copyMediaListData[a].userId&&e.push(this.copyMediaListData[a].userId);var s={mediaId:this.mediaId,admins:e};u.httpPost(f.ADD_MANAGER,s,u.handler.CODE).then(function(e){e&&"0"==e.code&&(t.addAdminShow=!1,t.getAdmins())}).catch(function(e){t.$Message.error("异常："+e.message)})}},deleteManager:function(t){var e=[];e.push(t.personId);for(var a=0;a<e.length;a++){var s=this.indexOf(e[a]);s>-1&&this.copyMediaListData.splice(s,1)}this.addAdminShow&&this.queryPerson()},deleteManagers:function(){for(var t=[],e=0;e<this.selectedMediaListData.length;e++)t.push(this.selectedMediaListData[e].pwid);this.deleteManagerRequest(t)},deleteManagerRequest:function(t){var e=this;0===t.length?this.$Message.error("未选择任何管理员！"):u.httpPost(f.DELETE_MANAGER,{mediaId:this.mediaId,admins:t},u.handler.CODE).then(function(a){if(a&&"0"==a.code){e.selectedMediaListData=[],e.$Message.success("移出成功！"),e.getAdmins(),e.addAdminShow&&e.queryPerson();for(var s=0;s<t.length;s++){var i=e.indexOf(t[s]);i>-1&&e.copyMediaListData.splice(i,1)}}}).catch(function(t){})},indexOf:function(t){for(var e=0;e<this.copyMediaListData.length;e++)if(this.copyMediaListData[e].personId===t)return e;return-1},goBack:function(){this.$router.go(-1)}},mounted:function(){this.getAdmins(),this.queryPerson()},created:function(){this.mediaId=this.$route.query.mediaId,this.isOwner=this.$route.query.owner,this.isOwner||this.mediaListColumns.splice(0,1)}},Ve={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view-admins"},[a("div",{staticClass:"content"},[a("div",{staticClass:"bcs"},[a("span",{staticClass:"home-title",on:{click:t.goBack}},[t._v("校园号管理")]),t._v(" "),a("span",{staticClass:"split-line"},[t._v("/")]),t._v(" "),a("span",{staticClass:"current-title"},[t._v("查看管理员")])]),t._v(" "),t.isOwner?a("div",{staticClass:"btn-container"},[a("Button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:t.showAdd}},[t._v("添加管理")]),t._v(" "),a("Button",{staticClass:"delete-btn",attrs:{type:"primary"},on:{click:t.deleteManagers}},[t._v("移出管理")])],1):t._e(),t._v(" "),a("div",{staticClass:"admins-data-list"},[a("Table",{attrs:{border:"",columns:t.mediaListColumns,data:t.mediaListData},on:{"on-selection-change":t.onAdminSelectionChange}})],1)]),t._v(" "),a("Modal",{attrs:{width:"950",closable:!1,styles:{top:"70px"}},model:{value:t.addAdminShow,callback:function(e){t.addAdminShow=e},expression:"addAdminShow"}},[a("p",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加管理员 "),a("span",{staticStyle:{color:"#ccc","font-size":"13px"}},[t._v("只能从粉丝中添加哦～")])])]),t._v(" "),a("div",{staticClass:"add-admins-content"},[a("div",{staticClass:"left"},[a("div",{staticClass:"search-input"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.KeyWord,expression:"KeyWord",modifiers:{trim:!0}}],staticClass:"search-content",attrs:{type:"text",placeholder:"请输入姓名或者学工号"},domProps:{value:t.KeyWord},on:{keyup:function(e){if(!("button"in e)&&13!==e.keyCode)return null;t.queryPerson(e)},input:function(e){e.target.composing||(t.KeyWord=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("Icon",{staticClass:"search-icon",attrs:{type:"ios-search-strong",size:"22"}}),t._v(" "),a("Button",{staticClass:"search-btn",staticStyle:{background:"#2D8CF0","border-radius":"0 4px 4px 0"},attrs:{slot:"append",type:"primary"},on:{click:t.queryPerson},slot:"append"},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"search-admins-data-list"},[t.isTableShow?a("Table",{attrs:{height:"400",border:"",columns:t.searchAdminsListColumns,data:t.searchAdminsListData,"no-data-text":t.emptyShowTxt},on:{"on-selection-change":t.onSelectionChange}}):t._e()],1),t._v(" "),a("div",{staticClass:"bottom-page"},[a("Page",{attrs:{total:t.totalSize,current:t.pageNum,"show-elevator":"","show-sizer":"",placement:"top","page-size":t.pageSize},on:{"on-page-size-change":t.onPageSizeChange,"on-change":t.onChange}})],1)]),t._v(" "),a("div",{staticClass:"middle"}),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"top"},[a("span",{staticClass:"title"},[t._v("已选择:")]),t._v(" "),a("div",{staticClass:"clear-btn",on:{click:t.clearSelected}},[a("Icon",{attrs:{type:"ios-trash"}}),t._v(" "),a("span",[t._v("清空已选")])],1)]),t._v(" "),a("div",{staticClass:"right-content"},[a("ul",t._l(t.copyMediaListData,function(e,s){return a("li",{key:s},[a("Icon",{attrs:{type:"person"}}),t._v(" "),a("span",[t._v(t._s(e.userName))]),t._v(" "),e.isNewAdd?a("div",{staticClass:"delete-btn",on:{click:function(a){t.deleteManager(e)}}},[a("Icon",{staticClass:"delete-icon",attrs:{type:"close-round"}})],1):t._e()],1)}))]),t._v(" "),a("div",{staticClass:"bottom"},[a("ButtonGroup",[a("Button",{attrs:{type:"primary"},on:{click:t.addManager}},[t._v("添加")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:t.closeAdd}},[t._v("取消")])],1)],1)])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},staticRenderFns:[]};var Pe=a("VU/8")(De,Ve,!1,function(t){a("sQ3P"),a("5l/F")},"data-v-325f0ff3",null).exports,Fe={props:{option:{type:Object},cropOption:{type:Object,default:function(){return{enable:!1}}},showWidth:{type:Number,default:100},showHeight:{type:Number,default:100}},data:function(){return{imageModal:!1,format:["jpg","jpeg","png"],uploadUrl:f.uploadFile,imageModalUrl:"",uploadList:[],uploadOpt:JSON.parse(c()(this.option)),cropperOpt:{loading:!0,visible:!1,img:"",autoCrop:!0,fixedBox:!0,autoCropWidth:200,autoCropHeight:200}}},computed:{uploadVisible:function(){return!(this.uploadList.length>=this.uploadOpt.limit||this.uploadOpt.disable)}},methods:{beforeUpload:function(t){var e=this.format.join("|");if(!new RegExp(".("+e+")$").test(t.type))return this.handleFormatError(t),!1;if(this.option.clip){var a=new FileReader,s=this;return a.onload=function(t){s.showCropper(t.currentTarget.result)},a.readAsDataURL(t),!1}},showCropper:function(t){this.cropperOpt.autoCropWidth=this.cropOption.width||200,this.cropperOpt.autoCropHeight=this.cropOption.height||200,this.cropperOpt.visible=!0,this.cropperOpt.img=t},clipOk:function(){var t=this;this.$refs.cropper.getCropData(function(e){u.httpPost(f.convertBase64,{data:e},u.handler.DATAS).then(function(e){t.$emit("success",{url:e.fileUrl});var a={url:e.fileUrl,status:"finished"};t.$refs.upload.fileList.push(a),t.cropperOpt.visible=!1,t.cropperOpt.loading=!1,t.$nextTick(function(){t.cropperOpt.loading=!0})})})},handleView:function(t){this.imageModal=!0,this.imageModalUrl=t.url},handleRemove:function(t){var e=this.$refs.upload.fileList;e.splice(e.indexOf(t),1),this.$emit("delete",t)},handleSuccess:function(t,e){e.url=e.response.datas.fileUrl,this.$emit("success",e)},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+t.name+" 格式不正确，请上传"+this.format.join("|")+"格式的图片。"})},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+t.name+" 太大，不能超过 "+this.uploadOpt.maxSize+"kb。"})}},mounted:function(){this.uploadList=this.$refs.upload.fileList},components:{Cropper:Dt}},Re={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.uploadList,function(e){return a("div",{staticClass:"demo-upload-list",style:{width:t.showWidth+"px",height:t.showHeight+"px"}},["finished"===e.status?[a("img",{staticStyle:{"object-fit":"cover"},attrs:{src:e.url}}),t._v(" "),t.uploadOpt.disable?t._e():a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){t.handleView(e)}}}),t._v(" "),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){t.handleRemove(e)}}})],1)]:[e.showProgress?a("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2)}),t._v(" "),a("Upload",{directives:[{name:"show",rawName:"v-show",value:t.uploadVisible,expression:"uploadVisible"}],ref:"upload",staticStyle:{display:"inline-block"},style:{width:t.showWidth+"px",height:t.showHeight+"px"},attrs:{"show-upload-list":!1,"default-file-list":t.uploadOpt.defaultList,"on-success":t.handleSuccess,format:t.format,"max-size":t.uploadOpt.maxSize,"on-format-error":t.handleFormatError,"before-upload":t.beforeUpload,"on-exceeded-size":t.handleMaxSize,multiple:t.uploadOpt.multiple,type:"drag",action:t.uploadUrl}},[a("div",{staticStyle:{"text-align":"center","padding-top":"17px"},style:{width:t.showWidth+"px",height:t.showHeight+"px"}},[a("Icon",{attrs:{type:"plus-circled",size:"22",color:"#2E8CF0"}}),t._v(" "),a("div",{staticClass:"upload-tip",staticStyle:{"line-height":"18px"}},[a("strong",{staticStyle:{color:"#747986","font-size":"14px"}},[t._v("上传照片")]),t._v(" "),a("br"),t._v(" "),a("span",{staticStyle:{color:"#999999","font-size":"12px"}},[t._v("小于5M")])])],1)]),t._v(" "),a("Modal",{attrs:{title:"查看图片"},model:{value:t.imageModal,callback:function(e){t.imageModal=e},expression:"imageModal"}},[t.imageModal?a("img",{staticStyle:{width:"100%"},attrs:{src:t.imageModalUrl}}):t._e()]),t._v(" "),a("Modal",{attrs:{title:"裁剪图片",loading:t.cropperOpt.loading},on:{"on-ok":t.clipOk},model:{value:t.cropperOpt.visible,callback:function(e){t.$set(t.cropperOpt,"visible",e)},expression:"cropperOpt.visible"}},[t.cropperOpt.visible?a("cropper",{ref:"cropper",attrs:{option:t.cropperOpt}}):t._e()],1)],2)},staticRenderFns:[]};var je=a("VU/8")(Fe,Re,!1,function(t){a("zsuO")},"data-v-6c1cc0c4",null).exports,Le={data:function(){return{loading:!0,certificate:[],modalApprove:!1,certificateOpt:{visible:!1,maxSize:5e3,multiple:!1,limit:3,defaultList:[]},authStatus:"UN_AUTH"}},components:{uploadImg:je},methods:{approve:function(){this.modalApprove=!0},ApproveOk:function(){var t=this,e=this.certificate.join(",");if(0===this.certificate.length)return this.$Message.error("请至少上传一张材料照片"),this.loading=!1,void this.$nextTick(function(){t.loading=!0});var a={authMaterials:e,wid:this.mediaId};u.httpPost(f.materialApprove,a,u.handler.CODE).then(function(e){t.modalApprove=!1,t.$Message.success("认证信息提交成功"),t.authStatus="AUTHING",sessionStorage.setItem("authStatus","AUTHING")}).catch(function(e){t.$Message.error("认证信息提交失败："+e.message)}).then(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})})},cancelApprove:function(){this.modalApprove=!1},uploadCertificateSucc:function(t){this.certificate.push(t.url)},deleteUploadCertificate:function(t){var e=this.certificate;e.splice(e.indexOf(t.url),1)}},mounted:function(){this.mediaId=this.$route.params.mediaId,Te.$emit("switchMedia",this.mediaId),this.authStatus=sessionStorage.getItem("authStatus")}},ze={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"approve-desc"},[a("div",{staticClass:"top"},[a("Breadcrumb",[a("BreadcrumbItem",[t._v("认证说明")])],1)],1),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"top-container"},[t._m(0),t._v(" "),a("span",{staticClass:"title"},[t._v("校园号认证")]),t._v(" "),"UN_AUTH"===t.authStatus?a("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.approve}},[t._v("申请认证")]):t._e()],1),t._v(" "),"AUTHING"===t.authStatus?a("div",{staticClass:"status"},[a("span",{staticClass:"title"},[t._v("认证说明")]),t._v(" "),a("Button",{staticClass:"btn",attrs:{type:"ghost"}},[t._v("待审核")])],1):t._e(),t._v(" "),t._m(1)]),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,loading:t.loading,width:470},on:{"on-ok":t.ApproveOk,"on-cancel":t.cancelApprove},model:{value:t.modalApprove,callback:function(e){t.modalApprove=e},expression:"modalApprove"}},[a("div",[a("upload-img",{attrs:{option:t.certificateOpt},on:{success:t.uploadCertificateSucc,delete:t.deleteUploadCertificate}}),t._v(" "),a("p",{staticClass:"tip"},[t._v("提供经学校核实的合法性证明材料，要求清晰的证明照片，最大5M，不得超过3张")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"school-icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"desc"},[a("p",{staticStyle:{"font-size":"12px",color:"#80848F","letter-spacing":"0","margin-top":"2px"}},[t._v("您好，欢迎登录校园号平台！赶快去通过实名认证解锁功能吧～")]),t._v(" "),a("p",{staticClass:"title"},[t._v("一、实名认证后能解锁的功能")]),t._v(" "),a("p",{staticClass:"content-desc"},[t._v("(1) 群发管理：支持群发消息，快速选择用户对象，编辑预览消息内容（可带附件），一键发送～")]),t._v(" "),a("p",{staticClass:"content-desc"},[t._v("(2) 用户管理：支持用户搜索和打标签分组功能，轻松管理粉丝用户")]),t._v(" "),a("p",{staticClass:"content-desc"},[t._v("(3) 自动回复管理： 支持自定义设置自动回复消息：哈喽，你来啦～")]),t._v(" "),a("p",{staticClass:"content-desc"},[t._v("(4) 账户管理： 支持账户资料中校园号头像和介绍的再编辑，让更多用户关注你！")]),t._v(" "),a("p",{staticClass:"title",staticStyle:{"margin-top":"30px"}},[t._v("二、提交实名认证材料")]),t._v(" "),a("p",{staticClass:"content-desc"},[t._v("(1) 学校职能部门：需要提供所在职能部门的部门章。")]),t._v(" "),a("p",{staticClass:"content-desc"},[t._v("(2) 学生组织：需要提供学校核实的合法性证明材料。   社团：需要提供经学校或社团联合会组织核实的社团合法性证明材料")])])}]};var Be=a("VU/8")(Le,ze,!1,function(t){a("8K9r")},"data-v-951d4c14",null).exports,Ge={data:function(){return{current:0,type:1,formItem:{school:"",name:"",description:"",backgroundImg:[],avatar:[],certificate:[]},avatarOpt:{type:"avatar",clip:!0,maxSize:5e3,multiple:!1,limit:1,defaultList:[]},bgImgOpt:{type:"avatar",clip:!0,maxSize:5e3,multiple:!1,limit:1,defaultList:[]},bgImgCropOption:{width:375,height:108},certificateOpt:{visible:!1,maxSize:5e3,multiple:!1,limit:3,defaultList:[]},ruleValidate:{school:[{required:!0,message:"所属学校不能为空",trigger:"blur"}],name:[{required:!0,validator:(t="名称不能为空",function(e,a,s){var i=[];a||i.push(new Error(t)),/\s/.test(a)&&i.push(new Error("名称不能包含空格")),s(i)}),trigger:"blur"},{type:"string",min:2,max:10,message:"名称必须在2-10字之间",trigger:"blur"}],description:[{required:!0,validator:function(t){return function(e,a,s){var i=[];a||i.push(new Error(t)),/\s/.test(a)&&i.push(new Error("介绍不能包含空格")),s(i)}}("介绍不能为空"),trigger:"blur"},{type:"string",min:0,max:100,message:"介绍必须在0-100字之间",trigger:"blur"}],avatar:[{required:!0,validator:function(t){return function(e,a,s){var i=[];(!a||a.length<1)&&i.push(new Error(t)),s(i)}}("头像不能为空")}]},isAgree:!1,schools:[]};var t},components:{uploadImg:je},methods:{chooseFunction:function(){this.type=2},chooseStudent:function(){this.type=1},nextStep:function(){this.current=1},submit:function(){var t=this;this.isAgree?this.$refs.form.validate(function(e){e&&t.isSubmit()}):this.$Message.error("同意校园号注册协议后才能提交")},isSubmit:function(){var t=this;0===this.formItem.certificate.length?this.$Modal.confirm({title:"请确认",content:"未提交认证申请将不能使用校园号平台功能，确定提交吗?",okText:"确定",cancelText:"取消",loading:!0,onOk:function(){t.$Modal.remove(),t.submitOk()}}):t.submitOk()},submitOk:function(){var t=this,e=this.formItem,a={name:e.name,wid:e.id,tenantId:e.school,description:e.description,icon:e.avatar.join(","),backgroundImg:e.backgroundImg.join(","),authMaterials:e.certificate.join(","),mediaType:1===this.type?"CLUB":"OFFICIAL"};u.httpPost(f.mediaApply,a,u.handler.CODE).then(function(e){t.$Message.success("校园号申请成功"),t.$router.replace("/outer/medialist")}).catch(function(e){t.$Message.error("校园号申请失败："+e.message)})},cancel:function(){this.$router.push("/outer/medialist")},prev:function(){this.current=0},getAccountSchools:function(){var t=this;u.httpGet(f.accountSchools,{},u.handler.DATAS).then(function(e){t.schools=e,1===t.schools.length&&(t.formItem.school=t.schools[0].tenantId),t.$route.query.wid&&t.getMediaInfo()}).catch(function(e){t.$Message.error("异常："+e.message)})},uploadAvatarSucc:function(t){this.formItem.avatar.push(t.url),this.$refs.form.validateField("avatar")},uploadBackgroundImgSucc:function(t){this.formItem.backgroundImg.push(t.url)},deleteUploadAvatar:function(t){this.formItem.avatar.splice(0,1)},deleteUploadBackgroundImg:function(t){this.formItem.backgroundImg.splice(0,1)},uploadCertificateSucc:function(t){this.formItem.certificate.push(t.url)},deleteUploadCertificate:function(t){var e=this.formItem.certificate;e.splice(e.indexOf(t.url),1)},viewProtocol:function(){window.open("#/outer/protocol")},getMediaInfo:function(){var t=this;u.httpGet(f.mediaInfo+"/"+this.$route.query.wid,{},u.handler.DATAS).then(function(e){console.log("getMediaInfo"),"CLUB"===e.mediaType?t.type=1:t.type=2,t.formItem=e,t.formItem.school=t.formItem.tenantId,t.formItem.avatar=[],t.formItem.avatar.push(t.formItem.icon),t.avatarOpt.defaultList.push({url:t.formItem.icon}),t.formItem.certificate=[],t.avatarCheck=!1,t.$nextTick(function(){t.avatarCheck=!0})}).catch(function(e){t.$Message.error("获取校园号信息失败："+e.errMsg)})}},computed:{typeFunctionClass:function(){return 2===this.type?"card-selected":"card-un-select"},typeStudentClass:function(){return 1===this.type?"card-selected":"card-un-select"}},mounted:function(){this.getAccountSchools()}},qe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apply-media"},[a("p",{staticClass:"title"},[t._v("校园号申请")]),t._v(" "),a("div",{staticClass:"step"},[a("Steps",{attrs:{current:t.current}},[a("Step",{attrs:{title:"选择类型"}}),t._v(" "),a("Step",{attrs:{title:"填写申请资料"}})],1)],1),t._v(" "),a("p",{staticClass:"line"}),t._v(" "),0===t.current?a("div",{staticClass:"step-one"},[a("div",{staticClass:"card-container"},[a("div",{staticClass:"card-item-outer",staticStyle:{"margin-left":"288px"},on:{click:t.chooseFunction}},[a("div",{staticClass:"card",class:t.typeFunctionClass},[1===t.type?a("Icon",{staticClass:"check-icon",attrs:{type:"ios-checkmark-outline",size:"28"}}):t._e(),t._v(" "),2===t.type?a("Icon",{staticClass:"check-icon",attrs:{type:"checkmark-circled",size:"28"}}):t._e(),t._v(" "),a("img",{staticStyle:{width:"120px","margin-top":"50px","margin-left":"80px"},attrs:{src:"static/offical.png"}}),t._v(" "),a("div",{staticClass:"type bh-mt-8"},[t._v("学校职能部门")])],1),t._v(" "),a("p",{staticClass:"title"},[t._v("适合由学校专职人员组成")]),t._v(" "),a("p",{staticClass:"desc"},[t._v("旨在提供校内师生管理服务的职能部门申请")])]),t._v(" "),a("div",{staticClass:"card-item-outer",staticStyle:{"margin-right":"288px","margin-left":"56px"},on:{click:t.chooseStudent}},[a("div",{staticClass:"card",class:t.typeStudentClass},[2===t.type?a("Icon",{staticClass:"check-icon",attrs:{type:"ios-checkmark-outline",size:"28"}}):t._e(),t._v(" "),1===t.type?a("Icon",{staticClass:"check-icon",attrs:{type:"checkmark-circled",size:"28"}}):t._e(),t._v(" "),a("img",{staticStyle:{width:"120px","margin-top":"50px","margin-left":"80px"},attrs:{src:"static/personal.png"}}),t._v(" "),a("div",{staticClass:"type bh-mt-8"},[t._v("学生组织")])],1),t._v(" "),a("p",{staticClass:"title"},[t._v("适合由学校学生组成")]),t._v(" "),a("p",{staticClass:"desc"},[t._v("受学校党委领导、团委指导、自我服务、自我提高、自我管理、辅助教学的学生组织、社团组织等团体申请")])])])]):t._e(),t._v(" "),1===t.current?a("div",{staticClass:"step-two"},[a("Form",{ref:"form",staticClass:"form",attrs:{model:t.formItem,"label-width":120,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"所属学校",prop:"school"}},[t.schools.length>0?a("Select",{model:{value:t.formItem.school,callback:function(e){t.$set(t.formItem,"school",e)},expression:"formItem.school"}},t._l(t.schools,function(e){return a("Option",{key:e.tenantId,attrs:{value:e.tenantId}},[t._v(t._s(e.tenantName))])})):t._e()],1),t._v(" "),a("FormItem",{attrs:{label:"校园号名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name","string"==typeof e?e.trim():e)},expression:"formItem.name"}}),t._v(" "),a("p",{staticClass:"tip"},[t._v("2~10个字，请勿使用含特殊符号或含有明显营销推广意图的媒体名。")])],1),t._v(" "),a("FormItem",{attrs:{label:"校园号介绍",prop:"description"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入...",maxlength:100},model:{value:t.formItem.description,callback:function(e){t.$set(t.formItem,"description",e)},expression:"formItem.description"}}),t._v(" "),a("p",{staticClass:"tip"},[t._v("0~100个字，要求内容完整通顺，请勿添加任何联系方式如微博、手机号、QQ")])],1),t._v(" "),a("FormItem",{attrs:{label:"校园号头像",prop:"avatar"}},[a("upload-img",{attrs:{option:t.avatarOpt},on:{success:t.uploadAvatarSucc,delete:t.deleteUploadAvatar}}),t._v(" "),a("p",{staticClass:"tip"},[t._v("要求清晰、健康、代表品牌形象\n                    "),a("br"),t._v(" 请勿使用二维码，最大5M，200x200像素")])],1),t._v(" "),a("FormItem",{attrs:{label:"个人主页背景",prop:"backgroundImg"}},[a("upload-img",{attrs:{showWidth:375,showHeight:108,cropOption:t.bgImgCropOption,option:t.bgImgOpt},on:{success:t.uploadBackgroundImgSucc,delete:t.deleteUploadBackgroundImg}})],1),t._v(" "),a("FormItem",{attrs:{label:"校园号认证"}},[a("upload-img",{attrs:{option:t.certificateOpt},on:{success:t.uploadCertificateSucc,delete:t.deleteUploadCertificate}}),t._v(" "),a("p",{staticClass:"tip"},[t._v("提供经学校核实的合法性证明材料，要求清晰的证明照片，最大5M，不得超过3张")])],1)],1)],1):t._e(),t._v(" "),0===t.current?a("div",{staticClass:"bottom"},[a("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")]),t._v(" "),a("Button",{staticClass:"btn",staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancel}},[t._v("返回")])],1):t._e(),t._v(" "),1===t.current?a("div",{staticClass:"bottom"},[a("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),a("Button",{staticClass:"btn",staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.prev}},[t._v("上一步")]),t._v(" "),a("div",{staticClass:"bh-mt-16"},[a("Checkbox",{staticStyle:{"margin-left":"90px"},model:{value:t.isAgree,callback:function(e){t.isAgree=e},expression:"isAgree"}},[t._v("我已阅读并同意"),a("a",{on:{click:function(e){e.preventDefault(),t.viewProtocol(e)}}},[t._v("《校园号用户注册协议》")])])],1)],1):t._e()])},staticRenderFns:[]};var He=a("VU/8")(Ge,qe,!1,function(t){a("peFq")},"data-v-5b435772",null).exports,We={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"head"},[t._v("今日校园校园号使用服务协议")]),t._v(" "),a("div",{staticClass:"con"},[t._v('\n        欢迎您使用今日校园校园号平台！ 为使用今日校园校园号的相关服务，您应当阅读并遵守《今日校园校园号使用服务协议》（以下简称“本协议”）的全部条款，特别是涉及免除或者限制责任的条款、权利许可和信息使用的条款、法律适用和争议解决条款等。其中，免除或者限制责任条款等重要内容将以加粗形式提示您注意，您应重点阅读。除非您已阅读并接受本协议的所有条款，否则您无权使用校园号相关服务。您在进行注册过程中点击"同意"\n        按钮（或实际使用今日校园校园号服务）即表示您完全接受本服务协议的各项规则、规范。 如您未满18周岁，请在法定监护人的陪同下阅读本协议条款，并特别注意未成年人使用条款。\n\n        '),a("h5",[t._v("一、 协议范围 ")]),t._v(" "),a("p",[t._v("\n            1.1本协议是您与江苏金智教育信息股份有限公司（以下简称“金智教育”）就您使用今日校园校园号平台所涉及的全部行为所订立的权利义务规范。\n        ")]),t._v(" "),a("p",[t._v("1.2“用户”指所有直接或间接获取和使用校园号相关服务的使用者，包括自然人、法人和其他组织等。在本协议中称为“用户”或称“您”。")]),t._v(" "),a("p",[t._v("1.3“今日校园”指金智教育所有的一款服务于大学师生及校方职能部门、学生组织等用户的应用。 ")]),t._v(" "),a("p",[t._v("1.4“校园号平台”是金智教育借助移动互联网产品—今日校园对校方职能部门、学生组织、自然人、法人或其他组织所开放的内容分发渠道。您注册校园号平台后可以在平台上通过上传、发布、提供链接等各种形式传播内容（包括文字、图片、视频等），向用户传播信息、与用户交流互动等。")]),t._v(" "),a("p",[t._v("1.4本协议内容同时包括金智教育已经发布及后续可能不断发布的关于今日校园校园号相关服务的相关协议、规则等内容。前述内容一经正式发布，并以适当的方式送达用户（如系统通知等），即为本协议不可分割的组成部分，您应同样遵守。")]),t._v(" "),a("h5",[t._v("二、帐号注册与使用 ")]),t._v(" "),a("p",[t._v("2.1您在使用校园号服务前需要注册一个平台账号，您在注册时需提供身份证明材料及认证材料（如您的姓名、学工号、校方职能部门证明材料、学生组织证明材料、企业法人营业执照等），并注意及时更新。 ")]),t._v(" "),a("p",[t._v("2.2为更好地使用校园号的各项服务，请您按照相关法律法规及校园号平台要求完成实名认证，并对您提供的材料的真实性、合法性、准确性和有效性承担责任。金智教育有权核查您提交的材料，若您提交的材料或填写信息不完整或不准确，则您有可能无法使用校园号服务或在使用过程中受到限制。")]),t._v(" "),a("p",[t._v("2.3您理解并承诺，您的帐号名称、头像等注册信息中不得违反法律法规的规定，不得违反公共秩序、社会道德风尚等，否则金智教育可对您的帐号进行暂停使用或注销等处理，并向主管机关报告。")]),t._v(" "),a("p",[t._v("2.4您应妥善保管您的帐号信息，并对此帐号下发生的一切活动承担全部法律责任。不向任何第三方透露帐号信息或密码，如出现或怀疑帐号和密码遭到他人使用，请尽快通知金智教育，以免您的利益受到损失。")]),t._v(" "),a("p",[t._v("2.5今日校园校园号帐号的所有权归金智教育所有，您完成注册后可获得帐号的使用权，可以登陆并在校园号平台上制作、复制、发布、传播内容。金智教育禁止任何赠与、借用、租用、转让或售卖帐号等行为，如您违反本协议内容，金智教育有权对帐号进行处理（包括但不限于暂停使用、注销或停止提供服务）而不承担任何法律责任，由此导致的一切损失由您自行承担。如您因违反本协议给金智教育或第三方造成损失的，您应当依法承担相应责任。")]),t._v(" "),a("h5",[t._v("三、用户个人信息保护 ")]),t._v(" "),a("p",[t._v("3.1保护用户个人信息是金智教育的一项基本原则，金智教育将会采取合理措施保护用户个人信息。除法律法规规定的情形外，未经用户许可金智教育不会向第三方公开、透露用户个人信息。 ")]),t._v(" "),a("p",[t._v("3.2金智教育将运用各种安全技术和程序建立完善的管理制度来保护您的个人信息，防止信息泄露、损毁、丢失。")]),t._v(" "),a("p",[t._v("3.3一般情况下，您可随时浏览、修改自己提交的个人身份信息，但出于安全性和身份识别（如帐号密码找回、帐号申诉服务等），您理解并同意您可能无法修改注册时提供的初始注册信息或其他验证信息。 ")]),t._v(" "),a("p",[t._v("3.4为了更好地向您提供服务，金智教育有可能向关联方、控制方、合作方分享提供服务所必须的个人信息，但公司及其关联方、控制方、合作方无权将共享的个人信息用于任何其他用途，除非是根据有关法律法规的规定或经过您的同意。")]),t._v(" "),a("p",[t._v("3.5金智教育非常重视对未成年人个人信息的保护。如您未满18周岁，在使用今日校园校园号服务前，应事先取得您的家长或法定监护人的书面同意。")]),t._v(" "),a("p",[t._v("3.6在使用校园号服务的过程中，您有可能了解、接收或接触到包括但不限于其他用户在内的个人信息，您了解并承诺对上述信息予以充分尊重，不会以任何形式搜集、复制、存储、传播或以任何其他方式使用其他用户的个人信息，否则，由此产生的一切后果由您自行承担。")]),t._v(" "),a("h5",[t._v("四、使用规范 ")]),t._v(" "),a("p",[t._v("4.1信息内容规范")]),t._v(" "),a("p",[t._v("4.1.1本协议所称信息内容是指用户在使用校园号服务过程中所制作、复制、发布、传播的任何内容，包括但不限于帐号头像、名称、帐号说明等注册信息及认证材料，或文字、语音、图片、视频、图文等发送、回复或自动回复消息和相关链接页面，以及其他使用校园号服务所产生的内容。")]),t._v(" "),a("p",[t._v("4.1.2金智教育一直致力于为用户创造文明健康、规范有序的网络环境，您不得利用校园号平台制作、复制、发布、传播任何干扰校园号平台正常运营的内容，包括但不限于：")]),t._v(" "),a("p",[t._v("（1）危害国家安全统一、破坏社会稳定、违反公序良俗、侮辱、诽谤、淫秽、暴力以及任何违反国家法律法规的内容；（2）侵害他人名誉权、肖像权、知识产权、商业秘密等合法权利的内容； （3）涉及他人隐私、个人信息或资料的内容；\n            （4）含有骚扰信息、广告信息、垃圾信息的内容； （5）谣言、虚假信息或其他含有不实信息的内容； （6）其他违反法律法规、政策及公序良俗、社会公德或干扰校园号平台正常运营和侵犯其他用户或第三方合法权益的内容。")]),t._v(" "),a("p",[t._v("4.2用户行为规范 ")]),t._v(" "),a("p",[t._v("4.2.1本协议所称用户行为是指用户使用校园号服务所进行的任何行为，包括但不限于注册登陆、帐号运营、管理及推广以及其他行为。 4.2.2您在使用校园号服务过程中，不得进行如下行为，包括但不限于：")]),t._v(" "),a("p",[t._v("（1）提交、发布虚假信息； （2）仿冒、混淆他人帐号名称、头像、功能介绍或发布内容等，或冒充、利用他人名义进行相关活动； （3）虚构事实、隐瞒真相以误导、欺骗他人； （4）强制、诱导其他用户关注帐号、点击链接页面或分享信息；\n            （5）侵害他人名誉权、肖像权、知识产权、商业秘密等合法权利； （6）未经金智教育书面许可使用插件、外挂或通过其他第三方工具、平台或任何服务接入本服务和相关系统； （7）利用校园号平台及帐号从事包括但不限于诈骗，制作或销售违禁物品、管制物品以及其他违法犯罪活动；\n            （8）制作、发布与以上行为相关的方法、工具，或对此类方法、工具进行运营或传播，无论这些行为是否为商业目的； （9）任何导致或可能导致金智教育与第三方产生纠纷、争议或诉讼的行为； （10）其他违反法律法规规定、侵犯其他用户合法权益、干扰产品正常运营或未经金智教育明示授权的行为。\n            4.3如您需要对今日校园校园号平台内容创作衍生品或投放商业广告，请您另外提交书面申请，在符合条件且经金智教育同意下，方可通过平台进行广告或推广等商业活动。")]),t._v(" "),a("p",[t._v("4.4您理解并同意，校园号平台仅为用户提供信息分享、传播及获取的平台，您需为自己注册帐号下的一切行为负责，包括您所发表的任何内容以及由此产生的任何后果。您应对本服务中的内容自行加以判断，并承担因使用内容而引起的所有风险，包括因对内容的正确性、完整性或实用性的依赖而产生的风险。金智教育无法且不会对因前述风险而导致的任何损失或损害承担责任。")]),t._v(" "),a("p",[t._v("4.5您应保证：不对平台、技术接口、本服务数据进行反向工程（reverse engineer）、反向编译（decompile）或反汇编（disassemble）；不对平台、技术接口、本服务数据进行内容、功能、逻辑及界面等任何方面的修改；不得将平台、技术接口、本服务数据或业务用户本协议以外目的。")]),t._v(" "),a("p",[t._v("4.6在任何时候，您均可以向金智教育投诉、举报各类违法违规行为、违法传播活动、违法有害信息等内容，金智教育将及时受理和处理用户投诉举报，以共同营造文明、有序的网络环境。 ")]),t._v(" "),a("h5",[t._v("五、权利声明 ")]),t._v(" "),a("p",[t._v("5.1校园号平台涉及的数据中属于金智教育的数据，除法律另有规定外，金智教育享有全部权利，且是金智教育的商业秘密。未经金智教育书面同意，您不得为本协议约定之外的任何目的使用前述数据，并且不得以任何形式将前述数据提供给他人。")]),t._v(" "),a("p",[t._v("5.2如您停止使用校园号服务或服务被终止或取消，金智教育有权从服务器上永久地删除您的数据。在服务停止、终止或取消后，金智教育没有义务向您返还任何数据。 ")]),t._v(" "),a("p",[t._v("5.3金智教育在今日校园校园号服务中提供的内容（包括但不限于网页、文字、图片、音频、视频、图表、版面设计、电子文档等）的知识产权归金智教育所有。未经金智教育许可，任何人不得擅自使用上述内容。")]),t._v(" "),a("p",[t._v("5.4除另有特别声明外，金智教育提供校园号服务时所依托的软件的著作权、专利权及其他知识产权均归金智教育所有。 ")]),t._v(" "),a("p",[t._v("5.5您在使用校园号服务过程中上传、发布的任何内容的知识产权归您或原始权利人所有。您确认并同意金智教育有权以自己名义或委托专业第三方对侵犯您上传、发布的享有知识产权的内容进行维权，维权形式包括但不限于：监测侵权行为、发送维权函、提起诉讼或仲裁、调解、和解等，金智教育有权对维权事宜做出决策并独立实施。")]),t._v(" "),a("p",[t._v("5.6为向您提供更优质的服务，您理解并同意授予金智教育及其关联方、合作方对您在校园号平台上上传、发布的任何内容在全球范围内享有永久的、不可撤销的、免费的、非独家的使用权。 ")]),t._v(" "),a("p",[t._v("5.7金智教育在校园号服务中使用的包括但不限于“今日校园”、“校园号”、“cpdaily.com”在内的任何商业标识、域名或其他品牌特征等，其商标权、著作权或其他权利均归金智教育所有。未经金智教育书面同意，您不得将上述内容以任何方式展示、使用或申请注册商标、进行域名注册等，您由于非法使用上述内容给金智教育或他人造成损失的，由您承担相关法律责任。")]),t._v(" "),a("p",[t._v("5.8上述及其他任何校园号服务所包含的内容的知识产权均受到法律保护，未经金智教育、用户或相关权利人的书面许可，任何人不得以任何形式进行使用或创造相关衍生作品。 ")]),t._v(" "),a("h5",[t._v("六、隐私政策 ")]),t._v(" "),a("p",[t._v("6.1金智教育非常重视对您个人隐私的保护，金智教育保证不会将您的注册资料及您在使用校园号服务时存储在校园号平台上的非公开内容用于任何非法用途。")]),t._v(" "),a("p",[t._v("6.2金智教育不对外公开或向第三方提供用的个人信息，但下列情况除外：")]),t._v(" "),a("p",[t._v("（1）事先获得您的明确授权； （2）您自行在网络上公开、分享的信息或其他已合法公开的个人信息； （3）出于向您提供服务所必需的目的，向金智教育的关联方、控制方、合作伙伴分享提供服务所必需的个人信息，公司及其关联方、控制方、合作伙伴无权将共享的个人信息用于任何其他用途；\n            （4）以维护公共利益或学术研究的目的； （5）以合法渠道获取的个人信息； （6）您侵害金智教育及其关联公司的合法权益，为维护前述合法权益且在必要范围内； （7）符合本协议相关条款的规定； （8）根据有关法律法规的要求或按照司法、行政等国家机关、政府部门的要求；\n            （9）为向您提供服务，金智教育认为有必要的其他情况。 ")]),t._v(" "),a("p",[t._v("6.3在不透露您隐私信息的前提下，金智教育有权对整个用户数据库进行分析并进行商业上的利用。 6.4为了改善校园号平台的服务，向您提供更好的体验，金智教育将可能会自行收集使用或向第三方提供您的非个人隐私信息。")]),t._v(" "),a("h5",[t._v("七、不可抗力及其他免责条款 ")]),t._v(" "),a("p",[t._v("7.1您在使用校园号服务过程中应遵守法律法规、国家政策及本协议的相关要求，因使用校园号服务而产生的行为后果由您自行承担。")]),t._v(" "),a("p",[t._v("7.2您理解并同意，在使用校园号服务的过程中，可能会遇到不可抗力等风险因素，使服务发生中断。不可抗力是指不能预见、不能克服并不能避免且对一方或双方造成重大影响的客观事件，包括但不限于自然灾害如洪水、地震、瘟疫流行和风暴等以及社会事件如战争、动乱、政府行为等。出现上述情况时，金智教育将努力在第一时间进行处理，但因不可抗力给您造成了损失，您同意金智教育无需承担责任。")]),t._v(" "),a("p",[t._v("7.3您理解并同意，除法律法规另有规定外，金智教育对以下情形导致的后果不承担责任：")]),t._v(" "),a("p",[t._v("（1）受到计算机病毒、木马或其他恶意程序、黑客攻击的破坏而引起的损失或风险； （2）用户或金智教育的软件、系统、硬件和通信线路出现故障； （3）用户操作不当或通过非金智教育授权的方式使用校园号服务； （4）用户上传、发布的内容被他人转发、分享，因此等传播可能带来的风险或责任；\n            （5）其他金智教育无法控制或合理预见的情形。 7.4金智教育有权根据法律法规的规定、本协议的约定等对违法违规的内容进行处理，但该权利不构成金智教育的义务或承诺，金智教育不保证能及时发现违法违规行为或进行有效处理。")]),t._v(" "),a("h5",[t._v("八、法律责任")]),t._v(" "),a("p",[t._v("8.1如金智教育发现或收到他人投诉用户违反本协议约定的，金智教育有权不经通知随时对相关内容进行删除、屏蔽，并视行为情节对违规帐号处以包括但不限于警告、限制或禁止使用部分或全部功能、帐号封禁直至注销的处罚，并公告处理结果。金智教育也有权依照本协议的规定，拒绝再向该主体提供服务。如果您发现任何人违反本协议规定或以其他不当的方式使用校园号服务，请立即向金智教育投诉、举报，金智教育将依法进行处理。")]),t._v(" "),a("p",[t._v("8.2您理解并同意，金智教育有权依合理判断对违反有关法律法规或本协议规定的行为进行处罚，对违法违规的任何人士采取适当的法律行动，并依据法律法规保存有关信息向有关部门报告等，用户应独自承担由此而产生的一切法律责任。")]),t._v(" "),a("p",[t._v(" 8.3您理解并同意，因您违反本协议或相关法律法规的规定，导致或产生第三方主张的任何索赔、要求或损失，您应当独立承担责任；给金智教育造成损失的，您也应当一并赔偿。")]),t._v(" "),a("h5",[t._v("九、未成年人使用条款")]),t._v(" "),a("p",[t._v("9.1如您未满18周岁，您应在监护人监护、指导并获得监护人同意的情况下约定本协议和使用校园号相关服务。")]),t._v(" "),a("p",[t._v("9.2未成年人应注意提高安全意识，加强自我保护，学习正确使用网络。")]),t._v(" "),a("p",[t._v("9.3监护人应对未成年人加强指导，如未成年用户有违反法律法规、本协议内容的，则未成年人及其监护人应按照法律规定承担由此导致的一切后果。")]),t._v(" "),a("h5",[t._v("十、法律适用及管辖")]),t._v(" "),a("p",[t._v("10.1本协议的成立、生效、履行、解释及冲突解决均适用中华人民共和国大陆地区的法律。 ")]),t._v(" "),a("p",[t._v(" 10.2如您和金智教育之间发生任何纠纷或争议，首先应友好协商解决；协商不成的，您同意将纠纷或争议提交本协议签订地有管辖权的法院管辖。")]),t._v(" "),a("p",[t._v("10.3本协议的签订地为中华人民共和国江苏省南京市江宁区。")]),t._v(" "),a("h5",[t._v("十一、其他")]),t._v(" "),a("p",[t._v("11.1您使用本服务即视为您已阅读并同意接受本协议的约束。金智教育有权在必要时修改本协议条款，金智教育会将修改后的协议予以发布，您应及时查阅最新版本的条款。如您同意接受修改的协议，您将可以继续使用校园号的相关服务；如您不接受，应立即停止使用相关服务。")]),t._v(" "),a("p",[t._v("11.2本协议所有条款的标题仅为阅读方便，本身并无实际涵义，不能作为本协议涵义解释的依据。")]),t._v(" "),a("p",[t._v("11.3如本协议中的任何条款无论因何种原因完全或部分无效或不具有执行力，本协议的其余条款仍应有效并且有约束力。")])])])}]};var Qe=a("VU/8")({data:function(){return{}}},We,!1,function(t){a("PB7y")},"data-v-171b1af8",null).exports,Ye={data:function(){return{tenantInfo:{},avatarCheck:!0,mode:"view",formItem:{school:"",name:"",description:"",bgImg:[],avatar:[],certificate:[]},avatarOpt:{type:"avatar",clip:!0,maxSize:5e3,multiple:!1,limit:1,defaultList:[]},bgImgOpt:{type:"avatar",clip:!0,maxSize:5e3,multiple:!1,limit:1,defaultList:[]},bgImgCropOption:{width:375,height:108},certificateOpt:{visible:!1,maxSize:5e3,multiple:!1,limit:3,defaultList:[]},ruleValidate:{school:[{required:!0,message:"所属学校不能为空",trigger:"blur"}],name:[{required:!0,validator:(t="名称不能为空",function(e,a,s){var i=[];a||i.push(new Error(t)),/\s/.test(a)&&i.push(new Error("校园号名称不能包含空格")),s(i)}),trigger:"blur"},{type:"string",min:2,max:10,message:"名称必须在2-10字之间",trigger:"blur"}],description:[{required:!0,message:"介绍不能为空",trigger:"blur"},{type:"string",min:0,max:100,message:"介绍必须在0-100字之间",trigger:"blur"}],avatar:[{required:!0,validator:function(t){return function(e,a,s){var i=[];(!a||a.length<1)&&i.push(new Error(t)),s(i)}}("头像不能为空")}]},schools:[]};var t},components:{uploadImg:je},methods:{isNameDisable:function(){return"AUTHED"===this.formItem.authStatus?"true":"false"},chooseFunction:function(){this.type=1},chooseStudent:function(){this.type=2},submit:function(){var t=this;this.$refs.form.validate(function(e){e&&t.isSubmit()})},cancel:function(){this.formItem&&"AUTHED"===this.formItem.authStatus?this.$router.replace("/home"):(Te.$emit("switchMedia",-1),this.$router.replace("/outer/medialist"))},isSubmit:function(){var t=this;"AUTHED"!==this.formItem.authStatus&&0===this.formItem.certificate.length?this.$Modal.confirm({title:"请确认",content:"未提交认证申请将不能使用校园号平台功能，确定提交吗?",okText:"确定",cancelText:"取消",loading:!0,onOk:function(){t.$Modal.remove(),t.submitOk()}}):t.submitOk()},submitOk:function(){var t=this,e=this.formItem,a={name:e.name,wid:e.wid,tenantId:e.school,description:e.description,backgroundImg:e.bgImg.join(","),icon:e.avatar.join(","),authMaterials:e.certificate.join(","),mediaType:1===this.type?"CLUB":"OFFICIAL"};console.log(a),u.httpPost(f.updateMedia,a,{}).then(function(e){console.log(e),"0"==e.code?(t.$Message.success("校园号更新成功"),t.formItem&&"AUTHED"===t.formItem.authStatus?t.$router.replace("/home"):(t.$router.replace("/outer/medialist"),Te.$emit("switchMedia",-1))):t.$Message.error("校园号更新失败:"+e.message)}).catch(function(e){t.$Message.error("校园号更新失败："+e.message)})},getAccountSchools:function(){var t=this;u.httpGet(f.accountSchools,{},u.handler.DATAS).then(function(e){t.schools=e}).catch(function(e){t.$Message.error("异常："+e.message)})},uploadAvatarSucc:function(t){this.formItem.avatar.push(t.url),this.$refs.form.validateField("avatar")},uploadBackgroundImgSucc:function(t){this.formItem.bgImg.push(t.url)},deleteUploadAvatar:function(t){this.formItem.avatar.splice(0,1)},deleteUploadBackgroundImg:function(t){this.formItem.bgImg.splice(0,1)},uploadCertificateSucc:function(t){this.formItem.certificate.push(t.url)},deleteUploadCertificate:function(t){var e=this.formItem.certificate;e.splice(e.indexOf(t.url),1)},viewProtocol:function(){window.open("#/outer/protocol")},getMediaInfo:function(){var t=this;u.httpGet(f.mediaInfo+"/"+this.$route.params.mediaId,{},u.handler.DATAS).then(function(e){if(console.log(e),t.formItem=e,t.formItem.school=t.formItem.tenantId,"AUTHED"===e.authStatus&&(t.certificateOpt.disable=!0),t.formItem.avatar=[],t.formItem.icon&&(t.formItem.avatar.push(t.formItem.icon),t.avatarOpt.defaultList.push({url:t.formItem.icon})),t.formItem.bgImg=[],t.formItem.backgroundImg&&(t.formItem.bgImg.push(t.formItem.backgroundImg),t.bgImgOpt.defaultList.push({url:t.formItem.backgroundImg})),t.formItem.certificate=[],t.formItem.authMaterials){var a=t.formItem.authMaterials.split(",");if(a.length>0)for(var s=0;s<a.length;s++)t.formItem.certificate.push(a[s]),t.certificateOpt.defaultList.push({url:a[s]})}t.avatarCheck=!1,t.$nextTick(function(){t.avatarCheck=!0})}).catch(function(e){t.$Message.error("获取校园号信息失败："+e.errMsg)})},getMediaTenant:function(){var t=this;u.httpGet(f.mediaTenant+"/"+this.$route.params.mediaId,{},u.handler.DATAS).then(function(e){e&&(t.tenantInfo=e)}).catch(function(t){console.log(t)})}},mounted:function(){this.getAccountSchools();var t=this.$route.params.mediaId;t&&(this.getMediaInfo(),this.getMediaTenant(),Te.$emit("switchMedia",t))}},Je={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apply-media"},[a("p",{staticClass:"title"},[t._v("校园号资料")]),t._v(" "),a("div",{staticClass:"step-two"},[a("Form",{ref:"form",staticClass:"form",attrs:{model:t.formItem,"label-width":120,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"所属学校",prop:"school"}},[a("Input",{attrs:{placeholder:"请输入",disabled:""},model:{value:t.tenantInfo.tenantName,callback:function(e){t.$set(t.tenantInfo,"tenantName",e)},expression:"tenantInfo.tenantName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"校园号名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入",disabled:"AUTHED"===t.formItem.authStatus,maxlength:10},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name","string"==typeof e?e.trim():e)},expression:"formItem.name"}}),t._v(" "),a("p",{staticClass:"tip"},[t._v("2~10个字，请勿使用含特殊符号或含有明显营销推广意图的媒体名。")])],1),t._v(" "),a("FormItem",{attrs:{label:"校园号介绍",prop:"description"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入...",maxlength:100},model:{value:t.formItem.description,callback:function(e){t.$set(t.formItem,"description","string"==typeof e?e.trim():e)},expression:"formItem.description"}}),t._v(" "),a("p",{staticClass:"tip"},[t._v("0~100个字，要求内容完整通顺，请勿添加任何联系方式如微博、手机号、QQ")])],1),t._v(" "),a("FormItem",{attrs:{label:"校园号头像",prop:"avatar"}},[t.avatarCheck?a("upload-img",{attrs:{option:t.avatarOpt},on:{success:t.uploadAvatarSucc,delete:t.deleteUploadAvatar}}):t._e(),t._v(" "),a("p",{staticClass:"tip"},[t._v("要求清晰、健康、代表品牌形象\n                    "),a("br"),t._v(" 请勿使用二维码，最大5M，200x200像素")])],1),t._v(" "),a("FormItem",{attrs:{label:"个人主页背景",prop:"bgImg"}},[t.avatarCheck?a("upload-img",{attrs:{showWidth:375,showHeight:108,cropOption:t.bgImgCropOption,option:t.bgImgOpt},on:{success:t.uploadBackgroundImgSucc,delete:t.deleteUploadBackgroundImg}}):t._e()],1),t._v(" "),a("FormItem",{attrs:{label:"校园号认证"}},[t.avatarCheck?a("upload-img",{attrs:{option:t.certificateOpt},on:{success:t.uploadCertificateSucc,delete:t.deleteUploadCertificate}}):t._e(),t._v(" "),a("p",{staticClass:"tip"},[t._v("提供经学校核实的合法性证明材料，要求清晰的证明照片，最大5M，不得超过3张")])],1)],1)],1),t._v(" "),"edit"===t.mode?a("div",{staticClass:"bottom"},[a("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),a("Button",{staticClass:"btn",staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancel}},[t._v("取消")])],1):t._e(),t._v(" "),"view"===t.mode?a("div",{staticClass:"bottom"},[a("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),a("Button",{staticClass:"btn",staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancel}},[t._v("取消")])],1):t._e()])},staticRenderFns:[]};var Ke=a("VU/8")(Ye,Je,!1,function(t){a("VGQv")},"data-v-7531a53c",null).exports,Xe={data:function(){return{bcs:[{path:"/home/replysetting",name:"回复设置"}],mode:"view",formValidate:{name:"",content:"",poster:"static/default-cover.png"},avatarOpt:{type:"avatar",clip:!0,maxSize:5e3,multiple:!1,limit:1,defaultList:[]},certificateOpt:{visible:!1,maxSize:5e3,multiple:!1,limit:3,defaultList:[]},ruleValidate:{name:[{required:!0,validator:(t="名称不能为空",function(e,a,s){var i=[];null!==a&&void 0!==a||i.push(new Error(t)),"string"==typeof a&&""===a.trim()&&i.push(new Error(t)),"string"==typeof a&&(/^\s/.test(a)||/\s$/.test(a))&&i.push(new Error(t)),Array.isArray(a)&&0===a.length&&i.push(new Error(t)),s(i)}),trigger:"blur"},{type:"string",max:100,message:"名称不能超过100个字",trigger:"blur"}],content:[{required:!0,validator:function(t,e,a){var s=[];e.replace(/<[^img|>]+>/g,"").trim()||s.push(new Error("内容不能为空")),e.length>500&&s.push(new Error("内容不能超过500个字符")),a(s)}}],poster:[{required:!0,message:"封面不能为空"}]},uploadFile:f.uploadFile,uploadFileBase64Url:f.convertBase64,isAgree:!1,schools:[]};var t},components:{uploadImg:je,breadcrumb:I,editor:It,posterUploader:ke},methods:{posterUploaded:function(t){this.formValidate.poster=t},editorChange:function(t){this.formValidate.content=t,this.$refs.form.validateField("content")},getReplyInfo:function(){var t=this;u.httpGet(f.getReplySetting,{},u.handler.DATAS).then(function(e){t.formValidate.name=e.title,t.formValidate.poster=e.img,t.formValidate.content=e.content,t.$refs.editor.setContent(t.formValidate.content)}).catch(function(e){t.$Message.error("异常："+e.message)})},deleteUploadAvatar:function(t){this.formItem.avatar.splice(0,1)},handleSubmit:function(){var t=this;this.$refs.form.validate(function(e){e&&t.Save()})},Save:function(){var t=this,e=this.formValidate,a={title:e.name,content:e.content,img:"static/default-cover.png"===e.poster?"cpdaily-media/default-cover.png":e.poster,originalLink:"",summary:e.name};u.httpPost(f.replySettingSave,a,u.handler.CODE).then(function(e){t.$Message.success("保存成功！")}).catch(function(e){t.$Message.error("保存失败!")})}},mounted:function(){this.getReplyInfo()}},Ze={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("breadcrumb",{attrs:{items:t.bcs}}),t._v(" "),a("div",{staticClass:"body-con"},[a("div",{staticClass:"group-header bh-mb-8 bh-mt-4"},[t._v("\n            被关注回复设置\n        ")]),t._v(" "),a("div",{staticClass:"apply-media"},[a("div",{staticClass:"step-two"},[a("Form",{ref:"form",staticClass:"form",attrs:{model:t.formValidate,"label-width":120,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"标题",prop:"name","label-for":"name"}},[a("i-input",{attrs:{placeholder:"不超过100字","element-id":"name",maxlength:100},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"内容",prop:"content"}},[a("editor",{ref:"editor",attrs:{value:t.formValidate.content,"file-upload-url":t.uploadFile},on:{change:t.editorChange}})],1),t._v(" "),a("FormItem",{attrs:{label:"封面",prop:"poster"}},[a("poster-uploader",{attrs:{"upload-file-base64-url":t.uploadFileBase64Url},on:{"on-done":t.posterUploaded}}),t._v(" "),a("div",{staticClass:"poster-img"},[a("img",{attrs:{src:t.formValidate.poster}})])],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)])])],1)},staticRenderFns:[]};var ta=a("VU/8")(Xe,Ze,!1,function(t){a("IeQ6")},"data-v-a3fba2b0",null).exports,ea={data:function(){var t=this;return{bcs:[{name:"操作日志"}],isEditMedia:!1,isAutoReplyShow:!1,isPublishMessageShow:!1,modalObject:{},addTime:"",mediaName:"",tenantName:"",mediaType:"",ownerName:"",statusStr:"",beginDate:"",endDate:"",mediaId:"",totalSize:0,pageNum:1,pageSize:10,logsColumns:[{title:"操作ID",key:"wid",width:150},{title:"操作类型",key:"operateType",width:250,align:"center",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.operateTypeName}},e.row.operateTypeName)}},{title:"操作人",key:"opertatorName",width:100,align:"center",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.operatorName}},e.row.operatorName)}},{title:"操作时间",key:"operateTime",align:"center"},{title:"执行结果",key:"operateResult",width:100,align:"center",ellipsis:!0,render:function(t,e){return t("span",{attrs:{title:e.row.operateResult?"成功":"失败"}},e.row.operateResult?"成功":"失败")}},{title:"操作",key:"wid",width:100,align:"center",render:function(e,a){return e("Button",{props:{type:"text",size:"small"},style:{padding:"0px",color:"#2D8CF0"},on:{click:function(){if(t.modalObject=JSON.parse(a.row.operateContent),"CONFIG_AUTO_REPLY"===a.row.operateType)t.isAutoReplyShow=!0;else if("EDIT_MEDIA_BASIC_INFO"===a.row.operateType)t.modalObject.authMaterials?t.modalObject.authMaterials=t.modalObject.authMaterials.split(","):t.modalObject.authMaterials=[],console.log(t.modalObject),t.isEditMedia=!0;else if("PUSH_MESSAGE"===a.row.operateType){var e="";t.modalObject.groups&&t.modalObject.groups.forEach(function(t,a){e+=0!=a?","+t.groupName:t.groupName}),t.modalObject.users=t.modalObject.sendTotalUserIds.join(","),t.modalObject.groups=e,t.isPublishMessageShow=!0}}}},"查看")}}],logsData:[]}},methods:{goBack:function(){this.$router.go(-1)},onPageSizeChange:function(t){this.pageSize=t,this.pageNum=1,this.getLogs()},onChange:function(t){this.pageNum=t,this.getLogs()},getLogs:function(t){var e=this;this.logsData=[],t&&(this.pageNum=1),function(t){return u.httpPost(f.GET_LOGS,t)}({beginDate:this.beginDate?this.beginDate:null,endDate:this.endDate?this.endDate:null,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){console.log(t),t&&"0"==t.code&&(t.datas.logs.forEach(function(t){"EDIT_MEDIA_BASIC_INFO"===t.operateType?t.operateTypeName="编辑校园号":"PUBLISH_ACTIVITY"===t.operateType?t.operateTypeName="发起活动":"PUSH_MESSAGE"===t.operateType?t.operateTypeName="发送消息":"PUBLISH_FRESH"===t.operateType?t.operateTypeName="发送新鲜事":"CONFIG_AUTO_REPLY"===t.operateType&&(t.operateTypeName="配置自动回复")}),e.logsData=t.datas.logs,e.totalSize=t.datas.total)}).catch(function(t){e.$Message.error(mode+"失败："+t.message)})},getCurrentMediaInfo:function(){var t=this;u.httpGet(f.mediaInfo+"/-1",{},u.handler.DATAS).then(function(e){console.log(e),t.mediaId=e.wid,t.mediaName=e.name,t.tenantName=e.tenantName?e.tenantName:"/",t.mediaType=e.mediaType,t.ownerName=e.ownerName,t.statusStr="ENABLE"===e.status?"启用中":"已停用"}).catch(function(e){t.$Message.error("获取校园号信息失败："+e.message)})},onAddTimeChange:function(t){t&&2===t.length&&t[1]?(this.beginDate=t[0],this.endDate=t[1]):(this.beginDate="",this.endDate="")}},mounted:function(){this.getLogs(),this.getCurrentMediaInfo()},created:function(){},components:{breadcrumb:I}},aa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"media-logs"},[a("breadcrumb",{attrs:{items:t.bcs}}),t._v(" "),a("div",{staticClass:"content-container"},[a("div",{staticClass:"header"},[a("p",{staticClass:"header-title"},[t._v("校园号信息")]),t._v(" "),a("Row",{staticClass:"header-item",staticStyle:{"margin-top":"20px"}},[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"title"},[t._v("校园号昵称：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.mediaName))])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"title"},[t._v("校园号ID：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.mediaId))])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"title"},[t._v("所属学校：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.tenantName))])])],1),t._v(" "),a("Row",{staticClass:"header-item",staticStyle:{"margin-top":"10px"}},[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"title"},[t._v("类型：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s("CLUB"===t.mediaType?"学生组织":"职能部门"))])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"title"},[t._v("拥有者：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.ownerName))])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"title"},[t._v("状态：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.statusStr))])])],1)],1),t._v(" "),a("div",{staticClass:"list-container"},[a("p",{staticClass:"header-title"},[t._v("操作日志")]),t._v(" "),a("div",{staticClass:"selection-container"},[a("span",{staticStyle:{"font-size":"12px",color:"#464C5B","letter-spacing":"0","font-weight":"500"}},[t._v("选择日期")]),t._v(" "),a("DatePicker",{staticStyle:{"margin-left":"20px",width:"300px"},attrs:{type:"daterange",placeholder:"请选择日期",format:"yyyy-MM-dd"},on:{"on-change":t.onAddTimeChange},model:{value:t.addTime,callback:function(e){t.addTime=e},expression:"addTime"}}),t._v(" "),a("Button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary"},on:{click:function(e){t.getLogs(!0)}}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"log-data-list"},[a("Table",{attrs:{border:"",columns:t.logsColumns,data:t.logsData}})],1),t._v(" "),a("div",{staticClass:"bottom-page"},[a("Page",{attrs:{total:t.totalSize,current:t.pageNum,"show-elevator":"","show-sizer":"",placement:"top","page-size":t.pageSize},on:{"on-page-size-change":t.onPageSizeChange,"on-change":t.onChange}})],1)])]),t._v(" "),a("Modal",{attrs:{width:"500"},model:{value:t.isAutoReplyShow,callback:function(e){t.isAutoReplyShow=e},expression:"isAutoReplyShow"}},[a("p",{staticStyle:{color:"rgb(73, 80, 96)","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("日志详情-配置自动回复")])]),t._v(" "),a("div",{staticClass:"auto-replay-content"},[a("div",{staticClass:"title"},[a("Row",[a("Col",{attrs:{span:"4"}},[a("span",{staticClass:"title-name"},[t._v("标题:")])]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("span",{staticClass:"title-title"},[t._v(t._s(t.modalObject.title))])])],1)],1),t._v(" "),a("div",{staticClass:"content",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("span",{staticClass:"title-name"},[t._v("内容:")])]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("div",{staticClass:"content-content",staticStyle:{"max-height":"300px",overflow:"auto"},domProps:{innerHTML:t._s(t.modalObject.content)}})])],1)],1),t._v(" "),a("div",{staticClass:"bg",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("span",{staticClass:"title-name"},[t._v("封面:")])]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("img",{staticStyle:{"object-fit":"cover"},attrs:{src:t.modalObject.img,width:"350",height:"200"}})])],1)],1)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.isAutoReplyShow=!1}}},[t._v("确定")])],1)]),t._v(" "),a("Modal",{attrs:{width:"550"},model:{value:t.isEditMedia,callback:function(e){t.isEditMedia=e},expression:"isEditMedia"}},[a("p",{staticStyle:{color:"rgb(73, 80, 96)","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("日志详情-编辑校园号")])]),t._v(" "),a("div",{staticClass:"edit-media-content"},[a("div",{staticClass:"title"},[a("Row",[a("Col",{attrs:{span:"5"}},[a("span",{staticClass:"title-name"},[t._v("名称:")])]),t._v(" "),a("Col",{attrs:{span:"19"}},[a("span",{staticClass:"title-title"},[t._v(t._s(t.modalObject.name))])])],1)],1),t._v(" "),a("div",{staticClass:"icon",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"5"}},[a("span",{staticClass:"title-name"},[t._v("图标:")])]),t._v(" "),a("Col",{attrs:{span:"19"}},[a("img",{staticStyle:{"object-fit":"cover"},attrs:{src:t.modalObject.icon,width:"50",height:"50"}})])],1)],1),t._v(" "),a("div",{staticClass:"background-img",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"5"}},[a("span",{staticClass:"title-name"},[t._v("个人主页背景:")])]),t._v(" "),a("Col",{attrs:{span:"19"}},[t.modalObject.backgroundImg?a("img",{staticStyle:{"object-fit":"cover"},attrs:{src:t.modalObject.backgroundImg,width:"375",height:"108"}}):t._e(),t._v(" "),t.modalObject.backgroundImg?t._e():a("span",[t._v("未设置")])])],1)],1),t._v(" "),a("div",{staticClass:"tenant-id",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"5"}},[a("span",{staticClass:"title-name"},[t._v("租户:")])]),t._v(" "),a("Col",{attrs:{span:"19"}},[a("span",{staticClass:"title-title"},[t._v(t._s(t.modalObject.tenantName))])])],1)],1),t._v(" "),a("div",{staticClass:"media-type",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"5"}},[a("span",{staticClass:"title-name"},[t._v("类型:")])]),t._v(" "),a("Col",{attrs:{span:"19"}},[a("span",{staticClass:"title-title"},[t._v(t._s("OFFICIAL"===t.modalObject.mediaType?"学校职能部门":"学生组织"))])])],1)],1),t._v(" "),a("div",{staticClass:"media-type",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"5"}},[a("span",{staticClass:"title-name"},[t._v("简介:")])]),t._v(" "),a("Col",{attrs:{span:"19"}},[a("span",{staticClass:"title-title"},[t._v(t._s(t.modalObject.description))])])],1)],1),t._v(" "),a("div",{staticClass:"auth-materials",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"5"}},[a("span",{staticClass:"title-name"},[t._v("认证材料:")])]),t._v(" "),a("Col",{attrs:{span:"19"}},t._l(t.modalObject.authMaterials,function(t,e){return a("img",{key:e,staticStyle:{"object-fit":"cover"},attrs:{src:t,width:"100",height:"100"}})}))],1)],1)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.isEditMedia=!1}}},[t._v("确定")])],1)]),t._v(" "),a("Modal",{attrs:{width:"500"},model:{value:t.isPublishMessageShow,callback:function(e){t.isPublishMessageShow=e},expression:"isPublishMessageShow"}},[a("p",{staticStyle:{color:"rgb(73, 80, 96)","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("日志详情-发送消息")])]),t._v(" "),a("div",{staticClass:"publish-message-content"},[a("div",{staticClass:"title"},[a("Row",[a("Col",{attrs:{span:"4"}},[a("span",{staticClass:"title-name"},[t._v("标题:")])]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("span",{staticClass:"title-title"},[t._v(t._s(t.modalObject.title))])])],1)],1),t._v(" "),a("div",{staticClass:"content",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("span",{staticClass:"title-name"},[t._v("内容:")])]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("div",{staticClass:"content-content",staticStyle:{"max-height":"300px","min-height":"100px",overflow:"auto"},domProps:{innerHTML:t._s(t.modalObject.content)}})])],1)],1),t._v(" "),a("div",{staticClass:"bg",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("span",{staticClass:"title-name"},[t._v("封面:")])]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("img",{staticStyle:{"object-fit":"cover"},attrs:{src:t.modalObject.img,width:"200",height:"100"}})])],1)],1),t._v(" "),a("div",{staticClass:"groups",staticStyle:{"margin-top":"10px"}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("span",{staticClass:"title-name"},[t._v("用户组:")])]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("span",{staticClass:"title-title"},[t._v(t._s(t.modalObject.groups))])])],1)],1),t._v(" "),a("div",{staticClass:"groups",staticStyle:{"margin-top":"10px",display:"none"}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("span",{staticClass:"title-name"},[t._v("用户:")])]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("span",{staticClass:"title-title",staticStyle:{"max-height":"20px",display:"block",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(t.modalObject.users))])])],1)],1)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.isPublishMessageShow=!1}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var sa=a("VU/8")(ea,aa,!1,function(t){a("UknY"),a("o2Zw")},"data-v-4cbe8fae",null).exports,ia={data:function(){return{msgContent:"",attachments:""}},computed:{cAtts:function(){return this.attachments?this.attachments.split(",").map(function(t){var e=t.substr(t.lastIndexOf(".")+1).toLowerCase(),a=["doc","jpg","jpeg","pdf","png","pptx","xls","zip"].find(function(t){return t==e})||"default";return{type:e,url:t,icon:"static/attach_"+a+"@2x.png",name:t.substr(t.lastIndexOf("/")+1),isImg:["jpg","jpeg","png","gif","bmp"].find(function(t){return t==e})}}):[]}},methods:{viewD:function(t){BH_MOBILE_SDK.file.filePreview(t.url,t.type,t.name)},getMediaInfo:function(){var t=this;BH_MOBILE_SDK.UI.toggleLoading(!0);var e=this.$route.params.msgId;u.httpGet(f.getMsgView+"/"+e,{},u.handler.DATAS).then(function(e){console.log(e),BH_MOBILE_SDK.UI.toggleLoading(!1),t.msgContent=e.content,t.attachments=e.attachments}).catch(function(e){BH_MOBILE_SDK.UI.toggleLoading(!1),t.$Message.error("获取消息内容失败："+e.errMsg)})}},mounted:function(){var t=this;BH_MOBILE.init(function(){t.getMediaInfo()})}},na={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"msg-view"},[a("div",{domProps:{innerHTML:t._s(t.msgContent)}}),t._v(" "),a("div",{staticClass:"attachments"},t._l(t.cAtts,function(e){return a("div",{staticClass:"attach-item"},[a("div",{staticClass:"attach-icon"},[a("img",{attrs:{width:"30",src:e.icon}})]),t._v(" "),a("div",{staticClass:"name"},[t._v("\n                "+t._s(e.name)+"\n            ")]),t._v(" "),a("a",{on:{click:function(a){a.preventDefault(),t.viewD(e)}}},[t._v("查看")])])}))])},staticRenderFns:[]};var oa=a("VU/8")(ia,na,!1,function(t){a("K3wH"),a("Lvpm")},"data-v-31849786",null).exports,ra={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main-body"},[e("iframe",{attrs:{src:"https://q.yiban.cn/"}})])}]};var ca=a("VU/8")({data:function(){return{}},components:{},methods:{},mounted:function(){}},ra,!1,function(t){a("tuuS")},"data-v-034f8ef0",null).exports,la=new VueRouter({routes:[{path:"/home",name:"home",component:C,redirect:"/home/message",children:[{path:"message",name:"message",component:Ct},{path:"publishmessage/:type/:messageId",name:"publishmessage",component:oe},{path:"activitylist",name:"activitylist",component:le},{path:"addnewactivity",name:"addnewactivity",component:$e},{path:"group",name:"group",component:L},{path:"newgroup",name:"newgroup",component:rt},{path:"adduser",name:"adduser",component:dt},{path:"viewgroup",name:"viewgroup",component:mt},{path:"replysetting",name:"replysetting",component:ta},{path:"logs",name:"logs",component:sa},{path:"kuaida",name:"kuaida",component:ca}]},{path:"/",redirect:"/outer"},{path:"/login",name:"Login",component:y},{path:"/login/:type",name:"Login",component:y},{path:"/msgview/:msgId",name:"msgview",component:oa},{path:"/home2",name:"home2",component:S},{path:"/outer",name:"outer",component:Ne,children:[{path:"",name:"",component:Ae},{path:"mediainfo/:mediaId",name:"",component:Ke},{path:"medialist",name:"medialist",component:Ae},{path:"approvedesc/:mediaId",name:"approvedesc",component:Be},{path:"applymedia",name:"applymedia",component:He},{path:"protocol",name:"protocol",component:Qe},{path:"viewadmins",name:"viewadmins",component:Pe}]}]});Vue.config.productionTip=!1,la.beforeEach(function(t,e,a){t.meta.title&&(document.title=t.meta.title),a()}),new Vue({el:"#app",router:la,components:{App:i},template:"<App/>"})},PB7y:function(t,e){},Pw6H:function(t,e){},"Q+6O":function(t,e){},Sb0c:function(t,e){},T1mX:function(t,e){},UknY:function(t,e){},VGQv:function(t,e){},VbSJ:function(t,e){},"W09/":function(t,e){},W0Sh:function(t,e){},WvWv:function(t,e){},Xngw:function(t,e){},YsRh:function(t,e){},c3lx:function(t,e){},"ct+W":function(t,e){},dDV2:function(t,e){},dZXr:function(t,e){},eptE:function(t,e){},fxwG:function(t,e){},gNtL:function(t,e){},gWma:function(t,e){},i7V9:function(t,e){},"iF2/":function(t,e){},iITt:function(t,e){},juFQ:function(t,e){},jvAv:function(t,e){},kP5T:function(t,e){},lbVc:function(t,e){},"ls/K":function(t,e){},nkMt:function(t,e){},o2Zw:function(t,e){},peFq:function(t,e){},sQ3P:function(t,e){},sbeL:function(t,e){},tuuS:function(t,e){},uslO:function(t,e,a){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return a(n(t))}function n(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="uslO"},xITB:function(t,e){},xgWk:function(t,e){},ykv6:function(t,e){},zsuO:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f99e49bcc88ecf7da417.js.map